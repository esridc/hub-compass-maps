import{gf as e}from"./p-3013819f.js";import{P as n,U as u,L as t,D as r,o as a,G as c}from"./p-8567e6fe.js";import{m as o,d as s}from"./p-c268fbe3.js";function f(e,a,f="nearest",i=!1){const l=!(i&&"u8"===a.pixelType),_=l?u.FLOAT:u.UNSIGNED_BYTE,m=null==a.pixels||0===a.pixels.length?null:l?a.getAsRGBAFloat():a.getAsRGBA(),p=e.capabilities.textureFloat?.textureFloatLinear,b=new s;return b.width=a.width,b.height=a.height,b.internalFormat=l?n.RGBA32F:c.RGBA,b.samplingMode=!p||"bilinear"!==f&&"cubic"!==f?t.NEAREST:t.LINEAR,b.dataType=_,b.wrapMode=r.CLAMP_TO_EDGE,new o(e,b,m)}function i(e,a){const{spacing:c,offsets:f,coefficients:i,size:[l,_]}=a,m=c[0]>1,p=new s;p.width=m?4*l:l,p.height=_,p.internalFormat=n.RGBA32F,p.dataType=u.FLOAT,p.samplingMode=t.NEAREST,p.wrapMode=r.CLAMP_TO_EDGE;const b=new Float32Array(m?l*_*16:2*f.length);if(m&&null!=i)for(let e=0,n=0;e<i.length;e++)b[n++]=i[e],e%3==2&&(b[n++]=1);else for(let e=0;e<_;e++)for(let n=0;n<l;n++){const u=4*(e*l+n),t=2*(n*_+e);b[u]=f[t],b[u+1]=f[t+1],b[u+3]=-1===f[t]?0:1}return new o(e,p,b)}function l(e,n){const u=new s;return u.internalFormat=c.RGBA,u.width=n.length/4,u.height=1,u.samplingMode=t.NEAREST,u.wrapMode=r.CLAMP_TO_EDGE,new o(e,u,n)}function _(n,u,t,r=1,a=!0){return{u_flipY:a,u_applyTransform:!!n,u_opacity:r,u_transformSpacing:n?n.spacing:e,u_transformGridSize:n?n.size:e,u_targetImageSize:u,u_srcImageSize:t}}function m(e,n){return{u_colormapOffset:n||0,u_colormapMaxIndex:e?e.length/4-1:0}}function p(e,n){return{u_scale:e,u_offset:n}}function b(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function k(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function w(e,n){const u=e.gl,t=n.glName,r=new Map;if(null==t)return r;const a=u.getProgramParameter(t,u.ACTIVE_UNIFORMS);let c;for(let e=0;e<a;e++)c=u.getActiveUniform(t,e),c&&r.set(c.name,{location:u.getUniformLocation(t,c.name),info:c});return r}function g(e,n,u){Object.keys(u).forEach((t=>{const r=n.get(t)||n.get(t+"[0]");r&&x(e,t,u[t],r)}))}function d(e,n,u,t){u.length===t.length&&(t.some((e=>null==e))||u.some((e=>null==e))||u.forEach(((u,r)=>{n.setUniform1i(u,r),e.bindTexture(t[r],r)})))}function x(e,n,u,t){if(null===t||null==u)return!1;const{info:r}=t;switch(r.type){case a.FLOAT:r.size>1?e.setUniform1fv(n,u):e.setUniform1f(n,u);break;case a.FLOAT_VEC2:e.setUniform2fv(n,u);break;case a.FLOAT_VEC3:e.setUniform3fv(n,u);break;case a.FLOAT_VEC4:e.setUniform4fv(n,u);break;case a.FLOAT_MAT3:e.setUniformMatrix3fv(n,u);break;case a.FLOAT_MAT4:e.setUniformMatrix4fv(n,u);break;case a.INT:r.size>1?e.setUniform1iv(n,u):e.setUniform1i(n,u);break;case a.BOOL:e.setUniform1i(n,u?1:0);break;case a.INT_VEC2:case a.BOOL_VEC2:e.setUniform2iv(n,u);break;case a.INT_VEC3:case a.BOOL_VEC3:e.setUniform3iv(n,u);break;case a.INT_VEC4:case a.BOOL_VEC4:e.setUniform4iv(n,u);break;default:return!1}return!0}export{k as A,d as O,w as T,m as _,i as c,f,p as g,g as h,_ as l,l as m,b as p};
//# sourceMappingURL=p-2be11d24.js.map