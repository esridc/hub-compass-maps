import{bn as t,bo as n,U as a,X as e,a as r}from"./p-3013819f.js";let i=null,o=!0;function s(t,n,a){if(!t||!n)throw new Error("Cannot construct image data without dimensions");if(o)try{return new ImageData(t,n)}catch(t){o=!1}return u(t,n,a)}function c(t,n,a,e){if(!n||!a)throw new Error("Cannot construct image data without dimensions");if(o)try{return new ImageData(t,n,a)}catch(t){o=!1}const r=u(n,a,e);return r.data.set(t,0),r}function f(){return i||(i=document.createElement("canvas"),i.width=1,i.height=1),i}function u(t,n,a){return a||(a=f()),a.getContext("2d").createImageData(t,n)}async function m(t,n){const i=window.URL.createObjectURL(t);try{const{data:t}=await a(i,{...n,responseType:"image"});return t}catch(t){if(!e(t))throw new r("invalid-image",`Could not fetch requested image at ${i}`);throw t}finally{window.URL.revokeObjectURL(i)}}async function w(t,n){const{arrayBuffer:a,mediaType:e}=await p(t,n),r="image/png"===e;if("image/gif"===e){const{isAnimatedGIF:t,parseGif:e}=await import("./p-91ac4628.js");if(t(a))return e(a,n)}if(r){const{isAnimatedPNG:t,parseApng:e}=await import("./p-09e23e71.js");if(t(a))return e(a,n)}return m(new Blob([a],{type:e}),n)}async function p(e,r){const i=t(e);if(i?.isBase64)return{arrayBuffer:n(i.data),mediaType:i.mediaType};const o=await a(e,{responseType:"array-buffer",...r});return{arrayBuffer:o.data,mediaType:o.getHeader?.("Content-Type")??""}}export{c,w as p,s};
//# sourceMappingURL=p-c60ccdaa.js.map