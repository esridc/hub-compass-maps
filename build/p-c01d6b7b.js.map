{"version":3,"names":["l","constructor","t","this","_ownsRctx","_rctx","_instance","_instanceRefCount","document","createElement","getContext","getExtension","_","e","applyProjection","bilinear","bicubic","r","m","Map","_program","programCache","acquire","shaders","vertexShader","fragmentShader","attributes","useProgram","setUniform1f","setUniform1i","_quad","o","reprojectTexture","s","n","extent","x","xmax","xmin","texture","descriptor","width","y","ymax","ymin","height","spatialReference","g","i","w","Math","round","b","j","D","a","projectedExtent","srcBufferExtent","pixelSize","hasWrapAround","spacing","R","d","C","f","wrapMode","c","CLAMP_TO_EDGE","T","u","bindFramebuffer","setViewport","bindTexture","bind","E","setUniform2f","setUniform2fv","size","draw","unbind","dispose","ImageData","readPixels","p","RGBA","h","UNSIGNED_BYTE","data","detachColorTexture","COLOR_ATTACHMENT0","imageData","M","reprojectBitmapData","bitmapData","putImageData","async","responseType","drawImage","getImageData","equals","destroy","allSublayers","allPoints","allPolylines","allPolygons","allMapImages","I","super","arguments","_bitmapIndex","_mapImageContainer","V","_kmlVisualData","_fetchController","allVisiblePoints","allVisiblePolylines","allVisiblePolygons","allVisibleMapImages","layer","_pointsView","hitTest","_polylinesView","_polygonsView","flat","filter","Boolean","map","sourceLayer","type","graphic","mapPoint","update","processUpdate","attach","AbortController","container","addChild","S","view","graphics","requestUpdateCallback","requestUpdate","v","featuresTilingScheme","addAttachHandles","on","added","forEach","_addMapImage","removed","_removeMapImage","visibleSublayers","values","visibility","get","id","_refreshCollections","_updatingHandles","addPromise","_fetchService","signal","_imageReprojector","detach","removeAllChildren","clear","viewChange","moveEnd","isUpdating","updating","isWGS84","isWebMercator","loadAndReprojectBitmapData","href","fromJSON","then","resolution","rotation","set","viewFormat","viewBoundScale","httpQuery","Error","expand","WGS84","WebMercator","pixelRatio","max","toString","center","replace","query","path","_loadVisualData","url","removeAll","addMany","_isSublayerVisible","sublayerId","item","parentFolderId","_fetchParsedKML","sublayers","points","polylines","polygons","mapImages","push","networkLink","_getViewDependentUrl","state","refreshInterval","removeChild","delete","prototype","k"],"sources":["./node_modules/@arcgis/core/views/support/imageReprojection.js","./node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"../../request.js\";import e from\"../../geometry/Point.js\";import{project as r}from\"../../geometry/projection.js\";import{projectResolution as i,getProjectionOffsetGrid as a}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{isImageSource as s,rasterize as n}from\"../2d/engine/Bitmap.js\";import o from\"../2d/engine/webgl/VertexStream.js\";import{createProgramTemplate as m}from\"../2d/engine/webgl/shaders/MaterialPrograms.js\";import{TextureWrapMode as c,PixelFormat as p,PixelType as h,ColorAttachment as x}from\"../webgl/enums.js\";import{FramebufferObject as u}from\"../webgl/FramebufferObject.js\";import{createTransformTexture as d}from\"../webgl/rasterUtils.js\";import{RenderingContext as _}from\"../webgl/RenderingContext.js\";import{Texture as g}from\"../webgl/Texture.js\";import{TextureDescriptor as f}from\"../webgl/TextureDescriptor.js\";class l{constructor(t){if(this._ownsRctx=!1,t)this._ownsRctx=!1,this._rctx=t;else{if(l._instance)return l._instanceRefCount++,l._instance;l._instanceRefCount=1,l._instance=this,this._ownsRctx=!0;const t=document.createElement(\"canvas\").getContext(\"webgl2\");t.getExtension(\"OES_texture_float\"),this._rctx=new _(t,{})}const e={applyProjection:!0,bilinear:!1,bicubic:!1},r=m(\"raster/reproject\",\"raster/reproject\",new Map([[\"a_position\",0]]),e);this._program=this._rctx.programCache.acquire(r.shaders.vertexShader,r.shaders.fragmentShader,r.attributes),this._rctx.useProgram(this._program),this._program.setUniform1f(\"u_opacity\",1),this._program.setUniform1i(\"u_image\",0),this._program.setUniform1i(\"u_flipY\",0),this._program.setUniform1i(\"u_transformGrid\",1),this._quad=new o(this._rctx,[0,0,1,0,0,1,1,1])}reprojectTexture(t,s,n=!1){const o=r(t.extent,s),m=new e({x:(t.extent.xmax-t.extent.xmin)/t.texture.descriptor.width,y:(t.extent.ymax-t.extent.ymin)/t.texture.descriptor.height,spatialReference:t.extent.spatialReference}),{x:_,y:g}=i(m,s,t.extent);let l=(_+g)/2;const w=Math.round((o.xmax-o.xmin)/l),b=Math.round((o.ymax-o.ymin)/l);l=(o.width/w+o.height/b)/2;const j=new e({x:l,y:l,spatialReference:o.spatialReference}),D=a({projectedExtent:o,srcBufferExtent:t.extent,pixelSize:j,hasWrapAround:!0,spacing:[16,16]}),R=d(this._rctx,D),C=new f(w,b);C.wrapMode=c.CLAMP_TO_EDGE;const T=new u(this._rctx,C);this._rctx.bindFramebuffer(T),this._rctx.setViewport(0,0,w,b),this._rctx.useProgram(this._program),this._rctx.bindTexture(t.texture,0),this._rctx.bindTexture(R,1),this._quad.bind();const{width:y=0,height:E=0}=t.texture.descriptor;if(this._program.setUniform2f(\"u_srcImageSize\",y,E),this._program.setUniform2fv(\"u_transformSpacing\",D.spacing),this._program.setUniform2fv(\"u_transformGridSize\",D.size),this._program.setUniform2f(\"u_targetImageSize\",w,b),this._quad.draw(),this._quad.unbind(),this._rctx.useProgram(null),this._rctx.bindFramebuffer(null),R.dispose(),n){const{width:t,height:e}=T,r=new ImageData(t??0,e??0);T.readPixels(0,0,t??0,e??0,p.RGBA,h.UNSIGNED_BYTE,r.data);const i=T.detachColorTexture(x.COLOR_ATTACHMENT0);return T.dispose(),{texture:i,extent:o,imageData:r}}const M=T.detachColorTexture(x.COLOR_ATTACHMENT0);return T.dispose(),{texture:M,extent:o}}reprojectBitmapData(t,e){const r=s(t.bitmapData)?n(t.bitmapData):t.bitmapData,i=new f;i.wrapMode=c.CLAMP_TO_EDGE,i.width=t.bitmapData.width,i.height=t.bitmapData.height;const a=new g(this._rctx,i,r),o=this.reprojectTexture({texture:a,extent:t.extent},e,!0);o.texture.dispose();const m=document.createElement(\"canvas\"),p=o.imageData;m.width=p.width,m.height=p.height;return m.getContext(\"2d\").putImageData(p,0,0),{bitmapData:m,extent:o.extent}}async loadAndReprojectBitmapData(e,r,i){const a=(await t(e,{responseType:\"image\"})).data,s=document.createElement(\"canvas\");s.width=a.width,s.height=a.height;const n=s.getContext(\"2d\");n.drawImage(a,0,0);const o=n.getImageData(0,0,s.width,s.height);if(r.spatialReference.equals(i))return{bitmapData:o,extent:r};const m=this.reprojectBitmapData({bitmapData:o,extent:r},i);return{bitmapData:m.bitmapData,extent:m.extent}}destroy(){this._ownsRctx?(l._instanceRefCount--,0===l._instanceRefCount&&(this._quad.dispose(),this._program.dispose(),this._rctx.dispose(),l._instance=null)):(this._quad.dispose(),this._program.dispose())}}l._instanceRefCount=0;export{l as ImageReprojector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{version as i}from\"../../../kernel.js\";import t from\"../../../core/Collection.js\";import{abortMaybe as s,destroyMaybe as a}from\"../../../core/maybe.js\";import{watch as o}from\"../../../core/reactiveUtils.js\";import{queryToObject as l,objectToQuery as r}from\"../../../core/urlUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../geometry/Extent.js\";import{load as m,project as c}from\"../../../geometry/projection.js\";import d from\"../../../geometry/SpatialReference.js\";import{getGraphics as y,fetchService as g,parseKML as w}from\"../../../layers/support/kmlUtils.js\";import{parseUrl as u}from\"../../../rest/utils.js\";import{GraphicsCollection as _}from\"../../../support/GraphicsCollection.js\";import{Bitmap as b}from\"../engine/Bitmap.js\";import{BitmapContainer as V}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as f}from\"./LayerView2D.js\";import v from\"./graphics/GraphicContainer.js\";import S from\"./graphics/GraphicsView2D.js\";import I from\"../../layers/LayerView.js\";import{ImageReprojector as x}from\"../../support/imageReprojection.js\";class C{constructor(){this.allSublayers=new Map,this.allPoints=[],this.allPolylines=[],this.allPolygons=[],this.allMapImages=[]}}let j=class extends(f(I)){constructor(){super(...arguments),this._bitmapIndex=new Map,this._mapImageContainer=new V,this._kmlVisualData=new C,this._fetchController=null,this.allVisiblePoints=new _,this.allVisiblePolylines=new _,this.allVisiblePolygons=new _,this.allVisibleMapImages=new t}async hitTest(e,i){const t=this.layer;return[this._pointsView?.hitTest(e),this._polylinesView?.hitTest(e),this._polygonsView?.hitTest(e)].flat().filter(Boolean).map((i=>(i.layer=t,i.sourceLayer=t,{type:\"graphic\",graphic:i,layer:t,mapPoint:e})))}update(e){this._polygonsView&&this._polygonsView.processUpdate(e),this._polylinesView&&this._polylinesView.processUpdate(e),this._pointsView&&this._pointsView.processUpdate(e)}attach(){this._fetchController=new AbortController,this.container.addChild(this._mapImageContainer),this._polygonsView=new S({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:()=>this.requestUpdate(),container:new v(this.view.featuresTilingScheme)}),this.container.addChild(this._polygonsView.container),this._polylinesView=new S({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:()=>this.requestUpdate(),container:new v(this.view.featuresTilingScheme)}),this.container.addChild(this._polylinesView.container),this._pointsView=new S({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:()=>this.requestUpdate(),container:new v(this.view.featuresTilingScheme)}),this.container.addChild(this._pointsView.container),this.addAttachHandles([this.allVisibleMapImages.on(\"change\",(e=>{e.added.forEach((e=>this._addMapImage(e))),e.removed.forEach((e=>this._removeMapImage(e)))})),o((()=>this.layer.visibleSublayers),(e=>{for(const i of this._kmlVisualData.allSublayers.values())i.visibility=0;for(const i of e){const e=this._kmlVisualData.allSublayers.get(i.id);e&&(e.visibility=1)}this._refreshCollections()}))]),this._updatingHandles.addPromise(this._fetchService(this._fetchController.signal)),this._imageReprojector=new x}detach(){this._fetchController=s(this._fetchController),this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView=a(this._polygonsView),this._polylinesView=a(this._polylinesView),this._pointsView=a(this._pointsView),this._imageReprojector=a(this._imageReprojector)}viewChange(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()}moveEnd(){}isUpdating(){return this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating}_addMapImage(e){(this.view.spatialReference?.isWGS84||this.view.spatialReference?.isWebMercator)&&this._imageReprojector.loadAndReprojectBitmapData(e.href,p.fromJSON(e.extent),this.view.spatialReference).then((i=>{const t=new b(i.bitmapData);t.x=i.extent.xmin,t.y=i.extent.ymax,t.resolution=i.extent.width/i.bitmapData.width,t.rotation=e.rotation,this._mapImageContainer.addChild(t),this._bitmapIndex.set(e,t)}))}async _getViewDependentUrl(e,t){const{viewFormat:s,viewBoundScale:a,httpQuery:o}=e;if(null!=s){if(null==t)throw new Error(\"Loading this network link requires a view state.\");let n;if(await m(),null!=a&&1!==a){const e=new p(t.extent);e.expand(a),n=e}else n=t.extent;n=c(n,d.WGS84);const h=c(n,d.WebMercator),y=n.xmin,g=n.xmax,w=n.ymin,_=n.ymax,b=t.size[0]*t.pixelRatio,V=t.size[1]*t.pixelRatio,f=Math.max(h.width,h.height),v={\"[bboxWest]\":y.toString(),\"[bboxEast]\":g.toString(),\"[bboxSouth]\":w.toString(),\"[bboxNorth]\":_.toString(),\"[lookatLon]\":n.center.x.toString(),\"[lookatLat]\":n.center.y.toString(),\"[lookatRange]\":f.toString(),\"[lookatTilt]\":\"0\",\"[lookatHeading]\":t.rotation.toString(),\"[lookatTerrainLon]\":n.center.x.toString(),\"[lookatTerrainLat]\":n.center.y.toString(),\"[lookatTerrainAlt]\":\"0\",\"[cameraLon]\":n.center.x.toString(),\"[cameraLat]\":n.center.y.toString(),\"[cameraAlt]\":f.toString(),\"[horizFov]\":\"60\",\"[vertFov]\":\"60\",\"[horizPixels]\":b.toString(),\"[vertPixels]\":V.toString(),\"[terrainEnabled]\":\"0\",\"[clientVersion]\":i,\"[kmlVersion]\":\"2.2\",\"[clientName]\":\"ArcGIS API for JavaScript\",\"[language]\":\"en-US\"},S=e=>{for(const i in e){let t;for(t in v)e[i]=e[i].replace(t,v[t])}},I=l(s);S(I);let x={};null!=o&&(x=l(o),S(x));const C=u(e.href);C.query={...C.query,...I,...x};return`${C.path}?${r(I)}`}return e.href}async _fetchService(e){const i=new C;await this._loadVisualData(this.layer.url,i,e),this._kmlVisualData=i,this._refreshCollections()}_refreshCollections(){this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),this.allVisiblePoints.addMany(this._kmlVisualData.allPoints.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolylines.addMany(this._kmlVisualData.allPolylines.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolygons.addMany(this._kmlVisualData.allPolygons.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisibleMapImages.addMany(this._kmlVisualData.allMapImages.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e)))}_isSublayerVisible(e){const i=this._kmlVisualData.allSublayers.get(e);return!!i?.visibility&&(-1===i.parentFolderId||this._isSublayerVisible(i.parentFolderId))}_loadVisualData(e,i,t){return this._fetchParsedKML(e,t).then((async e=>{for(const s of e.sublayers){i.allSublayers.set(s.id,s);const e=s.points?await y(s.points):[],a=s.polylines?await y(s.polylines):[],o=s.polygons?await y(s.polygons):[],l=s.mapImages||[];if(i.allPoints.push(...e.map((e=>({item:e,sublayerId:s.id})))),i.allPolylines.push(...a.map((e=>({item:e,sublayerId:s.id})))),i.allPolygons.push(...o.map((e=>({item:e,sublayerId:s.id})))),i.allMapImages.push(...l.map((e=>({item:e,sublayerId:s.id})))),s.networkLink){const e=await this._getViewDependentUrl(s.networkLink,this.view.state);await this._loadVisualData(e,i,t)}}}))}_fetchParsedKML(e,i){return g(e,this.layer.spatialReference,this.layer.refreshInterval,i).then((e=>w(e.data)))}_removeMapImage(e){const i=this._bitmapIndex.get(e);i&&(this._mapImageContainer.removeChild(i),this._bitmapIndex.delete(e))}};e([n()],j.prototype,\"_pointsView\",void 0),e([n()],j.prototype,\"_polylinesView\",void 0),e([n()],j.prototype,\"_polygonsView\",void 0),e([n()],j.prototype,\"updating\",void 0),j=e([h(\"esri.views.2d.layers.KMLLayerView2D\")],j);const k=j;export{k as default};\n"],"mappings":"moDAIy2B,MAAMA,EAAEC,YAAYC,GAAG,GAAGC,KAAKC,WAAW,EAAEF,EAAEC,KAAKC,WAAW,EAAED,KAAKE,MAAMH,MAAM,CAAC,GAAGF,EAAEM,UAAU,OAAON,EAAEO,oBAAoBP,EAAEM,UAAUN,EAAEO,kBAAkB,EAAEP,EAAEM,UAAUH,KAAKA,KAAKC,WAAW,EAAE,MAAMF,EAAEM,SAASC,cAAc,UAAUC,WAAW,UAAUR,EAAES,aAAa,qBAAqBR,KAAKE,MAAM,IAAIO,EAAEV,EAAE,GAAG,CAAC,MAAMW,EAAE,CAACC,iBAAiB,EAAEC,UAAU,EAAEC,SAAS,GAAGC,EAAEC,EAAE,mBAAmB,mBAAmB,IAAIC,IAAI,CAAC,CAAC,aAAa,KAAKN,GAAGV,KAAKiB,SAASjB,KAAKE,MAAMgB,aAAaC,QAAQL,EAAEM,QAAQC,aAAaP,EAAEM,QAAQE,eAAeR,EAAES,YAAYvB,KAAKE,MAAMsB,WAAWxB,KAAKiB,UAAUjB,KAAKiB,SAASQ,aAAa,YAAY,GAAGzB,KAAKiB,SAASS,aAAa,UAAU,GAAG1B,KAAKiB,SAASS,aAAa,UAAU,GAAG1B,KAAKiB,SAASS,aAAa,kBAAkB,GAAG1B,KAAK2B,MAAM,IAAIC,EAAE5B,KAAKE,MAAM,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC2B,iBAAiB9B,EAAE+B,EAAEC,GAAG,GAAG,MAAMH,EAAEd,EAAEf,EAAEiC,OAAOF,GAAGf,EAAE,IAAIL,EAAE,CAACuB,GAAGlC,EAAEiC,OAAOE,KAAKnC,EAAEiC,OAAOG,MAAMpC,EAAEqC,QAAQC,WAAWC,MAAMC,GAAGxC,EAAEiC,OAAOQ,KAAKzC,EAAEiC,OAAOS,MAAM1C,EAAEqC,QAAQC,WAAWK,OAAOC,iBAAiB5C,EAAEiC,OAAOW,oBAAoBV,EAAExB,EAAE8B,EAAEK,GAAGC,EAAE9B,EAAEe,EAAE/B,EAAEiC,QAAQ,IAAInC,GAAGY,EAAEmC,GAAG,EAAE,MAAME,EAAEC,KAAKC,OAAOpB,EAAEM,KAAKN,EAAEO,MAAMtC,GAAGoD,EAAEF,KAAKC,OAAOpB,EAAEY,KAAKZ,EAAEa,MAAM5C,GAAGA,GAAG+B,EAAEU,MAAMQ,EAAElB,EAAEc,OAAOO,GAAG,EAAE,MAAMC,EAAE,IAAIxC,EAAE,CAACuB,EAAEpC,EAAE0C,EAAE1C,EAAE8C,iBAAiBf,EAAEe,mBAAmBQ,EAAEC,EAAE,CAACC,gBAAgBzB,EAAE0B,gBAAgBvD,EAAEiC,OAAOuB,UAAUL,EAAEM,eAAe,EAAEC,QAAQ,CAAC,GAAG,MAAMC,EAAEC,EAAE3D,KAAKE,MAAMiD,GAAGS,EAAE,IAAIC,EAAEf,EAAEG,GAAGW,EAAEE,SAASC,EAAEC,cAAc,MAAMC,EAAE,IAAIC,EAAElE,KAAKE,MAAM0D,GAAG5D,KAAKE,MAAMiE,gBAAgBF,GAAGjE,KAAKE,MAAMkE,YAAY,EAAE,EAAEtB,EAAEG,GAAGjD,KAAKE,MAAMsB,WAAWxB,KAAKiB,UAAUjB,KAAKE,MAAMmE,YAAYtE,EAAEqC,QAAQ,GAAGpC,KAAKE,MAAMmE,YAAYX,EAAE,GAAG1D,KAAK2B,MAAM2C,OAAO,MAAMhC,MAAMC,EAAE,EAAEG,OAAO6B,EAAE,GAAGxE,EAAEqC,QAAQC,WAAW,GAAGrC,KAAKiB,SAASuD,aAAa,iBAAiBjC,EAAEgC,GAAGvE,KAAKiB,SAASwD,cAAc,qBAAqBtB,EAAEM,SAASzD,KAAKiB,SAASwD,cAAc,sBAAsBtB,EAAEuB,MAAM1E,KAAKiB,SAASuD,aAAa,oBAAoB1B,EAAEG,GAAGjD,KAAK2B,MAAMgD,OAAO3E,KAAK2B,MAAMiD,SAAS5E,KAAKE,MAAMsB,WAAW,MAAMxB,KAAKE,MAAMiE,gBAAgB,MAAMT,EAAEmB,UAAU9C,EAAE,CAAC,MAAMO,MAAMvC,EAAE2C,OAAOhC,GAAGuD,EAAEnD,EAAE,IAAIgE,UAAU/E,GAAG,EAAEW,GAAG,GAAGuD,EAAEc,WAAW,EAAE,EAAEhF,GAAG,EAAEW,GAAG,EAAEsE,EAAEC,KAAKC,EAAEC,cAAcrE,EAAEsE,MAAM,MAAMvC,EAAEoB,EAAEoB,mBAAmBpD,EAAEqD,mBAAmB,OAAOrB,EAAEY,UAAU,CAACzC,QAAQS,EAAEb,OAAOJ,EAAE2D,UAAUzE,EAAE,CAAC,MAAM0E,EAAEvB,EAAEoB,mBAAmBpD,EAAEqD,mBAAmB,OAAOrB,EAAEY,UAAU,CAACzC,QAAQoD,EAAExD,OAAOJ,EAAE,CAAC6D,oBAAoB1F,EAAEW,GAAG,MAAMI,EAAEgB,EAAE/B,EAAE2F,YAAY3D,EAAEhC,EAAE2F,YAAY3F,EAAE2F,WAAW7C,EAAE,IAAIgB,EAAEhB,EAAEiB,SAASC,EAAEC,cAAcnB,EAAEP,MAAMvC,EAAE2F,WAAWpD,MAAMO,EAAEH,OAAO3C,EAAE2F,WAAWhD,OAAO,MAAMU,EAAE,IAAIR,EAAE5C,KAAKE,MAAM2C,EAAE/B,GAAGc,EAAE5B,KAAK6B,iBAAiB,CAACO,QAAQgB,EAAEpB,OAAOjC,EAAEiC,QAAQtB,GAAG,GAAGkB,EAAEQ,QAAQyC,UAAU,MAAM9D,EAAEV,SAASC,cAAc,UAAU0E,EAAEpD,EAAE2D,UAAUxE,EAAEuB,MAAM0C,EAAE1C,MAAMvB,EAAE2B,OAAOsC,EAAEtC,OAAO,OAAO3B,EAAER,WAAW,MAAMoF,aAAaX,EAAE,EAAE,GAAG,CAACU,WAAW3E,EAAEiB,OAAOJ,EAAEI,OAAO,CAAC4D,iCAAiClF,EAAEI,EAAE+B,GAAG,MAAMO,SAASrD,EAAEW,EAAE,CAACmF,aAAa,WAAWT,KAAKtD,EAAEzB,SAASC,cAAc,UAAUwB,EAAEQ,MAAMc,EAAEd,MAAMR,EAAEY,OAAOU,EAAEV,OAAO,MAAMX,EAAED,EAAEvB,WAAW,MAAMwB,EAAE+D,UAAU1C,EAAE,EAAE,GAAG,MAAMxB,EAAEG,EAAEgE,aAAa,EAAE,EAAEjE,EAAEQ,MAAMR,EAAEY,QAAQ,GAAG5B,EAAE6B,iBAAiBqD,OAAOnD,GAAG,MAAM,CAAC6C,WAAW9D,EAAEI,OAAOlB,GAAG,MAAMC,EAAEf,KAAKyF,oBAAoB,CAACC,WAAW9D,EAAEI,OAAOlB,GAAG+B,GAAG,MAAM,CAAC6C,WAAW3E,EAAE2E,WAAW1D,OAAOjB,EAAEiB,OAAO,CAACiE,UAAUjG,KAAKC,WAAWJ,EAAEO,oBAAoB,IAAIP,EAAEO,oBAAoBJ,KAAK2B,MAAMkD,UAAU7E,KAAKiB,SAAS4D,UAAU7E,KAAKE,MAAM2E,UAAUhF,EAAEM,UAAU,QAAQH,KAAK2B,MAAMkD,UAAU7E,KAAKiB,SAAS4D,UAAU,EAAEhF,EAAEO,kBAAkB,ECA30F,MAAMwD,EAAE9D,cAAcE,KAAKkG,aAAa,IAAIlF,IAAIhB,KAAKmG,UAAU,GAAGnG,KAAKoG,aAAa,GAAGpG,KAAKqG,YAAY,GAAGrG,KAAKsG,aAAa,EAAE,EAAE,IAAIpD,EAAE,cAAcW,EAAE0C,IAAIzG,cAAc0G,SAASC,WAAWzG,KAAK0G,aAAa,IAAI1F,IAAIhB,KAAK2G,mBAAmB,IAAIC,EAAE5G,KAAK6G,eAAe,IAAIjD,EAAE5D,KAAK8G,iBAAiB,KAAK9G,KAAK+G,iBAAiB,IAAItG,EAAET,KAAKgH,oBAAoB,IAAIvG,EAAET,KAAKiH,mBAAmB,IAAIxG,EAAET,KAAKkH,oBAAoB,IAAInH,CAAC,CAAC6F,cAAclF,EAAEmC,GAAG,MAAM9C,EAAEC,KAAKmH,MAAM,MAAM,CAACnH,KAAKoH,aAAaC,QAAQ3G,GAAGV,KAAKsH,gBAAgBD,QAAQ3G,GAAGV,KAAKuH,eAAeF,QAAQ3G,IAAI8G,OAAOC,OAAOC,SAASC,KAAK9E,IAAIA,EAAEsE,MAAMpH,EAAE8C,EAAE+E,YAAY7H,EAAE,CAAC8H,KAAK,UAAUC,QAAQjF,EAAEsE,MAAMpH,EAAEgI,SAASrH,KAAK,CAACsH,OAAOtH,GAAGV,KAAKuH,eAAevH,KAAKuH,cAAcU,cAAcvH,GAAGV,KAAKsH,gBAAgBtH,KAAKsH,eAAeW,cAAcvH,GAAGV,KAAKoH,aAAapH,KAAKoH,YAAYa,cAAcvH,EAAE,CAACwH,SAASlI,KAAK8G,iBAAiB,IAAIqB,gBAAgBnI,KAAKoI,UAAUC,SAASrI,KAAK2G,oBAAoB3G,KAAKuH,cAAc,IAAIe,EAAE,CAACC,KAAKvI,KAAKuI,KAAKC,SAASxI,KAAKiH,mBAAmBwB,sBAAsB,IAAIzI,KAAK0I,gBAAgBN,UAAU,IAAIO,EAAE3I,KAAKuI,KAAKK,wBAAwB5I,KAAKoI,UAAUC,SAASrI,KAAKuH,cAAca,WAAWpI,KAAKsH,eAAe,IAAIgB,EAAE,CAACC,KAAKvI,KAAKuI,KAAKC,SAASxI,KAAKgH,oBAAoByB,sBAAsB,IAAIzI,KAAK0I,gBAAgBN,UAAU,IAAIO,EAAE3I,KAAKuI,KAAKK,wBAAwB5I,KAAKoI,UAAUC,SAASrI,KAAKsH,eAAec,WAAWpI,KAAKoH,YAAY,IAAIkB,EAAE,CAACC,KAAKvI,KAAKuI,KAAKC,SAASxI,KAAK+G,iBAAiB0B,sBAAsB,IAAIzI,KAAK0I,gBAAgBN,UAAU,IAAIO,EAAE3I,KAAKuI,KAAKK,wBAAwB5I,KAAKoI,UAAUC,SAASrI,KAAKoH,YAAYgB,WAAWpI,KAAK6I,iBAAiB,CAAC7I,KAAKkH,oBAAoB4B,GAAG,UAAUpI,IAAIA,EAAEqI,MAAMC,SAAStI,GAAGV,KAAKiJ,aAAavI,KAAKA,EAAEwI,QAAQF,SAAStI,GAAGV,KAAKmJ,gBAAgBzI,IAAK,IAAGkB,GAAC,IAAM5B,KAAKmH,MAAMiC,mBAAmB1I,IAAI,IAAI,MAAMmC,KAAK7C,KAAK6G,eAAeX,aAAamD,SAASxG,EAAEyG,WAAW,EAAE,IAAI,MAAMzG,KAAKnC,EAAE,CAAC,MAAMA,EAAEV,KAAK6G,eAAeX,aAAaqD,IAAI1G,EAAE2G,IAAI9I,IAAIA,EAAE4I,WAAW,EAAE,CAACtJ,KAAKyJ,qBAAsB,MAAKzJ,KAAK0J,iBAAiBC,WAAW3J,KAAK4J,cAAc5J,KAAK8G,iBAAiB+C,SAAS7J,KAAK8J,kBAAkB,IAAI7H,CAAC,CAAC8H,SAAS/J,KAAK8G,iBAAiBhF,EAAE9B,KAAK8G,kBAAkB9G,KAAK2G,mBAAmBqD,oBAAoBhK,KAAKoI,UAAU4B,oBAAoBhK,KAAK0G,aAAauD,QAAQjK,KAAKuH,cAAcnE,EAAEpD,KAAKuH,eAAevH,KAAKsH,eAAelE,EAAEpD,KAAKsH,gBAAgBtH,KAAKoH,YAAYhE,EAAEpD,KAAKoH,aAAapH,KAAK8J,kBAAkB1G,EAAEpD,KAAK8J,kBAAkB,CAACI,aAAalK,KAAKuH,cAAc2C,aAAalK,KAAKsH,eAAe4C,aAAalK,KAAKoH,YAAY8C,YAAY,CAACC,UAAS,CAAEC,aAAa,OAAOpK,KAAKoH,YAAYiD,UAAUrK,KAAKuH,cAAc8C,UAAUrK,KAAKsH,eAAe+C,QAAQ,CAACpB,aAAavI,IAAIV,KAAKuI,KAAK5F,kBAAkB2H,SAAStK,KAAKuI,KAAK5F,kBAAkB4H,gBAAgBvK,KAAK8J,kBAAkBU,2BAA2B9J,EAAE+J,KAAKzF,EAAE0F,SAAShK,EAAEsB,QAAQhC,KAAKuI,KAAK5F,kBAAkBgI,MAAM9H,IAAI,MAAM9C,EAAE,IAAIkD,EAAEJ,EAAE6C,YAAY3F,EAAEkC,EAAEY,EAAEb,OAAOG,KAAKpC,EAAEwC,EAAEM,EAAEb,OAAOQ,KAAKzC,EAAE6K,WAAW/H,EAAEb,OAAOM,MAAMO,EAAE6C,WAAWpD,MAAMvC,EAAE8K,SAASnK,EAAEmK,SAAS7K,KAAK2G,mBAAmB0B,SAAStI,GAAGC,KAAK0G,aAAaoE,IAAIpK,EAAEX,EAAG,GAAE,CAAC6F,2BAA2BlF,EAAEX,GAAG,MAAMgL,WAAWjJ,EAAEkJ,eAAe5H,EAAE6H,UAAUrJ,GAAGlB,EAAE,GAAG,MAAMoB,EAAE,CAAC,GAAG,MAAM/B,EAAE,MAAM,IAAImL,MAAM,oDAAoD,IAAInJ,EAAE,SAAShB,IAAI,MAAMqC,GAAG,IAAIA,EAAE,CAAC,MAAM1C,EAAE,IAAIsE,EAAEjF,EAAEiC,QAAQtB,EAAEyK,OAAO/H,GAAGrB,EAAErB,CAAC,MAAMqB,EAAEhC,EAAEiC,OAAOD,EAAEgC,EAAEhC,EAAE4B,EAAEyH,OAAO,MAAMlG,EAAEnB,EAAEhC,EAAE4B,EAAE0H,aAAa9I,EAAER,EAAEI,KAAKS,EAAEb,EAAEG,KAAKY,EAAEf,EAAEU,KAAKhC,EAAEsB,EAAES,KAAKS,EAAElD,EAAE2E,KAAK,GAAG3E,EAAEuL,WAAW1E,EAAE7G,EAAE2E,KAAK,GAAG3E,EAAEuL,WAAWzH,EAAEd,KAAKwI,IAAIrG,EAAE5C,MAAM4C,EAAExC,QAAQiG,EAAE,CAAC,aAAapG,EAAEiJ,WAAW,aAAa5I,EAAE4I,WAAW,cAAc1I,EAAE0I,WAAW,cAAc/K,EAAE+K,WAAW,cAAczJ,EAAE0J,OAAOxJ,EAAEuJ,WAAW,cAAczJ,EAAE0J,OAAOlJ,EAAEiJ,WAAW,gBAAgB3H,EAAE2H,WAAW,eAAe,IAAI,kBAAkBzL,EAAE8K,SAASW,WAAW,qBAAqBzJ,EAAE0J,OAAOxJ,EAAEuJ,WAAW,qBAAqBzJ,EAAE0J,OAAOlJ,EAAEiJ,WAAW,qBAAqB,IAAI,cAAczJ,EAAE0J,OAAOxJ,EAAEuJ,WAAW,cAAczJ,EAAE0J,OAAOlJ,EAAEiJ,WAAW,cAAc3H,EAAE2H,WAAW,aAAa,KAAK,YAAY,KAAK,gBAAgBvI,EAAEuI,WAAW,eAAe5E,EAAE4E,WAAW,mBAAmB,IAAI,kBAAkB3I,EAAE,eAAe,MAAM,eAAe,4BAA4B,aAAa,SAASyF,EAAE5H,IAAI,IAAI,MAAMmC,KAAKnC,EAAE,CAAC,IAAIX,EAAE,IAAIA,KAAK4I,EAAEjI,EAAEmC,GAAGnC,EAAEmC,GAAG6I,QAAQ3L,EAAE4I,EAAE5I,GAAG,GAAGwG,EAAE1G,EAAEiC,GAAGwG,EAAE/B,GAAG,IAAItE,EAAE,GAAG,MAAML,IAAIK,EAAEpC,EAAE+B,GAAG0G,EAAErG,IAAI,MAAM2B,EAAEM,EAAExD,EAAE+J,MAAM7G,EAAE+H,MAAM,IAAI/H,EAAE+H,SAASpF,KAAKtE,GAAG,MAAM,GAAG2B,EAAEgI,QAAQ9K,EAAEyF,IAAI,CAAC,OAAO7F,EAAE+J,IAAI,CAAC7E,oBAAoBlF,GAAG,MAAMmC,EAAE,IAAIe,QAAQ5D,KAAK6L,gBAAgB7L,KAAKmH,MAAM2E,IAAIjJ,EAAEnC,GAAGV,KAAK6G,eAAehE,EAAE7C,KAAKyJ,qBAAqB,CAACA,sBAAsBzJ,KAAK+G,iBAAiBgF,YAAY/L,KAAKgH,oBAAoB+E,YAAY/L,KAAKiH,mBAAmB8E,YAAY/L,KAAKkH,oBAAoB6E,YAAY/L,KAAK+G,iBAAiBiF,QAAQhM,KAAK6G,eAAeV,UAAUsB,QAAQ/G,GAAGV,KAAKiM,mBAAmBvL,EAAEwL,cAAcvE,KAAG,EAAIwE,KAAKzL,KAAKA,KAAKV,KAAKgH,oBAAoBgF,QAAQhM,KAAK6G,eAAeT,aAAaqB,QAAQ/G,GAAGV,KAAKiM,mBAAmBvL,EAAEwL,cAAcvE,KAAG,EAAIwE,KAAKzL,KAAKA,KAAKV,KAAKiH,mBAAmB+E,QAAQhM,KAAK6G,eAAeR,YAAYoB,QAAQ/G,GAAGV,KAAKiM,mBAAmBvL,EAAEwL,cAAcvE,KAAG,EAAIwE,KAAKzL,KAAKA,KAAKV,KAAKkH,oBAAoB8E,QAAQhM,KAAK6G,eAAeP,aAAamB,QAAQ/G,GAAGV,KAAKiM,mBAAmBvL,EAAEwL,cAAcvE,KAAG,EAAIwE,KAAKzL,KAAKA,IAAI,CAACuL,mBAAmBvL,GAAG,MAAMmC,EAAE7C,KAAK6G,eAAeX,aAAaqD,IAAI7I,GAAG,QAAQmC,GAAGyG,cAAc,IAAIzG,EAAEuJ,gBAAgBpM,KAAKiM,mBAAmBpJ,EAAEuJ,gBAAgB,CAACP,gBAAgBnL,EAAEmC,EAAE9C,GAAG,OAAOC,KAAKqM,gBAAgB3L,EAAEX,GAAG4K,MAAI,MAAE/E,IAAU,IAAI,MAAM9D,KAAKpB,EAAE4L,UAAU,CAACzJ,EAAEqD,aAAa4E,IAAIhJ,EAAE0H,GAAG1H,GAAG,MAAMpB,EAAEoB,EAAEyK,aAAahK,EAAET,EAAEyK,QAAQ,GAAGnJ,EAAEtB,EAAE0K,gBAAgBjK,EAAET,EAAE0K,WAAW,GAAG5K,EAAEE,EAAE2K,eAAelK,EAAET,EAAE2K,UAAU,GAAG5M,EAAEiC,EAAE4K,WAAW,GAAG,GAAG7J,EAAEsD,UAAUwG,QAAQjM,EAAEiH,KAAKjH,IAAC,CAAIyL,KAAKzL,EAAEwL,WAAWpK,EAAE0H,QAAQ3G,EAAEuD,aAAauG,QAAQvJ,EAAEuE,KAAKjH,IAAC,CAAIyL,KAAKzL,EAAEwL,WAAWpK,EAAE0H,QAAQ3G,EAAEwD,YAAYsG,QAAQ/K,EAAE+F,KAAKjH,IAAC,CAAIyL,KAAKzL,EAAEwL,WAAWpK,EAAE0H,QAAQ3G,EAAEyD,aAAaqG,QAAQ9M,EAAE8H,KAAKjH,IAAC,CAAIyL,KAAKzL,EAAEwL,WAAWpK,EAAE0H,QAAQ1H,EAAE8K,YAAY,CAAC,MAAMlM,QAAQV,KAAK6M,qBAAqB/K,EAAE8K,YAAY5M,KAAKuI,KAAKuE,aAAa9M,KAAK6L,gBAAgBnL,EAAEmC,EAAE9C,EAAE,CAAC,CAAE,GAAE,CAACsM,gBAAgB3L,EAAEmC,GAAG,OAAOD,EAAElC,EAAEV,KAAKmH,MAAMxE,iBAAiB3C,KAAKmH,MAAM4F,gBAAgBlK,GAAG8H,MAAMjK,GAAGoC,EAAEpC,EAAE0E,OAAO,CAAC+D,gBAAgBzI,GAAG,MAAMmC,EAAE7C,KAAK0G,aAAa6C,IAAI7I,GAAGmC,IAAI7C,KAAK2G,mBAAmBqG,YAAYnK,GAAG7C,KAAK0G,aAAauG,OAAOvM,GAAG,GAAGA,EAAE,CAACqB,KAAKmB,EAAEgK,UAAU,mBAAmB,GAAGxM,EAAE,CAACqB,KAAKmB,EAAEgK,UAAU,sBAAsB,GAAGxM,EAAE,CAACqB,KAAKmB,EAAEgK,UAAU,qBAAqB,GAAGxM,EAAE,CAACqB,KAAKmB,EAAEgK,UAAU,gBAAgB,GAAGhK,EAAExC,EAAE,CAACwE,EAAE,wCAAwChC,GAAQ,MAACiK,EAAEjK,iB"}