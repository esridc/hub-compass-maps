{"version":3,"names":["e","s","u","c","Array","isArray","a","length","byteLength","h","Uint32Array","y","minReduction","A","originalIndices","g","m","componentOffsets","w","t","n","U","Math","floor","i","b","d","p","M","j","q","I","ceil","k","x","sqrt","r","f","o","l","C","buffer","indices","uniqueCount"],"sources":["./node_modules/@arcgis/core/geometry/support/meshUtils/deduplicate.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{nextHighestPowerOfTwo as t}from\"../../../core/mathUtils.js\";import{newIndexArray as n,compactIndices as r}from\"../Indices.js\";function e(e,s,u){const c=Array.isArray(e),a=c?e.length/s:e.byteLength/(4*s),h=c?e:new Uint32Array(e,0,a*s),y=u?.minReduction??0,A=u?.originalIndices||null,g=A?A.length:0,m=u?.componentOffsets||null;let w=0;if(m)for(let t=0;t<m.length-1;t++){const n=m[t+1]-m[t];n>w&&(w=n)}else w=a;const U=Math.floor(1.1*w)+1;(null==i||i.length<2*U)&&(i=new Uint32Array(t(2*U)));for(let t=0;t<2*U;t++)i[t]=0;let b=0;const d=!!m&&!!A,p=d?g:a;let M=n(a);const j=new Uint32Array(g),q=1.96;let I=0!==y?Math.ceil(4*q*q/(y*y)*y*(1-y)):p,k=1,x=m?m[1]:p;for(let t=0;t<p;t++){if(t===I){const n=1-b/t;if(n+q*Math.sqrt(n*(1-n)/t)<y)return null;I*=2}if(t===x){for(let t=0;t<2*U;t++)i[t]=0;if(A)for(let t=m[k-1];t<m[k];t++)j[t]=M[A[t]];x=m[++k]}const n=d?A[t]:t,r=n*s,e=f(h,r,s);let o=e%U,u=b;for(;0!==i[2*o+1];){if(i[2*o]===e){const t=i[2*o+1]-1;if(l(h,r,t*s,s)){u=M[t];break}}o++,o>=U&&(o-=U)}u===b&&(i[2*o]=e,i[2*o+1]=n+1,b++),M[n]=u}if(0!==y&&1-b/a<y)return null;if(d){for(let t=m[k-1];t<j.length;t++)j[t]=M[A[t]];M=r(j)}const C=c?new Array(b):new Uint32Array(b*s);b=0;for(let t=0;t<p;t++)if(M[t]===b){o(h,(d?A[t]:t)*s,C,b*s,s),b++}if(A&&!d){const t=new Uint32Array(g);for(let n=0;n<t.length;n++)t[n]=M[A[n]];M=r(t)}return{buffer:Array.isArray(C)?C:C.buffer,indices:M,uniqueCount:b}}function l(t,n,r,e){for(let l=0;l<e;l++)if(t[n+l]!==t[r+l])return!1;return!0}function o(t,n,r,e,l){for(let o=0;o<l;o++)r[e+o]=t[n+o]}function f(t,n,r){let e=0;for(let l=0;l<r;l++)e=t[n+l]+e|0,e=e+(e<<11)+(e>>>2)|0;return e>>>0}let i=null;export{e as deduplicate};\n"],"mappings":"gFAIqI,SAASA,EAAEA,EAAEC,EAAEC,GAAG,MAAMC,EAAEC,MAAMC,QAAQL,GAAGM,EAAEH,EAAEH,EAAEO,OAAON,EAAED,EAAEQ,YAAY,EAAEP,GAAGQ,EAAEN,EAAEH,EAAE,IAAIU,YAAYV,EAAE,EAAEM,EAAEL,GAAGU,EAAET,GAAGU,cAAc,EAAEC,EAAEX,GAAGY,iBAAiB,KAAKC,EAAEF,EAAEA,EAAEN,OAAO,EAAES,EAAEd,GAAGe,kBAAkB,KAAK,IAAIC,EAAE,EAAE,GAAGF,EAAE,IAAI,IAAIG,EAAE,EAAEA,EAAEH,EAAET,OAAO,EAAEY,IAAI,CAAC,MAAMC,EAAEJ,EAAEG,EAAE,GAAGH,EAAEG,GAAGC,EAAEF,IAAIA,EAAEE,EAAE,MAAMF,EAAEZ,EAAE,MAAMe,EAAEC,KAAKC,MAAM,IAAIL,GAAG,GAAG,MAAMM,GAAGA,EAAEjB,OAAO,EAAEc,KAAKG,EAAE,IAAId,YAAYS,EAAE,EAAEE,KAAK,IAAI,IAAIF,EAAE,EAAEA,EAAE,EAAEE,EAAEF,IAAIK,EAAEL,GAAG,EAAE,IAAIM,EAAE,EAAE,MAAMC,IAAIV,KAAKH,EAAEc,EAAED,EAAEX,EAAET,EAAE,IAAIsB,EAAER,EAAEd,GAAG,MAAMuB,EAAE,IAAInB,YAAYK,GAAGe,EAAE,KAAK,IAAIC,EAAE,IAAIpB,EAAEW,KAAKU,KAAK,EAAEF,EAAEA,GAAGnB,EAAEA,GAAGA,GAAG,EAAEA,IAAIgB,EAAEM,EAAE,EAAEC,EAAElB,EAAEA,EAAE,GAAGW,EAAE,IAAI,IAAIR,EAAE,EAAEA,EAAEQ,EAAER,IAAI,CAAC,GAAGA,IAAIY,EAAE,CAAC,MAAMX,EAAE,EAAEK,EAAEN,EAAE,GAAGC,EAAEU,EAAER,KAAKa,KAAKf,GAAG,EAAEA,GAAGD,GAAGR,EAAE,OAAO,KAAKoB,GAAG,CAAC,CAAC,GAAGZ,IAAIe,EAAE,CAAC,IAAI,IAAIf,EAAE,EAAEA,EAAE,EAAEE,EAAEF,IAAIK,EAAEL,GAAG,EAAE,GAAGN,EAAE,IAAI,IAAIM,EAAEH,EAAEiB,EAAE,GAAGd,EAAEH,EAAEiB,GAAGd,IAAIU,EAAEV,GAAGS,EAAEf,EAAEM,IAAIe,EAAElB,IAAIiB,EAAE,CAAC,MAAMb,EAAEM,EAAEb,EAAEM,GAAGA,EAAEiB,EAAEhB,EAAEnB,EAAED,EAAEqC,EAAE5B,EAAE2B,EAAEnC,GAAG,IAAIqC,EAAEtC,EAAEqB,EAAEnB,EAAEuB,EAAE,KAAK,IAAID,EAAE,EAAEc,EAAE,IAAI,CAAC,GAAGd,EAAE,EAAEc,KAAKtC,EAAE,CAAC,MAAMmB,EAAEK,EAAE,EAAEc,EAAE,GAAG,EAAE,GAAGC,EAAE9B,EAAE2B,EAAEjB,EAAElB,EAAEA,GAAG,CAACC,EAAE0B,EAAET,GAAG,KAAK,CAAC,CAACmB,IAAIA,GAAGjB,IAAIiB,GAAGjB,EAAE,CAACnB,IAAIuB,IAAID,EAAE,EAAEc,GAAGtC,EAAEwB,EAAE,EAAEc,EAAE,GAAGlB,EAAE,EAAEK,KAAKG,EAAER,GAAGlB,CAAC,CAAC,GAAG,IAAIS,GAAG,EAAEc,EAAEnB,EAAEK,EAAE,OAAO,KAAK,GAAGe,EAAE,CAAC,IAAI,IAAIP,EAAEH,EAAEiB,EAAE,GAAGd,EAAEU,EAAEtB,OAAOY,IAAIU,EAAEV,GAAGS,EAAEf,EAAEM,IAAIS,EAAEQ,EAAEP,EAAE,CAAC,MAAMW,EAAErC,EAAE,IAAIC,MAAMqB,GAAG,IAAIf,YAAYe,EAAExB,GAAGwB,EAAE,EAAE,IAAI,IAAIN,EAAE,EAAEA,EAAEQ,EAAER,IAAI,GAAGS,EAAET,KAAKM,EAAE,CAACa,EAAE7B,GAAGiB,EAAEb,EAAEM,GAAGA,GAAGlB,EAAEuC,EAAEf,EAAExB,EAAEA,GAAGwB,GAAG,CAAC,GAAGZ,IAAIa,EAAE,CAAC,MAAMP,EAAE,IAAIT,YAAYK,GAAG,IAAI,IAAIK,EAAE,EAAEA,EAAED,EAAEZ,OAAOa,IAAID,EAAEC,GAAGQ,EAAEf,EAAEO,IAAIQ,EAAEQ,EAAEjB,EAAE,CAAC,MAAM,CAACsB,OAAOrC,MAAMC,QAAQmC,GAAGA,EAAEA,EAAEC,OAAOC,QAAQd,EAAEe,YAAYlB,EAAE,CAAC,SAASc,EAAEpB,EAAEC,EAAEgB,EAAEpC,GAAG,IAAI,IAAIuC,EAAE,EAAEA,EAAEvC,EAAEuC,IAAI,GAAGpB,EAAEC,EAAEmB,KAAKpB,EAAEiB,EAAEG,GAAG,OAAO,EAAE,OAAO,CAAC,CAAC,SAASD,EAAEnB,EAAEC,EAAEgB,EAAEpC,EAAEuC,GAAG,IAAI,IAAID,EAAE,EAAEA,EAAEC,EAAED,IAAIF,EAAEpC,EAAEsC,GAAGnB,EAAEC,EAAEkB,EAAE,CAAC,SAASD,EAAElB,EAAEC,EAAEgB,GAAG,IAAIpC,EAAE,EAAE,IAAI,IAAIuC,EAAE,EAAEA,EAAEH,EAAEG,IAAIvC,EAAEmB,EAAEC,EAAEmB,GAAGvC,EAAE,EAAEA,EAAEA,GAAGA,GAAG,KAAKA,IAAI,GAAG,EAAE,OAAOA,IAAI,CAAC,CAAC,IAAIwB,EAAE,Y"}