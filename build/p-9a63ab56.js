import{av as t,hJ as e,hK as n,aV as s,u as r,hL as a,fE as l,bt as o,hM as i,hN as u,hO as f,hP as c}from"./p-3013819f.js";import{c as m,B as h}from"./p-c1b8730f.js";let d=null;const b=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;function p(t,e,n){return t.x<0?t.x+=e:t.x>n&&(t.x-=e),t}function M(r,a,l,o){const i=n(l)?s(l):null,u=i?Math.round((i.valid[1]-i.valid[0])/a.scale[0]):null;return r.map((n=>{const s=new t(n.geometry);return e(a,s,s,s.hasZ,s.hasM),n.geometry=i?p(s,u??0,o[0]):s,n}))}function w(t,e=18,n,s,a){const l=new Float64Array(s*a);e=Math.round(r(e));let o=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY;const c=i(n);for(const{geometry:n,attributes:r}of t){const{x:t,y:i}=n,m=Math.max(0,t-e),h=Math.max(0,i-e),d=Math.min(a,i+e),b=Math.min(s,t+e),p=+c(r);for(let n=h;n<d;n++)for(let r=m;r<b;r++){const a=n*s+r,c=u(r-t,n-i,e)*p,m=l[a]+=c;o=Math.min(o,m),f=Math.max(f,m)}}return{min:o,max:f}}function y(t){const e=b.exec(t);if(!e)return null;const{hh:n,mm:s,ss:r,ms:l}=e.groups;return Number(n)*a.hours+Number(s)*a.minutes+Number(r)*a.seconds+Number(l||0)}async function N(t,e,n=!0){if(!e)return[];const{field:s,field2:r,field3:a,fieldDelimiter:i,fieldInfos:u,timeZone:b}=t,p=s&&u?.find((t=>t.name.toLowerCase()===s.toLowerCase())),M=!!p&&f(p),w=!!p&&c(p),N=t.valueExpression,$=t.normalizationType,g=t.normalizationField,x=t.normalizationTotal,F=[],j=t.viewInfoParams;let v=null,D=null;if(N){if(!d){const{arcadeUtils:t}=await l();d=t}d.hasGeometryOperations(N)&&await d.enableGeometryOperations(),v=d.createFunction(N),D=j?d.getViewInfo({viewingMode:j.viewingMode,scale:j.scale,spatialReference:new o(j.spatialReference)}):null}const A=t.fieldInfos,C=!(e[0]&&"declaredClass"in e[0]&&"esri.Graphic"===e[0].declaredClass)&&A?{fields:A}:null;return e.forEach((t=>{const e=t.attributes;let l;if(N){const e=C?{...t,layer:C}:t,n=d.createExecContext(e,D,b);l=d.executeFunction(v,n)}else e&&(l=e[s],r?(l=`${m(l)}${i}${m(e[r])}`,a&&(l=`${l}${i}${m(e[a])}`)):"string"==typeof l&&n&&(w?l=l?new Date(l).getTime():null:M&&(l=l?y(l):null)));if($&&"number"==typeof l&&isFinite(l)){const t=e&&parseFloat(e[g]);l=h(l,$,t,x)}F.push(l)})),F}export{N as b,M as j,y as w,w as x};
//# sourceMappingURL=p-9a63ab56.js.map