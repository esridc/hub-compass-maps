{"version":3,"names":["f","e","o","c","m","pixelType","l","t","FLOAT","UNSIGNED_BYTE","_","pixels","length","getAsRGBAFloat","getAsRGBA","g","capabilities","textureFloat","textureFloatLinear","p","u","width","height","internalFormat","n","RGBA32F","r","RGBA","samplingMode","a","NEAREST","LINEAR","dataType","wrapMode","i","CLAMP_TO_EDGE","s","spacing","offsets","coefficients","size","Float32Array","u_flipY","u_applyTransform","u_opacity","u_transformSpacing","u_transformGridSize","u_targetImageSize","u_srcImageSize","u_colormapOffset","u_colormapMaxIndex","u_scale","u_offset","u_bandCount","bandCount","u_minOutput","outMin","u_maxOutput","outMax","u_minCutOff","minCutOff","u_maxCutOff","maxCutOff","u_factor","factor","u_useGamma","useGamma","u_gamma","gamma","u_gammaCorrection","gammaCorrection","A","u_hillshadeType","hillshadeType","u_sinZcosAs","sinZcosAs","u_sinZsinAs","sinZsinAs","u_cosZs","cosZs","u_weights","weights","u_minValue","minValue","u_maxValue","maxValue","T","gl","glName","Map","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","set","name","location","getUniformLocation","info","h","Object","keys","forEach","get","E","O","some","setUniform1i","bindTexture","type","setUniform1fv","setUniform1f","FLOAT_VEC2","setUniform2fv","FLOAT_VEC3","setUniform3fv","FLOAT_VEC4","setUniform4fv","FLOAT_MAT3","setUniformMatrix3fv","FLOAT_MAT4","setUniformMatrix4fv","INT","setUniform1iv","BOOL","INT_VEC2","BOOL_VEC2","setUniform2iv","INT_VEC3","BOOL_VEC3","setUniform3iv","INT_VEC4","BOOL_VEC4","setUniform4iv"],"sources":["./node_modules/@arcgis/core/views/webgl/rasterUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{ZEROS as e}from\"../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{PixelType as t,SizedPixelFormat as n,PixelFormat as r,TextureSamplingMode as a,TextureWrapMode as i,UniformType as o}from\"./enums.js\";import{Texture as s}from\"./Texture.js\";import{TextureDescriptor as u}from\"./TextureDescriptor.js\";function f(e,o,f=\"nearest\",c=!1){const m=!(c&&\"u8\"===o.pixelType),l=m?t.FLOAT:t.UNSIGNED_BYTE,_=null==o.pixels||0===o.pixels.length?null:m?o.getAsRGBAFloat():o.getAsRGBA(),g=e.capabilities.textureFloat?.textureFloatLinear,p=new u;return p.width=o.width,p.height=o.height,p.internalFormat=m?n.RGBA32F:r.RGBA,p.samplingMode=!g||\"bilinear\"!==f&&\"cubic\"!==f?a.NEAREST:a.LINEAR,p.dataType=l,p.wrapMode=i.CLAMP_TO_EDGE,new s(e,p,_)}function c(e,r){const{spacing:o,offsets:f,coefficients:c,size:[m,l]}=r,_=o[0]>1,g=new u;g.width=_?4*m:m,g.height=l,g.internalFormat=n.RGBA32F,g.dataType=t.FLOAT,g.samplingMode=a.NEAREST,g.wrapMode=i.CLAMP_TO_EDGE;const p=new Float32Array(_?m*l*16:2*f.length);if(_&&null!=c)for(let t=0,n=0;t<c.length;t++)p[n++]=c[t],t%3==2&&(p[n++]=1);else for(let t=0;t<l;t++)for(let e=0;e<m;e++){const n=4*(t*m+e),r=2*(e*l+t);p[n]=f[r],p[n+1]=f[r+1],p[n+3]=-1===f[r]?0:1}return new s(e,g,p)}function m(e,t){const n=new u;return n.internalFormat=r.RGBA,n.width=t.length/4,n.height=1,n.samplingMode=a.NEAREST,n.wrapMode=i.CLAMP_TO_EDGE,new s(e,n,t)}function l(t,n,r,a=1,i=!0){return{u_flipY:i,u_applyTransform:!!t,u_opacity:a,u_transformSpacing:t?t.spacing:e,u_transformGridSize:t?t.size:e,u_targetImageSize:n,u_srcImageSize:r}}function _(e,t){return{u_colormapOffset:t||0,u_colormapMaxIndex:e?e.length/4-1:0}}function g(e,t){return{u_scale:e,u_offset:t}}function p(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function A(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function T(e,t){const n=e.gl,r=t.glName,a=new Map;if(null==r)return a;const i=n.getProgramParameter(r,n.ACTIVE_UNIFORMS);let o;for(let s=0;s<i;s++)o=n.getActiveUniform(r,s),o&&a.set(o.name,{location:n.getUniformLocation(r,o.name),info:o});return a}function h(e,t,n){Object.keys(n).forEach((r=>{const a=t.get(r)||t.get(r+\"[0]\");a&&E(e,r,n[r],a)}))}function O(e,t,n,r){n.length===r.length&&(r.some((e=>null==e))||n.some((e=>null==e))||n.forEach(((n,a)=>{t.setUniform1i(n,a),e.bindTexture(r[a],a)})))}function E(e,t,n,r){if(null===r||null==n)return!1;const{info:a}=r;switch(a.type){case o.FLOAT:a.size>1?e.setUniform1fv(t,n):e.setUniform1f(t,n);break;case o.FLOAT_VEC2:e.setUniform2fv(t,n);break;case o.FLOAT_VEC3:e.setUniform3fv(t,n);break;case o.FLOAT_VEC4:e.setUniform4fv(t,n);break;case o.FLOAT_MAT3:e.setUniformMatrix3fv(t,n);break;case o.FLOAT_MAT4:e.setUniformMatrix4fv(t,n);break;case o.INT:a.size>1?e.setUniform1iv(t,n):e.setUniform1i(t,n);break;case o.BOOL:e.setUniform1i(t,n?1:0);break;case o.INT_VEC2:case o.BOOL_VEC2:e.setUniform2iv(t,n);break;case o.INT_VEC3:case o.BOOL_VEC3:e.setUniform3iv(t,n);break;case o.INT_VEC4:case o.BOOL_VEC4:e.setUniform4iv(t,n);break;default:return!1}return!0}export{m as createColormapTexture,f as createRasterTexture,c as createTransformTexture,g as getBasicGridUniforms,_ as getColormapUniforms,l as getCommonUniforms,A as getShadedReliefUniforms,p as getStretchUniforms,T as getUniformLocationInfos,O as setTextures,h as setUniforms};\n"],"mappings":"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"}