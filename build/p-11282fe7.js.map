{"version":3,"names":["async","p","t","e","a","geometry","s","n","attributes","type","transformFieldRoles","origin","d","spatialReference","c","transform","vertexSpace","m","f","g","b","isGeographic","R","l","y","i","u","I","o","originX","x","originY","originZ","z","translation","scale","rotation","r","translationX","translationY","translationZ","scaleX","scaleY","scaleZ","rotationX","rotationY","rotationZ","rotationDeg","toJSON","Promise","all","addAttachments","map","updateAttachments","deleteAttachments","length","adds","updates","deletes","feature","attachment","globalId","name","contentType","data","uploadId","parentGlobalId","globalIdField","mediaType","File","objectId","objectIdField","getAttribute","assetMaps","addResults","success","getLogger","error","updateResults","attachments","addFeatureResults","updateFeatureResults","deleteFeatureResults","deleteResults","addAttachmentResults","updateAttachmentResults","deleteAttachmentResults","editMoment","code","description","original","current","h","details","raw","extendedCode","D","originalAndCurrentFeatures","none","P","Set","$","Started","Publishing","Stopped","V","constructor","super","arguments","this","refresh","load","sourceJSON","editingInfo","lastEditDate","dataChanged","_fetchService","extent","_ongoingAssetUploads","Map","layer","then","setUserPrivileges","serviceItemId","_ensureLatestMetadata","addResolvingPromise","resolve","queryTask","capabilities","parsedUrl","dynamicDataSource","infoFor3D","gdbVersion","fieldsIndex","has","query","supportsFormatPBF","operations","supportsQueryAttachments","j","url","path","pbfSupported","sourceSpatialReference","queryAttachmentsSupported","v","_getLayerRequestOptions","_getFormDataForAttachment","body","E","addAttachmentResult","_createAttachmentErrorResult","attachmentId","updateAttachmentResult","globalIdUsed","_uploadMeshesAndGetAssetMapEditsJSON","addFeatures","O","filter","updateFeatures","deleteFeatures","M","editing","supportsAsyncApplyEdits","w","S","rollbackOnFailure","rollbackOnFailureEnabled","useGlobalIds","returnEditMoment","usePreviousEditMoment","J","q","k","L","historicMoment","returnServiceEditsOption","edits","JSON","stringify","id","layerId","returnServiceEditsInSourceSR","join","method","authMode","sessionId","Q","F","_","_asyncApplyEdits","A","supportsEditing","effectiveCapabilities","findCredential","refreshToken","_createEditsResult","attachmentIds","fetchRecomputedExtents","signal","returnUpdates","fullExtent","timeExtent","fromJSON","start","end","executeAttachmentQuery","execute","_createRequestQueryOptions","outStatistics","features","forEach","outStatisticFieldName","toLowerCase","executeJSON","executeForIds","executeForCount","executeForExtent","executeRelationshipQuery","executeRelationshipQueryForCount","executeTopFeaturesQuery","executeForTopIds","executeForTopExtents","executeForTopCount","status","uploadAssets","import","ongoingUploads","statusUrl","responseType","resultUrl","G","customParameters","token","apiKey","datesInUnknownTimezone","timeReferenceUnknownClient","returnAdvancedSymbols","cacheBust","_ts","Date","now","_patchServiceJSON","geometryType","drawingInfo","renderer","defaultSymbol","xmin","ymin","xmax","ymax","userHasUpdateItemPrivileges","cacheMaxAge","addAssetFeatures","_filterRedundantAssetMaps","Array","push","set","addExternalSources","metadata","externalSources","items","_getAssetMapEditsJSON","getExternalSourcesOnService","source","find","parts","assetName","assetHash","partHash","flags","isArray","editedFeatures","editedFeatureResults","C","messages","message","httpStatus","messageCode","FormData","elements","append","T","assetMapFieldRoles","U","where","outFields","returnGeometry","N","flatMap","some","every","prototype","constructOnly","readOnly","H"],"sources":["./node_modules/@arcgis/core/layers/graphics/applyEditsUtils.js","./node_modules/@arcgis/core/layers/graphics/sources/FeatureLayerSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport t from\"../../Graphic.js\";import e from\"../../core/Error.js\";import a from\"../../core/Logger.js\";import{getMetersPerCartesianUnitForSR as r}from\"../../core/unitUtils.js\";import{parseData as s}from\"../../core/urlUtils.js\";import{projectWithoutEngine as o}from\"../../geometry/projection.js\";import{fromJSON as n}from\"../../geometry/support/jsonUtils.js\";import{equals as l,isWGS84 as i,isWebMercator as u}from\"../../geometry/support/spatialReferenceUtils.js\";import{isFeatureIdentifierArrayWithGlobalId as d,isFeatureIdentifierArrayWithObjectId as c}from\"./editingSupport.js\";async function p(t,e,a){const{geometry:s}=e,n={...e.attributes};if(null!=a&&\"mesh\"===s?.type){const{transformFieldRoles:e}=a,{origin:d,spatialReference:c,transform:p,vertexSpace:m}=s,f=\"local\"===m.type,g=t.spatialReference,b=g.isGeographic,R=l(g,c),y=R||i(g)&&(i(c)||u(c));if(!(f&&b&&y||!f&&!b&&R))return null;const I=o(d,c,g);if(null==I)return null;if(n[e.originX]=I.x,n[e.originY]=I.y,n[e.originZ]=I.z??0,null!=p){const{translation:t,scale:a,rotation:s}=p,o=f?1:r(c)/r(g);n[e.translationX]=t[0]*o,n[e.translationY]=t[2]*o,n[e.translationZ]=-t[1]*o,n[e.scaleX]=a[0],n[e.scaleY]=a[2],n[e.scaleZ]=a[1],n[e.rotationX]=s[0],n[e.rotationY]=s[2],n[e.rotationZ]=-s[1],n[e.rotationDeg]=s[3]}return{attributes:n}}return null==s?{attributes:n}:\"mesh\"===s.type||\"extent\"===s.type?null:{geometry:s.toJSON(),attributes:n}}async function m(t,e){const a=await Promise.all((e.addAttachments??[]).map((e=>f(t,e)))),r=await Promise.all((e.updateAttachments??[]).map((e=>f(t,e)))),s=e.deleteAttachments??[];return a.length||r.length||s.length?{adds:a,updates:r,deletes:[...s]}:null}async function f(t,e){const{feature:a,attachment:r}=e,{globalId:o,name:n,contentType:l,data:i,uploadId:u}=r,d={globalId:o};if(a&&(\"attributes\"in a?d.parentGlobalId=a.attributes?.[t.globalIdField]:a.globalId&&(d.parentGlobalId=a.globalId)),u)d.uploadId=u;else if(i){const t=await s(i);t&&(d.contentType=t.mediaType,d.data=t.data),i instanceof File&&(d.name=i.name)}return n&&(d.name=n),l&&(d.contentType=l),d}function g(t,e,a){if(!e||0===e.length)return[];if(a&&d(e))return e.map((t=>t.globalId));if(c(e))return e.map((t=>t.objectId));const r=a?t.globalIdField:t.objectIdField;return r?e.map((t=>t.getAttribute(r))):[]}function b(t){const e=t?.assetMaps;if(e){for(const t of e.addResults)t.success||a.getLogger(\"esri.layers.graphics.sources.support.sourceUtils\").error(`Failed to map asset to feature with globalId ${t.globalId}.`);for(const t of e.updateResults)t.success||a.getLogger(\"esri.layers.graphics.sources.support.sourceUtils\").error(`Failed to map asset to feature with globalId ${t.globalId}.`)}const r=t?.attachments,s={addFeatureResults:t?.addResults?.map(R)??[],updateFeatureResults:t?.updateResults?.map(R)??[],deleteFeatureResults:t?.deleteResults?.map(R)??[],addAttachmentResults:r?.addResults?r.addResults.map(R):[],updateAttachmentResults:r?.updateResults?r.updateResults.map(R):[],deleteAttachmentResults:r?.deleteResults?r.deleteResults.map(R):[]};return t?.editMoment&&(s.editMoment=t.editMoment),s}function R(t){const a=!0===t.success?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:a?new e(\"feature-layer-source:edit-failure\",a.description,{code:a.code}):null}}function y(e,a){return new t({attributes:e.attributes,geometry:n({...e.geometry,spatialReference:a})})}function I(t,e){return{adds:t?.adds?.map((t=>y(t,e)))||[],updates:t?.updates?.map((t=>({original:y(t[0],e),current:y(t[1],e)})))||[],deletes:t?.deletes?.map((t=>y(t,e)))||[],spatialReference:e}}function h(t){const e=t.details.raw,a=+e.code,r=+e.extendedCode;return 500===a&&(-2147217144===r||-2147467261===r)}export{I as createEditedFeatures,R as createFeatureEditResult,m as getAttachmentEditsJSON,g as getFeatureIds,p as getFeatureJSON,h as isProtectedOrPrivateVersionError,b as unpackEditResultData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import{id as t}from\"../../../kernel.js\";import s from\"../../../request.js\";import r from\"../../../TimeExtent.js\";import{isSome as a}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Error.js\";import has from\"../../../core/has.js\";import{JSONMap as o}from\"../../../core/jsonMap.js\";import n from\"../../../core/Loadable.js\";import u from\"../../../core/Logger.js\";import{setDeepValue as l}from\"../../../core/object.js\";import{debounce as c,after as d,throwIfAbortError as p}from\"../../../core/promiseUtils.js\";import{join as y}from\"../../../core/urlUtils.js\";import{generateBracedUUID as h}from\"../../../core/uuid.js\";import{property as m}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as f}from\"../../../core/accessorSupport/decorators/subclass.js\";import g from\"../../../geometry/Extent.js\";import{isRelativeVertexSpace as w,toRelativeVertexSpace as S}from\"../../../geometry/support/meshVertexSpaceUtils.js\";import{isOriginalExternal as q}from\"../../../geometry/support/meshUtils/External.js\";import{createFeatureEditResult as E,getFeatureJSON as O,getFeatureIds as R,getAttachmentEditsJSON as b,isProtectedOrPrivateVersionError as A,unpackEditResultData as F,createEditedFeatures as _}from\"../applyEditsUtils.js\";import{createDrawingInfo as x}from\"./support/clientSideDefaults.js\";import j from\"./support/QueryTask.js\";import{isHostedAgolService as I}from\"../../support/arcgisLayerUrl.js\";import{ensureLayerCredential as v}from\"../../support/featureLayerUtils.js\";import{getAssetMapTable as T}from\"../../support/infoFor3D.js\";import{executeQueryJSON as N}from\"../../../rest/query/executeQueryJSON.js\";import{unapplyEditsZUnitScaling as M}from\"../../../rest/query/operations/editsZScale.js\";import U from\"../../../rest/support/Query.js\";import{isSafeToEditVersion as J,isVersionInEditSession as k,isHistoricVersion as L,currentSessionId as Q}from\"../../../versionManagement/support/versionManagementUtils.js\";import C from\"../../../geometry/SpatialReference.js\";const D=new o({originalAndCurrentFeatures:\"original-and-current-features\",none:\"none\"}),P=new Set([\"Feature Layer\",\"Oriented Imagery Layer\",\"Table\",\"Catalog Layer\"]),$=new o({Started:\"published\",Publishing:\"publishing\",Stopped:\"unavailable\"});let V=class extends n{constructor(){super(...arguments),this.type=\"feature-layer\",this.refresh=c((async()=>{await this.load();const e=this.sourceJSON.editingInfo?.lastEditDate;if(null==e)return{dataChanged:!0,updates:{}};try{await this._fetchService(null)}catch{return{dataChanged:!0,updates:{}}}const t=e!==this.sourceJSON.editingInfo?.lastEditDate;return{dataChanged:t,updates:t?{editingInfo:this.sourceJSON.editingInfo,extent:this.sourceJSON.extent}:null}})),this._ongoingAssetUploads=new Map}load(e){const t=this.layer.sourceJSON,s=this._fetchService(t,{...e}).then((()=>this.layer.setUserPrivileges(this.sourceJSON.serviceItemId,e))).then((()=>this._ensureLatestMetadata(e)));return this.addResolvingPromise(s),Promise.resolve(this)}get queryTask(){const{capabilities:e,parsedUrl:t,dynamicDataSource:s,infoFor3D:r,gdbVersion:a,spatialReference:i,fieldsIndex:o}=this.layer,n=has(\"featurelayer-pbf\")&&e?.query.supportsFormatPBF&&null==r,u=e?.operations?.supportsQueryAttachments??!1;return new j({url:t.path,pbfSupported:n,fieldsIndex:o,infoFor3D:r,dynamicDataSource:s,gdbVersion:a,sourceSpatialReference:i,queryAttachmentsSupported:u})}async addAttachment(e,t){await this.load();const{layer:r}=this;await v(r,\"editing\");const a=e.attributes[r.objectIdField],i=r.parsedUrl.path+\"/\"+a+\"/addAttachment\",o=this._getLayerRequestOptions(),n=this._getFormDataForAttachment(t,o.query);try{const e=await s(i,{body:n});return E(e.data.addAttachmentResult)}catch(u){throw this._createAttachmentErrorResult(a,u)}}async updateAttachment(e,t,r){await this.load();const{layer:a}=this;await v(a,\"editing\");const i=e.attributes[a.objectIdField],o=a.parsedUrl.path+\"/\"+i+\"/updateAttachment\",n=this._getLayerRequestOptions({query:{attachmentId:t}}),u=this._getFormDataForAttachment(r,n.query);try{const e=await s(o,{body:u});return E(e.data.updateAttachmentResult)}catch(l){throw this._createAttachmentErrorResult(i,l)}}async applyEdits(e,r){await this.load();const{layer:o}=this;await v(o,\"editing\");const n=o.infoFor3D,u=null!=n,l=u||(r?.globalIdUsed??!1),c=u?await this._uploadMeshesAndGetAssetMapEditsJSON(e):null,d=e.addFeatures?.map((e=>O(this.layer,e,n)))??[],p=(await Promise.all(d)).filter(a),y=e.updateFeatures?.map((e=>O(this.layer,e,n)))??[],h=(await Promise.all(y)).filter(a),m=R(this.layer,e.deleteFeatures,l);M(p,h,o.spatialReference);const f=await b(this.layer,e),g=o.capabilities.editing.supportsAsyncApplyEdits&&u,w=r?.gdbVersion||o.gdbVersion,S={gdbVersion:w,rollbackOnFailure:r?.rollbackOnFailureEnabled,useGlobalIds:l,returnEditMoment:r?.returnEditMoment,usePreviousEditMoment:r?.usePreviousEditMoment,async:g};await J(this.layer.url,w,!0);const q=k(this.layer.url,w||null);if(await L(o.url,w,o.historicMoment))throw new i(\"feature-layer-source:historic-version\",\"Editing a historic version is not allowed\");r?.returnServiceEditsOption?(S.edits=JSON.stringify([{id:o.layerId,adds:p,updates:h,deletes:m,attachments:f,assetMaps:c}]),S.returnServiceEditsOption=D.toJSON(r?.returnServiceEditsOption),S.returnServiceEditsInSourceSR=r?.returnServiceEditsInSourceSR):(S.adds=p.length?JSON.stringify(p):null,S.updates=h.length?JSON.stringify(h):null,S.deletes=m.length?l?JSON.stringify(m):m.join(\",\"):null,S.attachments=f&&JSON.stringify(f),S.assetMaps=null!=c?JSON.stringify(c):void 0);const E=this._getLayerRequestOptions({method:\"post\",query:S});q&&(E.authMode=\"immediate\",E.query.returnEditMoment=!0,E.query.sessionId=Q);const F=r?.returnServiceEditsOption?o.url:o.parsedUrl.path;let _;try{_=g?await this._asyncApplyEdits(F+\"/applyEdits\",E):await s(F+\"/applyEdits\",E)}catch(x){if(!A(x))throw x;E.authMode=\"immediate\",_=g?await this._asyncApplyEdits(F+\"/applyEdits\",E):await s(F+\"/applyEdits\",E)}if(!o.capabilities.operations?.supportsEditing&&o.effectiveCapabilities?.operations?.supportsEditing){const e=t?.findCredential(o.url);await(e?.refreshToken())}return this._createEditsResult(_)}async deleteAttachments(e,t){await this.load();const{layer:r}=this;await v(r,\"editing\");const a=e.attributes[r.objectIdField],i=r.parsedUrl.path+\"/\"+a+\"/deleteAttachments\";try{return(await s(i,this._getLayerRequestOptions({query:{attachmentIds:t.join(\",\")},method:\"post\"}))).data.deleteAttachmentResults.map(E)}catch(o){throw this._createAttachmentErrorResult(a,o)}}fetchRecomputedExtents(e={}){const t=e.signal;return this.load({signal:t}).then((async()=>{const t=this._getLayerRequestOptions({...e,query:{returnUpdates:!0}}),{layerId:a,url:i}=this.layer,{data:o}=await s(`${i}/${a}`,t),{id:n,extent:u,fullExtent:l,timeExtent:c}=o,d=u||l;return{id:n,fullExtent:d&&g.fromJSON(d),timeExtent:c&&r.fromJSON({start:c[0],end:c[1]})}}))}async queryAttachments(e,t={}){await this.load();const s=this._getLayerRequestOptions(t);return this.queryTask.executeAttachmentQuery(e,s)}async queryFeatures(e,t){await this.load();const s=await this.queryTask.execute(e,{...t,query:this._createRequestQueryOptions(t)});return e.outStatistics?.length&&s.features.length&&s.features.forEach((t=>{const s=t.attributes;e.outStatistics?.forEach((({outStatisticFieldName:e})=>{if(e){const t=e.toLowerCase();t&&t in s&&e!==t&&(s[e]=s[t],delete s[t])}}))})),s}async queryFeaturesJSON(e,t){return await this.load(),this.queryTask.executeJSON(e,{...t,query:this._createRequestQueryOptions(t)})}async queryObjectIds(e,t){return await this.load(),this.queryTask.executeForIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeatureCount(e,t){return await this.load(),this.queryTask.executeForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryExtent(e,t){return await this.load(),this.queryTask.executeForExtent(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeatures(e,t){return await this.load(),this.queryTask.executeRelationshipQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeaturesCount(e,t){return await this.load(),this.queryTask.executeRelationshipQueryForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopFeatures(e,t){return await this.load(),this.queryTask.executeTopFeaturesQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopObjectIds(e,t){return await this.load(),this.queryTask.executeForTopIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopExtents(e,t){return await this.load(),this.queryTask.executeForTopExtents(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopCount(e,t){return await this.load(),this.queryTask.executeForTopCount(e,{...t,query:this._createRequestQueryOptions(t)})}async fetchPublishingStatus(){if(!I(this.layer.url))return\"unavailable\";const e=y(this.layer.url,\"status\"),t=await s(e,{query:{f:\"json\"}});return $.fromJSON(t.data.status)}async uploadAssets(e,t){const{uploadAssets:s}=await import(\"./support/uploadAssets.js\");return s(e,{layer:this.layer,ongoingUploads:this._ongoingAssetUploads},t)}async _asyncApplyEdits(e,t){const r=(await s(e,t)).data.statusUrl;for(;;){const e=(await s(r,{query:{f:\"json\"},responseType:\"json\"})).data;switch(e.status){case\"Completed\":return s(e.resultUrl,{query:{f:\"json\"},responseType:\"json\"});case\"CompletedWithErrors\":throw new i(\"async-applyEdits-failed\",\"asynchronous applyEdits call failed.\");case\"Failed ImportChanges\":case\"InProgress\":case\"Pending\":case\"ExportAttachments\":case\"ExportChanges\":case\"ExportingData\":case\"ExportingSnapshot\":case\"ImportAttachments\":case\"ProvisioningReplica\":case\"UnRegisteringReplica\":break;default:throw new i(\"async-applyEdits-failed\",\"asynchronous applyEdits call failed (undefined response status)\")}await d(G)}}_createRequestQueryOptions(e){const t={...this.layer.customParameters,token:this.layer.apiKey,...e?.query};return this.layer.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t}async _fetchService(e,t){if(!e){const r={};has(\"featurelayer-advanced-symbols\")&&(r.returnAdvancedSymbols=!0),t?.cacheBust&&(r._ts=Date.now());const{data:a}=await s(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:r,signal:t?.signal}));e=a}this.sourceJSON=await this._patchServiceJSON(e,t?.signal);const r=e.type;if(!P.has(r))throw new i(\"feature-layer-source:unsupported-type\",`Source type \"${r}\" is not supported`)}async _patchServiceJSON(e,t){if(\"Table\"!==e.type&&e.geometryType&&!e?.drawingInfo?.renderer&&!e.defaultSymbol){const t=x(e.geometryType).renderer;l(\"drawingInfo.renderer\",t,e)}if(\"esriGeometryMultiPatch\"===e.geometryType&&e.infoFor3D&&(e.geometryType=\"mesh\"),null==e.extent)try{const{data:r}=await s(this.layer.url,this._getLayerRequestOptions({signal:t}));r.spatialReference&&(e.extent={xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:r.spatialReference})}catch(r){p(r)}return e}async _ensureLatestMetadata(e){if(this.layer.userHasUpdateItemPrivileges&&this.sourceJSON.cacheMaxAge>0)return this._fetchService(null,{...e,cacheBust:!0})}async _uploadMeshesAndGetAssetMapEditsJSON(e){const{addAssetFeatures:t}=e;if(!t?.length)return null;const s=await this._filterRedundantAssetMaps(t);if(!t?.length)return null;const r=new Array,a=new Map;for(const i of s){const{geometry:e}=i,{vertexSpace:t}=e;if(w(t))r.push(e);else{const t=S(e);a.set(t,e),i.geometry=t,r.push(t)}}await this.uploadAssets(r);for(const[i,o]of a)o.addExternalSources(i.metadata.externalSources.items);return{adds:this._getAssetMapEditsJSON(s),updates:[],deletes:[]}}_getAssetMapEditsJSON(e){const t=new Array,s=this.layer.globalIdField,r=this.layer.parsedUrl;for(const a of e){const e=a.geometry,{metadata:i}=e,o=i.getExternalSourcesOnService(r),n=a.getAttribute(s);if(0===o.length){u.getLogger(this).error(`Skipping feature ${n}. The mesh it is associated with has not been uploaded to the service and cannot be mapped to it.`);continue}const{source:l}=o.find(q)??o[0];for(const s of l)1===s.parts.length?t.push({globalId:h(),parentGlobalId:n,assetName:s.assetName,assetHash:s.parts[0].partHash,flags:[]}):u.getLogger(this).error(`Skipping asset ${s.assetName}. It does not have exactly one part, so we cannot map it to a feature.`)}return t}_createEditsResult(e){const t=e.data,{layerId:s}=this.layer,r=[];let a=null;if(Array.isArray(t))for(const o of t)r.push({id:o.id,editedFeatures:o.editedFeatures}),o.id===s&&(a={addResults:o.addResults??[],updateResults:o.updateResults??[],deleteResults:o.deleteResults??[],attachments:o.attachments,editMoment:o.editMoment});else a=t;const i=F(a);if(r.length>0){i.editedFeatureResults=[];for(const e of r){const{editedFeatures:t}=e,s=t?.spatialReference?new C(t.spatialReference):null;i.editedFeatureResults.push({layerId:e.id,editedFeatures:_(t,s)})}}return i}_createAttachmentErrorResult(e,t){const s=t.details.messages?.[0]||t.message,r=t.details.httpStatus||t.details.messageCode;return{objectId:e,globalId:null,error:new i(\"feature-layer-source:attachment-failure\",s,{code:r})}}_getFormDataForAttachment(e,t){const s=e instanceof FormData?e:e&&e.elements?new FormData(e):null;if(s)for(const r in t){const e=t[r];null!=e&&(s.set?s.set(r,e):s.append(r,e))}return s}_getLayerRequestOptions(e={}){const{parsedUrl:t,gdbVersion:s,dynamicDataSource:r}=this.layer;return{...e,query:{gdbVersion:s,layer:r?JSON.stringify({source:r}):void 0,...t.query,f:\"json\",...this._createRequestQueryOptions(e)},responseType:\"json\"}}async _filterRedundantAssetMaps(e){const{layer:t}=this,{globalIdField:s,infoFor3D:r,parsedUrl:i}=t;if(null==r||null==s)return e;const o=T(r);if(null==o)return e;const n=y(i.path,`../${o.id}`),u=new Array,l=new Array;for(const a of e)a.geometry.metadata.getExternalSourcesOnService(i).length>0?l.push(a):u.push(a);const c=l.map((e=>e.getAttribute(s))).filter(a);if(0===c.length)return e;const{assetMapFieldRoles:{parentGlobalId:d,assetHash:p}}=r,h=new U;h.where=`${d} IN (${c.map((e=>`'${e}'`))})`,h.outFields=[p,d],h.returnGeometry=!1;const m=await N(n,h),{features:f}=m;return 0===f.length?e:[...u,...l.filter((e=>{const t=e.getAttribute(s);if(!t)return!0;const{metadata:r}=e.geometry,a=f.filter((e=>e.getAttribute(d)===t));if(0===a.length)return!0;const o=a.map((e=>e.getAttribute(p)));return r.getExternalSourcesOnService(i).flatMap((({source:e})=>e.flatMap((e=>e.parts.map((e=>e.partHash)))))).some((e=>o.every((t=>e!==t))))}))]}};e([m()],V.prototype,\"type\",void 0),e([m({constructOnly:!0})],V.prototype,\"layer\",void 0),e([m({readOnly:!0})],V.prototype,\"queryTask\",null),V=e([f(\"esri.layers.graphics.sources.FeatureLayerSource\")],V);const G=1e3,H=V;export{H as default};\n"],"mappings":"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"}