{"version":3,"names":["e","t","r","n","layerType","featureCollectionType","async","l","a","map","G","y","Promise","allSettled","i","status","value","add","c","ArcGISDimensionLayer","ArcGISFeatureLayer","ArcGISImageServiceLayer","ArcGISMapServiceLayer","ArcGISSceneServiceLayer","ArcGISTiledElevationServiceLayer","ArcGISTiledImageServiceLayer","ArcGISTiledMapServiceLayer","BuildingSceneLayer","CatalogLayer","CSV","DefaultTileLayer","GeoJSON","GroupLayer","IntegratedMesh3DTilesLayer","IntegratedMeshLayer","KML","LineOfSightLayer","MediaLayer","OGCFeatureLayer","OrientedImageryLayer","PointCloudLayer","RasterDataLayer","VectorTileLayer","ViewshedLayer","Voxel","WFS","WMS","WebTiledLayer","s","RasterDataElevationLayer","p","S","OpenStreetMap","u","ArcGISAnnotationLayer","ArcGISImageServiceVectorLayer","ArcGISStreamLayer","BingMapsAerial","BingMapsHybrid","BingMapsRoad","GeoRSS","KnowledgeGraphLayer","SubtypeGroupLayer","d","SubtypeGroupTable","I","m","LinkChartLayer","g","T","f","M","read","context","type","v","b","h","A","C","o","w","defaultLayerType","UnknownLayer","portal","itemId","id","load","L","className","MapNotesLayer","RouteLayer","wmtsInfo","url","layerIdentifier","WMTSLayer","wfsInfo","version","UnsupportedLayer","featureCollection","layers","length","origin","layerContainerType","Array","isArray","addMany","destroy","portalItem","when","layerId","F","forEach","tables","FeatureLayer","showLegend","ignoreDefaults","visibility","visibleLayers","includes"],"sources":["./node_modules/@arcgis/core/portal/support/featureCollectionUtils.js","./node_modules/@arcgis/core/layers/support/layersCreator.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction e(e){return t(e,\"notes\")}function r(e){return t(e,\"markup\")}function n(e){return t(e,\"route\")}function t(e,r){return!(!e.layerType||\"ArcGISFeatureLayer\"!==e.layerType)&&e.featureCollectionType===r}export{e as isMapNotesLayer,r as isMarkupLayer,n as isRouteLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Collection.js\";import\"../../core/has.js\";import{LayerLoadContext as r}from\"./LayerLoadContext.js\";import{layerLookupMap as a}from\"./lazyLayerLoader.js\";import t from\"../../portal/PortalItem.js\";import{isMapNotesLayer as y,isMarkupLayer as i,isRouteLayer as L}from\"../../portal/support/featureCollectionUtils.js\";import{selectLayerClassPath as n}from\"../../portal/support/portalLayers.js\";import{loadStyleRenderer as o}from\"../../renderers/support/styleUtils.js\";async function l(e,r,a){if(!r)return;const t=r.map((e=>G(e,a))),y=await Promise.allSettled(t);for(const i of y)\"rejected\"===i.status||i.value&&e.add(i.value)}const c={ArcGISDimensionLayer:\"DimensionLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",ArcGISTiledElevationServiceLayer:\"ElevationLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",BuildingSceneLayer:\"BuildingSceneLayer\",CatalogLayer:\"CatalogLayer\",CSV:\"CSVLayer\",DefaultTileLayer:\"TileLayer\",GeoJSON:\"GeoJSONLayer\",GroupLayer:\"GroupLayer\",IntegratedMesh3DTilesLayer:\"IntegratedMesh3DTilesLayer\",IntegratedMeshLayer:\"IntegratedMeshLayer\",KML:\"KMLLayer\",LineOfSightLayer:\"LineOfSightLayer\",MediaLayer:\"MediaLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",OrientedImageryLayer:\"OrientedImageryLayer\",PointCloudLayer:\"PointCloudLayer\",RasterDataLayer:\"UnsupportedLayer\",VectorTileLayer:\"VectorTileLayer\",ViewshedLayer:\"ViewshedLayer\",Voxel:\"VoxelLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},s={ArcGISTiledElevationServiceLayer:\"ElevationLayer\",DefaultTileLayer:\"ElevationLayer\",RasterDataElevationLayer:\"UnsupportedLayer\"},p={ArcGISFeatureLayer:\"FeatureLayer\"},S={ArcGISImageServiceLayer:\"UnsupportedLayer\",ArcGISMapServiceLayer:\"UnsupportedLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",DefaultTileLayer:\"TileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",VectorTileLayer:\"VectorTileLayer\",WMS:\"UnsupportedLayer\",WebTiledLayer:\"WebTileLayer\"},u={ArcGISAnnotationLayer:\"UnsupportedLayer\",ArcGISDimensionLayer:\"UnsupportedLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISStreamLayer:\"StreamLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",CatalogLayer:\"CatalogLayer\",CSV:\"CSVLayer\",DefaultTileLayer:\"TileLayer\",GeoJSON:\"GeoJSONLayer\",GeoRSS:\"GeoRSSLayer\",GroupLayer:\"GroupLayer\",KML:\"KMLLayer\",KnowledgeGraphLayer:\"KnowledgeGraphLayer\",MediaLayer:\"MediaLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",OrientedImageryLayer:\"OrientedImageryLayer\",SubtypeGroupLayer:\"SubtypeGroupLayer\",VectorTileLayer:\"VectorTileLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},d={ArcGISFeatureLayer:\"FeatureLayer\",SubtypeGroupTable:\"UnsupportedLayer\"},I={ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",DefaultTileLayer:\"TileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",VectorTileLayer:\"VectorTileLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},m={...u,LinkChartLayer:\"LinkChartLayer\"},g={...d},T={...I};async function G(e,r){return f(await M(e,r),e,r)}async function f(e,r,a){const t=new e;return t.read(r,a.context),\"group\"===t.type&&(\"GroupLayer\"===r.layerType?await v(t,r,a):b(r)?h(t,r,a.context):A(r)&&await C(t,r,a.context)),await o(t,a.context),t}async function M(e,o){const l=o.context,c=w(l);let s=e.layerType||e.type;!s&&o?.defaultLayerType&&(s=o.defaultLayerType);const p=c[s];let S=p?a[p]:a.UnknownLayer;if(b(e)){const y=l?.portal;if(e.itemId){const i=new t({id:e.itemId,portal:y});await i.load();const L=(await n(i,new r)).className||\"UnknownLayer\";S=a[L]}}else\"ArcGISFeatureLayer\"===s?y(e)||i(e)?S=a.MapNotesLayer:L(e)?S=a.RouteLayer:A(e)&&(S=a.GroupLayer):e.wmtsInfo?.url&&e.wmtsInfo.layerIdentifier?S=a.WMTSLayer:\"WFS\"===s&&\"2.0.0\"!==e.wfsInfo?.version&&(S=a.UnsupportedLayer);return S()}function A(e){if(\"ArcGISFeatureLayer\"!==e.layerType||b(e))return!1;return(e.featureCollection?.layers?.length??0)>1}function b(e){return\"Feature Collection\"===e.type}function w(e){let r;switch(e.origin){case\"web-scene\":switch(e.layerContainerType){case\"basemap\":r=S;break;case\"ground\":r=s;break;case\"tables\":r=p;break;default:r=c}break;case\"link-chart\":switch(e.layerContainerType){case\"basemap\":r=T;break;case\"tables\":r=g;break;default:r=m}break;default:switch(e.layerContainerType){case\"basemap\":r=I;break;case\"tables\":r=d;break;default:r=u}}return r}async function v(r,a,t){const y=new e,i=l(y,Array.isArray(a.layers)?a.layers:[],t);try{try{if(await i,\"group\"===r.type)return r.layers.addMany(y),r}catch(L){r.destroy();for(const e of y)e.destroy();throw L}}catch(L){throw L}}function h(e,r,a){r.itemId&&(e.portalItem=new t({id:r.itemId,portal:a?.portal}),e.when((()=>{const t=t=>{const y=t.layerId;F(t,e,r,y,a);const i=r.featureCollection?.layers?.[y];i&&t.read(i,a)};e.layers?.forEach(t),e.tables?.forEach(t)})))}async function C(e,r,t){const y=a.FeatureLayer,i=await y(),L=r.featureCollection,n=L?.showLegend,o=L?.layers?.map(((a,y)=>{const L=new i;L.read(a,t);const o={...t,ignoreDefaults:!0};return F(L,e,r,y,o),null!=n&&L.read({showLegend:n},o),L}));e.layers.addMany(o??[])}function F(e,r,a,t,y){e.read({id:`${r.id}-sublayer-${t}`,visibility:a.visibleLayers?.includes(t)??!0},y)}export{v as populateGroupLayer,l as populateOperationalLayers};\n"],"mappings":"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"}