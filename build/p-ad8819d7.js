import{a as e}from"./p-3013819f.js";import"./p-3b51db5e.js";function t(t,s){let r=s.responseType;r?"array-buffer"!==r&&"blob"!==r&&"json"!==r&&"native"!==r&&"native-request-init"!==r&&"text"!==r&&(r="text"):r="json",s.responseType=r;const a=s.signal;return delete s.signal,globalThis.invokeStaticMessage("request",{url:t,options:s},{signal:a}).then((async n=>{let o,i,u,l,b;if(n.data)if(n.data instanceof ArrayBuffer){if(!("json"!==r&&"text"!==r&&"blob"!==r||(o=new Blob([n.data]),"json"!==r&&"text"!==r||(l=await o.text(),"json"!==r)))){try{i=JSON.parse(l||null)}catch(r){const a={...r,url:t,requestOptions:s};throw new e("request:server",r.message,a)}if(i.error){const r={...i.error,url:t,requestOptions:s};throw new e("request:server",i.error.message,r)}}}else"native"===r&&(n.data.signal=a,u=await fetch(n.data.url,n.data),n.httpStatus=u.status);switch(r){case"blob":b=o;break;case"json":b=i;break;case"native":b=u;break;case"text":b=l;break;default:b=n.data}return{data:b,httpStatus:n.httpStatus,requestOptions:s,ssl:n.ssl,url:t}}))}export{t as execute};
//# sourceMappingURL=p-ad8819d7.js.map