import{ah as t,ai as s,dC as p,dK as i,g2 as o,g3 as r,g4 as e,an as a,ap as m}from"./p-3013819f.js";import{m as f,u as h}from"./p-4e55d8f0.js";import{t as j}from"./p-9cf72458.js";import{$ as c}from"./p-6d5c327b.js";import"./p-3b51db5e.js";import"./p-0d83e514.js";import"./p-7b13247d.js";import"./p-b362a32c.js";import"./p-8567e6fe.js";import"./p-c268fbe3.js";import"./p-17c1fa4b.js";import"./p-b6b871c6.js";import"./p-ffa11fc1.js";import"./p-808395fb.js";import"./p-30a1f911.js";import"./p-508fdb0a.js";import"./p-f1aede5a.js";import"./p-94b15954.js";import"./p-a9376829.js";import"./p-3811f238.js";import"./p-e6812c2f.js";import"./p-a925664a.js";import"./p-a897fcf8.js";import"./p-c7810a6f.js";import"./p-201cec5f.js";import"./p-89242a33.js";import"./p-7580bdba.js";import"./p-a62b18ce.js";import"./p-2d8c68ca.js";import"./p-d97e7de8.js";import"./p-595ce045.js";import"./p-10e5b6ea.js";import"./p-3b8b0ae8.js";import"./p-ec95a4fb.js";import"./p-1f0b604e.js";import"./p-347800d3.js";import"./p-72db18d5.js";import"./p-325c6878.js";import"./p-721433ed.js";import"./p-1cf43261.js";import"./p-8b1f6523.js";import"./p-4f73c6ea.js";import"./p-ffb26433.js";let n=class extends(f(h)){constructor(){super(...arguments),this._graphicsViewMap={},this._popupTemplates=new Map,this.graphicsViews=[]}async hitTest(t,s){if(!this.graphicsViews.length)return null;const p=this.layer;return this.graphicsViews.reverse().flatMap((s=>{const i=this._popupTemplates.get(s),o=s.hitTest(t);for(const t of o)t.layer=p,t.sourceLayer=p,t.popupTemplate=i;return o})).map((s=>({type:"graphic",graphic:s,layer:p,mapPoint:t})))}update(t){if(this.graphicsViews)for(const s of this.graphicsViews)s.processUpdate(t)}attach(){this.addAttachHandles([t((()=>this.layer?.featureCollections),(t=>{this._clear();for(const{popupInfo:s,featureSet:e,layerDefinition:a}of t){const t=p.fromJSON(e),m=new i(t.features),f=a.drawingInfo,h=s?o.fromJSON(s):null,n=r(f.renderer),b=new c({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:m,renderer:n,container:new j(this.view.featuresTilingScheme)});this._graphicsViewMap[t.geometryType]=b,this._popupTemplates.set(b,h),"polygon"!==t.geometryType||this.layer.polygonSymbol?"polyline"!==t.geometryType||this.layer.lineSymbol?"point"!==t.geometryType||this.layer.pointSymbol||(this.layer.pointSymbol=n.symbol):this.layer.lineSymbol=n.symbol:this.layer.polygonSymbol=n.symbol,this.graphicsViews.push(b),this.container.addChild(b.container)}}),s),t((()=>this.layer?.polygonSymbol),(t=>{this._graphicsViewMap.polygon.renderer=new e({symbol:t})}),s),t((()=>this.layer?.lineSymbol),(t=>{this._graphicsViewMap.polyline.renderer=new e({symbol:t})}),s),t((()=>this.layer?.pointSymbol),(t=>{this._graphicsViewMap.point.renderer=new e({symbol:t})}),s)])}detach(){this._clear()}moveStart(){}moveEnd(){}viewChange(){for(const t of this.graphicsViews)t.viewChange()}_clear(){this.container.removeAllChildren();for(const t of this.graphicsViews)t.destroy();this._graphicsViewMap={},this._popupTemplates.clear(),this.graphicsViews.length=0}};n=a([m("esri.views.2d.layers.GeoRSSLayerView2D")],n);const b=n;export default b;
//# sourceMappingURL=p-9cb091e7.js.map