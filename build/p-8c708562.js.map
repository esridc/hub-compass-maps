{"version":3,"names":["f","e","o","c","m","pixelType","l","t","FLOAT","UNSIGNED_BYTE","_","pixels","length","getAsRGBAFloat","getAsRGBA","g","capabilities","textureFloatLinear","p","u","width","height","internalFormat","n","RGBA32F","r","RGBA","samplingMode","a","NEAREST","LINEAR","dataType","wrapMode","i","CLAMP_TO_EDGE","s","spacing","offsets","coefficients","size","Float32Array","u_flipY","u_applyTransform","u_opacity","u_transformSpacing","u_transformGridSize","u_targetImageSize","u_srcImageSize","u_colormapOffset","u_colormapMaxIndex","u_scale","u_offset","u_bandCount","bandCount","u_minOutput","outMin","u_maxOutput","outMax","u_minCutOff","minCutOff","u_maxCutOff","maxCutOff","u_factor","factor","u_useGamma","useGamma","u_gamma","gamma","u_gammaCorrection","gammaCorrection","A","u_hillshadeType","hillshadeType","u_sinZcosAs","sinZcosAs","u_sinZsinAs","sinZsinAs","u_cosZs","cosZs","u_weights","weights","u_minValue","minValue","u_maxValue","maxValue","T","gl","glName","Map","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","set","name","location","getUniformLocation","info","h","Object","keys","forEach","get","E","O","some","setUniform1i","bindTexture","type","setUniform1fv","setUniform1f","FLOAT_VEC2","setUniform2fv","FLOAT_VEC3","setUniform3fv","FLOAT_VEC4","setUniform4fv","FLOAT_MAT3","setUniformMatrix3fv","FLOAT_MAT4","setUniformMatrix4fv","INT","setUniform1iv","BOOL","INT_VEC2","BOOL_VEC2","setUniform2iv","INT_VEC3","BOOL_VEC3","setUniform3iv","INT_VEC4","BOOL_VEC4","setUniform4iv"],"sources":["./node_modules/@arcgis/core/views/webgl/rasterUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ZEROS as e}from\"../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{PixelType as t,SizedPixelFormat as n,PixelFormat as r,TextureSamplingMode as a,TextureWrapMode as i,UniformType as o}from\"./enums.js\";import{Texture as s}from\"./Texture.js\";import{TextureDescriptor as u}from\"./TextureDescriptor.js\";function f(e,o,f=\"nearest\",c=!1){const m=!(c&&\"u8\"===o.pixelType),l=m?t.FLOAT:t.UNSIGNED_BYTE,_=null==o.pixels||0===o.pixels.length?null:m?o.getAsRGBAFloat():o.getAsRGBA(),g=e.capabilities.textureFloatLinear,p=new u;return p.width=o.width,p.height=o.height,p.internalFormat=m?n.RGBA32F:r.RGBA,p.samplingMode=!g||\"bilinear\"!==f&&\"cubic\"!==f?a.NEAREST:a.LINEAR,p.dataType=l,p.wrapMode=i.CLAMP_TO_EDGE,new s(e,p,_)}function c(e,r){const{spacing:o,offsets:f,coefficients:c,size:[m,l]}=r,_=o[0]>1,g=new u;g.width=_?4*m:m,g.height=l,g.internalFormat=n.RGBA32F,g.dataType=t.FLOAT,g.samplingMode=a.NEAREST,g.wrapMode=i.CLAMP_TO_EDGE;const p=new Float32Array(_?m*l*16:2*f.length);if(_&&null!=c)for(let t=0,n=0;t<c.length;t++)p[n++]=c[t],t%3==2&&(p[n++]=1);else for(let t=0;t<l;t++)for(let e=0;e<m;e++){const n=4*(t*m+e),r=2*(e*l+t);p[n]=f[r],p[n+1]=f[r+1],p[n+3]=-1===f[r]?0:1}return new s(e,g,p)}function m(e,t){const n=new u;return n.internalFormat=r.RGBA,n.width=t.length/4,n.height=1,n.samplingMode=a.NEAREST,n.wrapMode=i.CLAMP_TO_EDGE,new s(e,n,t)}function l(t,n,r,a=1,i=!0){return{u_flipY:i,u_applyTransform:!!t,u_opacity:a,u_transformSpacing:t?t.spacing:e,u_transformGridSize:t?t.size:e,u_targetImageSize:n,u_srcImageSize:r}}function _(e,t){return{u_colormapOffset:t||0,u_colormapMaxIndex:e?e.length/4-1:0}}function g(e,t){return{u_scale:e,u_offset:t}}function p(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function A(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function T(e,t){const n=e.gl,r=t.glName,a=new Map;if(null==r)return a;const i=n.getProgramParameter(r,n.ACTIVE_UNIFORMS);let o;for(let s=0;s<i;s++)o=n.getActiveUniform(r,s),o&&a.set(o.name,{location:n.getUniformLocation(r,o.name),info:o});return a}function h(e,t,n){Object.keys(n).forEach((r=>{const a=t.get(r)||t.get(r+\"[0]\");a&&E(e,r,n[r],a)}))}function O(e,t,n,r){n.length===r.length&&(r.some((e=>null==e))||n.some((e=>null==e))||n.forEach(((n,a)=>{t.setUniform1i(n,a),e.bindTexture(r[a],a)})))}function E(e,t,n,r){if(null===r||null==n)return!1;const{info:a}=r;switch(a.type){case o.FLOAT:a.size>1?e.setUniform1fv(t,n):e.setUniform1f(t,n);break;case o.FLOAT_VEC2:e.setUniform2fv(t,n);break;case o.FLOAT_VEC3:e.setUniform3fv(t,n);break;case o.FLOAT_VEC4:e.setUniform4fv(t,n);break;case o.FLOAT_MAT3:e.setUniformMatrix3fv(t,n);break;case o.FLOAT_MAT4:e.setUniformMatrix4fv(t,n);break;case o.INT:a.size>1?e.setUniform1iv(t,n):e.setUniform1i(t,n);break;case o.BOOL:e.setUniform1i(t,n?1:0);break;case o.INT_VEC2:case o.BOOL_VEC2:e.setUniform2iv(t,n);break;case o.INT_VEC3:case o.BOOL_VEC3:e.setUniform3iv(t,n);break;case o.INT_VEC4:case o.BOOL_VEC4:e.setUniform4iv(t,n);break;default:return!1}return!0}export{m as createColormapTexture,f as createRasterTexture,c as createTransformTexture,g as getBasicGridUniforms,_ as getColormapUniforms,l as getCommonUniforms,A as getShadedReliefUniforms,p as getStretchUniforms,T as getUniformLocationInfos,O as setTextures,h as setUniforms};\n"],"mappings":"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"}