{"version":3,"names":["e","Layer","Object","Mesh","Line","Point","Material","Texture","COUNT","o","constructor","i","this","primitiveIndices","_numIndexPerPrimitive","position","_children","h","length","size","data","c","l","indices","m","d","u","a","clear","push","f","s","x","r","t","Math","min","max","bbMin","bbMax","P","n","radius","v","at","sqrt","center","getChildren","Uint8Array","Array","Uint32Array","static","prune","deallocator","j","p0","p1","p2","M","O","p"],"sources":["./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js","./node_modules/@arcgis/core/views/3d/webgl-engine/lib/BoundingInfo.js","./node_modules/@arcgis/core/geometry/support/triangle.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nvar e;!function(e){e[e.Layer=0]=\"Layer\",e[e.Object=1]=\"Object\",e[e.Mesh=2]=\"Mesh\",e[e.Line=3]=\"Line\",e[e.Point=4]=\"Point\",e[e.Material=5]=\"Material\",e[e.Texture=6]=\"Texture\",e[e.COUNT=7]=\"COUNT\"}(e||(e={}));export{e as ContentObjectType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport i from\"../../../../core/PooledArray.js\";import{m as t,a as e}from\"../../../../chunks/vec32.js\";import{fromValues as s,clone as r,create as n}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{assert as h}from\"./Util.js\";class o{constructor(i,e,o){this.primitiveIndices=i,this._numIndexPerPrimitive=e,this.position=o,this._children=void 0,h(i.length>=1),h(3===o.size||4===o.size);const{data:c,size:l,indices:m}=o;h(m.length%this._numIndexPerPrimitive==0),h(m.length>=i.length*this._numIndexPerPrimitive);const d=i.length;let u=l*m[this._numIndexPerPrimitive*i[0]];a.clear(),a.push(u);const f=s(c[u],c[u+1],c[u+2]),x=r(f);for(let t=0;t<d;++t){const e=this._numIndexPerPrimitive*i[t];for(let i=0;i<this._numIndexPerPrimitive;++i){u=l*m[e+i],a.push(u);let t=c[u];f[0]=Math.min(t,f[0]),x[0]=Math.max(t,x[0]),t=c[u+1],f[1]=Math.min(t,f[1]),x[1]=Math.max(t,x[1]),t=c[u+2],f[2]=Math.min(t,f[2]),x[2]=Math.max(t,x[2])}}this.bbMin=f,this.bbMax=x;const P=t(n(),this.bbMin,this.bbMax,.5);this.radius=.5*Math.max(Math.max(x[0]-f[0],x[1]-f[1]),x[2]-f[2]);let v=this.radius*this.radius;for(let t=0;t<a.length;++t){u=a.at(t);const i=c[u]-P[0],e=c[u+1]-P[1],s=c[u+2]-P[2],r=i*i+e*e+s*s;if(r<=v)continue;const n=Math.sqrt(r),h=.5*(n-this.radius);this.radius=this.radius+h,v=this.radius*this.radius;const o=h/n;P[0]+=i*o,P[1]+=e*o,P[2]+=s*o}this.center=P,a.clear()}getChildren(){if(this._children||e(this.bbMin,this.bbMax)<=1)return this._children;const i=t(n(),this.bbMin,this.bbMax,.5),s=this.primitiveIndices.length,r=new Uint8Array(s),h=new Array(8);for(let t=0;t<8;++t)h[t]=0;const{data:a,size:c,indices:l}=this.position;for(let t=0;t<s;++t){let e=0;const s=this._numIndexPerPrimitive*this.primitiveIndices[t];let n=c*l[s],o=a[n],m=a[n+1],d=a[n+2];for(let i=1;i<this._numIndexPerPrimitive;++i){n=c*l[s+i];const t=a[n],e=a[n+1],r=a[n+2];t<o&&(o=t),e<m&&(m=e),r<d&&(d=r)}o<i[0]&&(e|=1),m<i[1]&&(e|=2),d<i[2]&&(e|=4),r[t]=e,++h[e]}let m=0;for(let t=0;t<8;++t)h[t]>0&&++m;if(m<2)return;const d=new Array(8);for(let t=0;t<8;++t)d[t]=h[t]>0?new Uint32Array(h[t]):void 0;for(let t=0;t<8;++t)h[t]=0;for(let t=0;t<s;++t){const i=r[t];d[i][h[i]++]=this.primitiveIndices[t]}this._children=new Array;for(let t=0;t<8;++t)void 0!==d[t]&&this._children.push(new o(d[t],this._numIndexPerPrimitive,this.position));return this._children}static prune(){a.prune()}}const a=new i({deallocator:null});export{o as BoundingInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{ObjectStack as t}from\"../../core/ObjectStack.js\";import{c as e,f as n,b as r,k as o,h as c,g as s,l as p}from\"../../chunks/vec32.js\";import{clone as i,create as a}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as f,distance2 as u,fromValues as g}from\"./lineSegment.js\";import{sv3d as m}from\"./vectorStacks.js\";function j(t){return t?{p0:i(t.p0),p1:i(t.p1),p2:i(t.p2)}:{p0:a(),p1:a(),p2:a()}}function l(t,e,n){const r=x.get();return r.p0=t,r.p1=e,r.p2=n,r}function b(t,e=j()){return h(t.p0,t.p1,t.p2,e)}function h(t,n,r,o=j()){return e(o.p0,t),e(o.p1,n),e(o.p2,r),o}function k(t,e){const c=t.p0,s=t.p1,p=t.p2,i=n(m.get(),s,c),a=n(m.get(),p,s),f=n(m.get(),c,p),j=n(m.get(),e,c),l=n(m.get(),e,s),b=n(m.get(),e,p),h=r(i,i,f),k=o(r(m.get(),i,h),j),v=o(r(m.get(),a,h),l),S=o(r(m.get(),f,h),b);if(k>0&&v>0&&S>0){const t=o(h,j);return t*t/o(h,h)}const d=u(g(c,i,w.get()),e),x=u(g(s,a,w.get()),e),M=u(g(p,f,w.get()),e);return Math.min(d,x,M)}function v(t,e,n){const r=1e-5,{direction:o,origin:p}=e,{p0:i,p1:a,p2:f}=t,u=a[0]-i[0],g=a[1]-i[1],m=a[2]-i[2],j=f[0]-i[0],l=f[1]-i[1],b=f[2]-i[2],h=o[1]*b-l*o[2],k=o[2]*j-b*o[0],v=o[0]*l-j*o[1],S=u*h+g*k+m*v;if(S>-r&&S<r)return!1;const d=1/S,w=p[0]-i[0],x=p[1]-i[1],M=p[2]-i[2],O=d*(w*h+x*k+M*v);if(O<0||O>1)return!1;const V=x*m-g*M,q=M*u-m*w,y=w*g-u*x,z=d*(o[0]*V+o[1]*q+o[2]*y);if(z<0||O+z>1)return!1;if(n){c(n,o,d*(j*V+l*q+b*y)),s(n,p,n)}return!0}function S(t,e,n){const r=e[0]-t[0],o=e[1]-t[1],c=n[0]-t[0],s=n[1]-t[1];return.5*Math.abs(r*s-o*c)}function d(t,e,o){return n(M,e,t),n(O,o,t),.5*p(r(M,M,O))}const w=new t(f),x=new t((()=>j())),M=a(),O=a();export{S as areaPoints2d,d as areaPoints3d,b as copy,j as create,k as distance2,h as fromValues,v as intersectRay,l as wrap};\n"],"mappings":"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"}