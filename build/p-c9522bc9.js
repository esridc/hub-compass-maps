import{h as t}from"./p-b8a25c33.js";var s;!function(t){t[t.moveTo=1]="moveTo",t[t.lineTo=2]="lineTo",t[t.close=7]="close"}(s||(s={}));class e{constructor(t,s,e=0){this.values={},this._geometry=void 0,this._pbfGeometry=null,this.featureIndex=e;const r=s.keys,a=s.values,i=t.asUnsafe();for(;i.next();)switch(i.tag()){case 1:this.id=i.getUInt64();break;case 2:{const t=i.getMessage().asUnsafe(),s=this.values;for(;!t.empty();){const e=t.getUInt32(),i=t.getUInt32();s[r[e]]=a[i]}t.release();break}case 3:this.type=i.getUInt32();break;case 4:this._pbfGeometry=i.getMessage();break;default:i.skip()}}getGeometry(e){if(void 0!==this._geometry)return this._geometry;if(!this._pbfGeometry)return null;const r=this._pbfGeometry.asUnsafe();let a,i;this._pbfGeometry=null,e?e.reset(this.type):a=[];let c,n=s.moveTo,h=0,o=0,u=0;for(;!r.empty();){if(0===h){const t=r.getUInt32();n=7&t,h=t>>3}switch(h--,n){case s.moveTo:o+=r.getSInt32(),u+=r.getSInt32(),e?e.moveTo(o,u):a&&(i&&a.push(i),i=[],i.push(new t(o,u)));break;case s.lineTo:o+=r.getSInt32(),u+=r.getSInt32(),e?e.lineTo(o,u):i&&i.push(new t(o,u));break;case s.close:e?e.close():i&&!i[0].equals(o,u)&&i.push(i[0].clone());break;default:throw r.release(),new Error("Invalid path operation")}}return e?c=e.result():a&&(i&&a.push(i),c=a),r.release(),this._geometry=c,c}}class r{constructor(t){this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=t.clone();const s=t.asUnsafe();for(;s.next();)switch(s.tag()){case 1:this.name=s.getString();break;case 3:this.keys.push(s.getString());break;case 4:this.values.push(s.processMessage(r._parseValue));break;case 5:this.extent=s.getUInt32();break;default:s.skip()}}getData(){return this._pbfLayer}static _parseValue(t){for(;t.next();)switch(t.tag()){case 1:return t.getString();case 2:return t.getFloat();case 3:return t.getDouble();case 4:return t.getInt64();case 5:return t.getUInt64();case 6:return t.getSInt64();case 7:return t.getBool();default:t.skip()}return null}}export{r as e,e as s};
//# sourceMappingURL=p-c9522bc9.js.map