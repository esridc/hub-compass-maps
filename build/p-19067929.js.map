{"version":3,"names":["c","LineString","MultiLineString","MultiPoint","Point","Polygon","MultiPolygon","u","e","l","type","t","features","f","coordinates","p","geometryType","n","objectIdField","i","s","geometry","properties","id","a","o","h","r","length","y","g","d","m","push","w","P","j","b","S","F","M","G","k","O","T","lengths","coords","hasZ","L","E","data","crs","name","code","wkid","RegExp","test","I","Set","Object","keys","filter","has","add","delete","alias","fields","objectIdFieldName","objectIdFieldType","unknownFields","Array","from","N"],"sources":["./node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{isISO8601Date as e}from\"../../../../core/date.js\";import t from\"../../../../core/Error.js\";import{isWGS84 as n}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{OptimizedFeature as o}from\"../../OptimizedFeature.js\";import r from\"../../OptimizedGeometry.js\";import{normalizeFieldName as i,isNumericField as s}from\"../../../support/fieldUtils.js\";const c={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function u(e){return c[e]}function*l(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*f(e){if(e)switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*p(e,t={}){const{geometryType:n,objectIdField:i}=t;for(const s of e){const{geometry:e,properties:c,id:l}=s;if(e&&u(e.type)!==n)continue;const f=c||{};let p;i&&(p=f[i],null==l||p||(f[i]=p=l));const a=new o(e?h(new r,e,t):null,f,null,p??void 0);yield a}}function a(e){for(const t of e)if(t.length>2)return!0;return!1}function y(e){return!g(e)}function d(e){return g(e)}function g(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function m(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function h(e,t,n){switch(t.type){case\"LineString\":return w(e,t,n);case\"MultiLineString\":return P(e,t,n);case\"MultiPoint\":return j(e,t,n);case\"MultiPolygon\":return b(e,t,n);case\"Point\":return S(e,t,n);case\"Polygon\":return F(e,t,n)}}function w(e,t,n){return M(e,t.coordinates,n),e}function P(e,t,n){for(const o of t.coordinates)M(e,o,n);return e}function j(e,t,n){return M(e,t.coordinates,n),e}function b(e,t,n){for(const o of t.coordinates){G(e,o[0],n);for(let t=1;t<o.length;t++)k(e,o[t],n)}return e}function S(e,t,n){return O(e,t.coordinates,n),e}function F(e,t,n){const o=t.coordinates;G(e,o[0],n);for(let r=1;r<o.length;r++)k(e,o[r],n);return e}function G(e,t,n){const o=m(t);y(o)?T(e,o,n):M(e,o,n)}function k(e,t,n){const o=m(t);d(o)?T(e,o,n):M(e,o,n)}function M(e,t,n){for(const o of t)O(e,o,n);e.lengths.push(t.length)}function T(e,t,n){for(let o=t.length-1;o>=0;o--)O(e,t[o],n);e.lengths.push(t.length)}function O(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function L(t){switch(typeof t){case\"string\":return e(t)?\"esriFieldTypeDate\":\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function E(e,o=4326){if(!e)throw new t(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==e.type&&\"FeatureCollection\"!==e.type)throw new t(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:e});const{crs:r}=e;if(!r)return;const i=\"string\"==typeof r?r:\"name\"===r.type?r.properties.name:\"EPSG\"===r.type?r.properties.code:null,s=n({wkid:o})?new RegExp(\".*(CRS84H?|4326)$\",\"i\"):new RegExp(`.*(${o})$`,\"i\");if(!i||!s.test(i))throw new t(\"geojson:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:r})}function I(e,t={}){const n=[],o=new Set,r=new Set;let c,p=!1,y=null,d=!1,{geometryType:g=null}=t,m=!1;for(const s of l(e)){const{geometry:e,properties:t,id:l}=s;if(!e||(g||(g=u(e.type)),u(e.type)===g)){if(!p){p=a(f(e))}if(d||(d=null!=l,d&&(c=typeof l,t&&(y=Object.keys(t).filter((e=>t[e]===l))))),t&&y&&d&&null!=l&&(y.length>1?y=y.filter((e=>t[e]===l)):1===y.length&&(y=t[y[0]]===l?y:[])),!m&&t){let e=!0;for(const s in t){if(o.has(s))continue;const c=t[s];if(null==c){e=!1,r.add(s);continue}const u=L(c);if(\"unknown\"===u){r.add(s);continue}r.delete(s),o.add(s);const l=i(s);l&&n.push({name:l,alias:s,type:u})}m=e}}}const h=i(1===y?.length&&y[0]||null)??void 0;if(h)for(const i of n)if(i.name===h&&s(i)){i.type=\"esriFieldTypeOID\";break}return{fields:n,geometryType:g,hasZ:p,objectIdFieldName:h,objectIdFieldType:c,unknownFields:Array.from(r)}}function N(e,t){return Array.from(p(l(e),t))}export{N as createOptimizedFeatures,u as getGeometryType,I as inferLayerProperties,E as validateGeoJSON};\n"],"mappings":"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"}