{"version":3,"names":["n","async","t","r","Array","vertexAttributes","position","e","o","this","_createMeshData","s","invoke","transferList","createIndexThread","result","_createPooledRBush","fromJSON","Float64Array","components","_createIndexComponentsThread","map","Uint32Array","_createIndexAllThread","length","load","toJSON","a","i","vertexSpace","normal","tangent","transform","spatialReference","buffer","some","faces","has","minX","Math","min","maxX","max","minY","maxY","p0","p1","p2"],"sources":["./node_modules/@arcgis/core/geometry/support/meshUtils/ElevationSamplerWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport has from\"../../../core/has.js\";import{PooledRBush as e}from\"../../../core/libs/rbush/PooledRBush.js\";import{isRelativeVertexSpace as t}from\"../meshVertexSpaceUtils.js\";import{georeferenceApplyTransform as r}from\"./georeference.js\";class n{async createIndex(t,r){const n=new Array;if(!t.vertexAttributes?.position)return new e;const o=this._createMeshData(t),s=null!=r?await r.invoke(\"createIndexThread\",o,{transferList:n}):this.createIndexThread(o).result;return this._createPooledRBush().fromJSON(s)}createIndexThread(e){const t=new Float64Array(e.position),r=this._createPooledRBush();return e.components?this._createIndexComponentsThread(r,t,e.components.map((e=>new Uint32Array(e)))):this._createIndexAllThread(r,t)}_createIndexAllThread(e,t){const r=new Array(t.length/9);let n=0;for(let s=0;s<t.length;s+=9)r[n++]=o(t,s,s+3,s+6);return e.load(r),{result:e.toJSON()}}_createIndexComponentsThread(e,t,r){let n=0;for(const o of r)n+=o.length/3;const s=new Array(n);let a=0;for(const i of r)for(let e=0;e<i.length;e+=3)s[a++]=o(t,3*i[e],3*i[e+1],3*i[e+2]);return e.load(s),{result:e.toJSON()}}_createMeshData(e){const n=(t(e.vertexSpace)?r({position:e.vertexAttributes.position,normal:null,tangent:null},e.vertexSpace,e.transform,e.spatialReference).position:e.vertexAttributes.position).buffer;return!e.components||e.components.some((e=>!e.faces))?{position:n}:{position:n,components:e.components.map((e=>e.faces))}}_createPooledRBush(){return new e(9,has(\"esri-csp-restrictions\")?e=>e:[\".minX\",\".minY\",\".maxX\",\".maxY\"])}}function o(e,t,r,n){return{minX:Math.min(e[t],e[r],e[n]),maxX:Math.max(e[t],e[r],e[n]),minY:Math.min(e[t+1],e[r+1],e[n+1]),maxY:Math.max(e[t+1],e[r+1],e[n+1]),p0:[e[t],e[t+1],e[t+2]],p1:[e[r],e[r+1],e[r+2]],p2:[e[n],e[n+1],e[n+2]]}}export{n as default};\n"],"mappings":"gYAI8O,MAAMA,EAAEC,kBAAkBC,EAAEC,GAAG,MAAMH,EAAE,IAAII,MAAM,IAAIF,EAAEG,kBAAkBC,SAAS,OAAO,IAAIC,EAAE,MAAMC,EAAEC,KAAKC,gBAAgBR,GAAGS,EAAE,MAAMR,QAAQA,EAAES,OAAO,oBAAoBJ,EAAE,CAACK,aAAab,IAAIS,KAAKK,kBAAkBN,GAAGO,OAAO,OAAON,KAAKO,qBAAqBC,SAASN,EAAE,CAACG,kBAAkBP,GAAG,MAAML,EAAE,IAAIgB,aAAaX,EAAED,UAAUH,EAAEM,KAAKO,qBAAqB,OAAOT,EAAEY,WAAWV,KAAKW,6BAA6BjB,EAAED,EAAEK,EAAEY,WAAWE,KAAKd,GAAG,IAAIe,YAAYf,MAAME,KAAKc,sBAAsBpB,EAAED,EAAE,CAACqB,sBAAsBhB,EAAEL,GAAG,MAAMC,EAAE,IAAIC,MAAMF,EAAEsB,OAAO,GAAG,IAAIxB,EAAE,EAAE,IAAI,IAAIW,EAAE,EAAEA,EAAET,EAAEsB,OAAOb,GAAG,EAAER,EAAEH,KAAKQ,EAAEN,EAAES,EAAEA,EAAE,EAAEA,EAAE,GAAG,OAAOJ,EAAEkB,KAAKtB,GAAG,CAACY,OAAOR,EAAEmB,SAAS,CAACN,6BAA6Bb,EAAEL,EAAEC,GAAG,IAAIH,EAAE,EAAE,IAAI,MAAMQ,KAAKL,EAAEH,GAAGQ,EAAEgB,OAAO,EAAE,MAAMb,EAAE,IAAIP,MAAMJ,GAAG,IAAI2B,EAAE,EAAE,IAAI,MAAMC,KAAKzB,EAAE,IAAI,IAAII,EAAE,EAAEA,EAAEqB,EAAEJ,OAAOjB,GAAG,EAAEI,EAAEgB,KAAKnB,EAAEN,EAAE,EAAE0B,EAAErB,GAAG,EAAEqB,EAAErB,EAAE,GAAG,EAAEqB,EAAErB,EAAE,IAAI,OAAOA,EAAEkB,KAAKd,GAAG,CAACI,OAAOR,EAAEmB,SAAS,CAAChB,gBAAgBH,GAAG,MAAMP,GAAGE,EAAEK,EAAEsB,aAAa1B,EAAE,CAACG,SAASC,EAAEF,iBAAiBC,SAASwB,OAAO,KAAKC,QAAQ,MAAMxB,EAAEsB,YAAYtB,EAAEyB,UAAUzB,EAAE0B,kBAAkB3B,SAASC,EAAEF,iBAAiBC,UAAU4B,OAAO,OAAO3B,EAAEY,YAAYZ,EAAEY,WAAWgB,MAAM5B,IAAIA,EAAE6B,QAAQ,CAAC9B,SAASN,GAAG,CAACM,SAASN,EAAEmB,WAAWZ,EAAEY,WAAWE,KAAKd,GAAGA,EAAE6B,QAAQ,CAACpB,qBAAqB,OAAO,IAAIT,EAAE,EAAE8B,EAAI,yBAAyB9B,GAAGA,EAAE,CAAC,QAAQ,QAAQ,QAAQ,SAAS,EAAE,SAASC,EAAED,EAAEL,EAAEC,EAAEH,GAAG,MAAM,CAACsC,KAAKC,KAAKC,IAAIjC,EAAEL,GAAGK,EAAEJ,GAAGI,EAAEP,IAAIyC,KAAKF,KAAKG,IAAInC,EAAEL,GAAGK,EAAEJ,GAAGI,EAAEP,IAAI2C,KAAKJ,KAAKC,IAAIjC,EAAEL,EAAE,GAAGK,EAAEJ,EAAE,GAAGI,EAAEP,EAAE,IAAI4C,KAAKL,KAAKG,IAAInC,EAAEL,EAAE,GAAGK,EAAEJ,EAAE,GAAGI,EAAEP,EAAE,IAAI6C,GAAG,CAACtC,EAAEL,GAAGK,EAAEL,EAAE,GAAGK,EAAEL,EAAE,IAAI4C,GAAG,CAACvC,EAAEJ,GAAGI,EAAEJ,EAAE,GAAGI,EAAEJ,EAAE,IAAI4C,GAAG,CAACxC,EAAEP,GAAGO,EAAEP,EAAE,GAAGO,EAAEP,EAAE,IAAI,gB"}