import{ih as t}from"./p-3013819f.js";import{i as r,t as n}from"./p-2e59108c.js";function e(e,u,c){const s=Array.isArray(e),a=s?e.length/u:e.byteLength/(4*u),y=s?e:new Uint32Array(e,0,a*u),A=c?.minReduction??0,w=c?.originalIndices||null,p=w?w.length:0,U=c?.componentOffsets||null;let h=0;if(U)for(let t=0;t<U.length-1;t++){const r=U[t+1]-U[t];r>h&&(h=r)}else h=a;const m=Math.floor(1.1*h)+1;(null==i||i.length<2*m)&&(i=new Uint32Array(t(2*m)));for(let t=0;t<2*m;t++)i[t]=0;let M=0;const b=!!U&&!!w,j=b?p:a;let d=r(a);const k=new Uint32Array(p),q=1.96;let x=0!==A?Math.ceil(4*q*q/(A*A)*A*(1-A)):j,C=1,g=U?U[1]:j;for(let t=0;t<j;t++){if(t===x){const r=1-M/t;if(r+q*Math.sqrt(r*(1-r)/t)<A)return null;x*=2}if(t===g){for(let t=0;t<2*m;t++)i[t]=0;if(w)for(let t=U[C-1];t<U[C];t++)k[t]=d[w[t]];g=U[++C]}const r=b?w[t]:t,n=r*u,e=l(y,n,u);let o=e%m,c=M;for(;0!==i[2*o+1];){if(i[2*o]===e){const t=i[2*o+1]-1;if(f(y,n,t*u,u)){c=d[t];break}}o++,o>=m&&(o-=m)}c===M&&(i[2*o]=e,i[2*o+1]=r+1,M++),d[r]=c}if(0!==A&&1-M/a<A)return null;if(b){for(let t=U[C-1];t<k.length;t++)k[t]=d[w[t]];d=n(k)}const v=s?new Array(M):new Uint32Array(M*u);M=0;for(let t=0;t<j;t++)if(d[t]===M){o(y,(b?w[t]:t)*u,v,M*u,u),M++}if(w&&!b){const t=new Uint32Array(p);for(let r=0;r<t.length;r++)t[r]=d[w[r]];d=n(t)}return{buffer:Array.isArray(v)?v:v.buffer,indices:d,uniqueCount:M}}function f(t,r,n,e){for(let f=0;f<e;f++)if(t[r+f]!==t[n+f])return!1;return!0}function o(t,r,n,e,f){for(let o=0;o<f;o++)n[e+o]=t[r+o]}function l(t,r,n){let e=0;for(let f=0;f<n;f++)e=t[r+f]+e|0,e=e+(e<<11)+(e>>>2)|0;return e>>>0}let i=null;export{e};
//# sourceMappingURL=p-c887d4a8.js.map