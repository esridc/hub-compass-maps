import{d7 as t,W as r,U as n}from"./p-3013819f.js";import{c as s,u as e,i}from"./p-c2c5c63d.js";class o{constructor(t,r,n){this.assetName=t,this.assetMimeType=r,this.parts=n}equals(r){return this===r||this.assetName===r.assetName&&this.assetMimeType===r.assetMimeType&&t(this.parts,r.parts,((t,r)=>t.equals(r)))}isOnService(t){return this.parts.every((r=>r.isOnService(t)))}makeHash(){let t="";for(const r of this.parts)t+=r.partHash;return t}async toBlob(t){const{parts:n}=this;if(1===n.length)return n[0].toBlob(t);const s=await Promise.all(n.map((r=>r.toBlob(t))));return r(t),new Blob(s)}}class u{constructor(t,r){this.partUrl=t,this.partHash=r}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(t){const{data:s}=await n(this.partUrl,{responseType:"blob"});return r(t),s}}function c(t){return l(t?.source)}function f(t){if(!Array.isArray(t))return!1;return t.every((t=>t instanceof o))}const a=/^(model\/gltf\+json)|(model\/gltf-binary)$/,h=/\.(gltf|glb)/i;function l(t){if(!t)return!1;if(Array.isArray(t)){return t.some(m)}return m(t)}function m(t){if(t instanceof File){const{type:r,name:n}=t;return a.test(r)||h.test(n)}return a.test(t.assetMimeType)||h.test(t.assetName)}function p(t,r){if(!t)return!1;const{source:n}=t;return b(n,r)}function y(t,r){if(t===r)return!0;const{source:n}=t,{source:s}=r;if(n===s)return!0;if(f(n)&&f(s)){if(n.length!==s.length)return!1;const t=(t,r)=>t.assetName<r.assetName?-1:t.assetName>r.assetName?1:0,r=[...n].sort(t),e=[...s].sort(t);for(let t=0;t<r.length;++t)if(!r[t].equals(e[t]))return!1;return!0}return!1}function b(t,r){if(Array.isArray(t)){const n=t;return n.length>0&&n.every((t=>d(t,r)))}return d(t,r)}function d(t,r){return t instanceof o&&t.isOnService(r)}function g(t,r){return t instanceof File?s(t,r):e(t.assetMimeType,r)??i(t.assetName,r)}function A(t){return Array.isArray(t)?t:[t]}function j(t){return!!t.original}export{A,g as N,p as h,o as i,u as o,c as u,j as v,y};
//# sourceMappingURL=p-4fb66b05.js.map