import{N as n}from"./p-448d8eb2.js";import{g as r,U as t,x as a,d as e,B as i,K as o,ag as s,a as u,r as f,u as c,C as d,ah as m,D as p,ai as w,y as l,s as j,j as v}from"./p-63562f76.js";import{E as y}from"./p-7950bc60.js";import"./p-aad64c9f.js";import"./p-2af77f97.js";import"./p-4295487d.js";import"./p-11492679.js";import"./p-875cbb57.js";import"./p-da522976.js";import"./p-aff89b86.js";import"./p-d492d39b.js";import"./p-1bb606f6.js";function h(r,t){return r&&r.domain?"coded-value"===r.domain.type||"codedValue"===r.domain.type?n.convertObjectToArcadeDictionary({type:"codedValue",name:r.domain.name,dataType:y[r.field.type],codedValues:r.domain.codedValues.map((n=>({name:n.name,code:n.code})))},i(t)):n.convertObjectToArcadeDictionary({type:"range",name:r.domain.name,dataType:y[r.field.type],min:r.domain.minValue,max:r.domain.maxValue},i(t)):null}function b(y){"async"===y.mode&&(y.functions.domain=function(n,i){return y.standardFunctionAsync(n,i,(async(c,d,m)=>{if(r(m,2,3,n,i),t(m[0])){return h(a(m[0],e(m[1]),void 0===m[2]?void 0:m[2]),n)}if(o(m[0])){await m[0]._ensureLoaded();return h(s(e(m[1]),m[0],null,void 0===m[2]?void 0:m[2]),n)}throw new u(n,f.InvalidParameter,i)}))},y.functions.subtypes=function(a,e){return y.standardFunctionAsync(a,e,(async(s,d,m)=>{if(r(m,1,1,a,e),t(m[0])){const r=c(m[0]);return r?n.convertObjectToArcadeDictionary(r,i(a)):null}if(o(m[0])){await m[0]._ensureLoaded();const r=m[0].subtypeMetaData();return r?n.convertObjectToArcadeDictionary(r,i(a)):null}throw new u(a,f.InvalidParameter,e)}))},y.functions.domainname=function(n,a){return y.standardFunctionAsync(n,a,(async(i,c,p)=>{if(r(p,2,4,n,a),t(p[0]))return d(p[0],e(p[1]),p[2],void 0===p[3]?void 0:p[3]);if(o(p[0])){await p[0]._ensureLoaded();const n=s(e(p[1]),p[0],null,void 0===p[3]?void 0:p[3]);return m(n,p[2])}throw new u(n,f.InvalidParameter,a)}))},y.signatures.push({name:"domainname",min:2,max:4}),y.functions.domaincode=function(n,a){return y.standardFunctionAsync(n,a,(async(i,c,d)=>{if(r(d,2,4,n,a),t(d[0]))return p(d[0],e(d[1]),d[2],void 0===d[3]?void 0:d[3]);if(o(d[0])){await d[0]._ensureLoaded();const n=s(e(d[1]),d[0],null,void 0===d[3]?void 0:d[3]);return w(n,d[2])}throw new u(n,f.InvalidParameter,a)}))},y.signatures.push({name:"domaincode",min:2,max:4}),y.functions.text=function(n,t){return y.standardFunctionAsync(n,t,(async(a,e,i)=>{if(r(i,1,2,n,t),o(i[0])){const r=v(i[1],"");if(""===r)return i[0].castToText();if("schema"===r.toLowerCase())return i[0].convertToText("schema",a.abortSignal);if("featureset"===r.toLowerCase())return i[0].convertToText("featureset",a.abortSignal);throw new u(n,f.InvalidParameter,t)}return l(i[0],i[1])}))},y.functions.gdbversion=function(n,a){return y.standardFunctionAsync(n,a,(async(e,i,s)=>{if(r(s,1,1,n,a),t(s[0]))return s[0].gdbVersion();if(o(s[0])){return(await s[0].load()).gdbVersion}throw new u(n,f.InvalidParameter,a)}))},y.functions.schema=function(a,e){return y.standardFunctionAsync(a,e,(async(s,c,d)=>{if(r(d,1,1,a,e),o(d[0]))return await d[0].load(),n.convertObjectToArcadeDictionary(d[0].schema(),i(a));if(t(d[0])){const r=j(d[0]);return r?n.convertObjectToArcadeDictionary(r,i(a)):null}throw new u(a,f.InvalidParameter,e)}))})}export{b as registerFunctions};
//# sourceMappingURL=p-5db0903d.js.map