{"version":3,"names":["c","h","s","t","e","x","y","z","m","xmin","ymin","xmax","ymax","hasZ","zmin","zmax","hasM","mmin","mmax","rings","l","paths","points","f","n","push","length","async","r","Array","isArray","map","geometry","spatialReference","filter","source","dest","bind","g","p","j","i","o","u","a","_","constructor","this","_jobs","_timer","_process","geometries","inSpatialReference","outSpatialReference","geographicTransformation","resolve","setTimeout","promise","shift","M","b","R","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","Object","freeze","S","outFields","orderByFields","groupByFieldsForStatistics","outStatistics","trim","onStatisticField","outSR","where","test","d","distance","units","spatialRel","quantizationParameters","tolerance","maxAllowableOffset","w","densificationStep","toJSON","fromJSON","then","U","import","geodesicBuffer"],"sources":["./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js","./node_modules/@arcgis/core/layers/graphics/data/queryUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{isSome as s}from\"../../../core/arrayUtils.js\";import{createResolver as t}from\"../../../core/promiseUtils.js\";import{initializeProjection as e,projectMany as n}from\"../../../geometry/projection.js\";import{jsonAdapter as r}from\"../../../geometry/geometryAdapters/json.js\";import{isValid as i,equals as o,isWebMercator as a}from\"../../../geometry/support/spatialReferenceUtils.js\";import{lngLatToXY as m,xyToLngLat as p,canProject as u}from\"../../../geometry/support/webMercatorUtils.js\";const c=[0,0];function h(s,t){if(!t)return null;if(\"x\"in t){const e={x:0,y:0};return[e.x,e.y]=s(t.x,t.y,c),null!=t.z&&(e.z=t.z),null!=t.m&&(e.m=t.m),e}if(\"xmin\"in t){const e={xmin:0,ymin:0,xmax:0,ymax:0};return[e.xmin,e.ymin]=s(t.xmin,t.ymin,c),[e.xmax,e.ymax]=s(t.xmax,t.ymax,c),t.hasZ&&(e.zmin=t.zmin,e.zmax=t.zmax,e.hasZ=!0),t.hasM&&(e.mmin=t.mmin,e.mmax=t.mmax,e.hasM=!0),e}return\"rings\"in t?{rings:l(t.rings,s),hasM:t.hasM,hasZ:t.hasZ}:\"paths\"in t?{paths:l(t.paths,s),hasM:t.hasM,hasZ:t.hasZ}:\"points\"in t?{points:f(t.points,s),hasM:t.hasM,hasZ:t.hasZ}:null}function l(s,t){const e=[];for(const n of s)e.push(f(n,t));return e}function f(s,t){const e=[];for(const n of s){const s=t(n[0],n[1],[0,0]);e.push(s),n.length>2&&s.push(n[2]),n.length>3&&s.push(n[3])}return e}async function x(t,n){if(!t||!n)return;const r=Array.isArray(t)?t.map((s=>null!=s.geometry?s.geometry.spatialReference:null)).filter(s):[t];await e(r.map((s=>({source:s,dest:n}))))}const y=h.bind(null,m),g=h.bind(null,p);function j(s,t,e,m){if(!s)return s;if(e||(e=t,t=s.spatialReference),!i(t)||!i(e)||o(t,e))return s;if(u(t,e)){const t=a(e)?y(s):g(s);return t.spatialReference=e,t}return n(r,[s],t,e,null,m)[0]}class _{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(s,e,n,r){if(!s?.length||!e||!n||o(e,n))return s;const i={geometries:s,inSpatialReference:e,outSpatialReference:n,geographicTransformation:r,resolve:t()};return this._jobs.push(i),this._timer??=setTimeout(this._process,10),i.resolve.promise}_process(){this._timer=null;const s=this._jobs.shift();if(!s)return;const{geometries:t,inSpatialReference:e,outSpatialReference:i,resolve:o,geographicTransformation:m}=s;u(e,i)?a(i)?o(t.map(y)):o(t.map(g)):o(n(r,t,e,i,m,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const M=new _;function b(s,t,e,n){return M.push(s,t,e,n)}export{x as checkProjectionSupport,j as project,b as projectMany};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{JSONMap as e}from\"../../../core/jsonMap.js\";import{getUnitString as t}from\"../../../core/unitUtils.js\";import{canProjectWithoutEngine as i}from\"../../../geometry/projection.js\";import{getGeometryExtent as r}from\"../../../geometry/support/extentUtils.js\";import{fromJSON as n,isExtent as o,isPolygon as s,isPolyline as a}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as l}from\"../../../geometry/support/normalizeUtils.js\";import{equals as m,isGeographic as f,isWebMercator as c,wgs84 as u}from\"../../../geometry/support/spatialReferenceUtils.js\";import{checkProjectionSupport as p,project as y}from\"./projectionSupport.js\";const R=new e({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"}),g=Object.freeze({});async function S(e,t,i){const{outFields:r,orderByFields:n,groupByFieldsForStatistics:o,outStatistics:s}=e;if(r)for(let a=0;a<r.length;a++)r[a]=r[a].trim();if(n)for(let a=0;a<n.length;a++)n[a]=n[a].trim();if(o)for(let a=0;a<o.length;a++)o[a]=o[a].trim();if(s)for(let a=0;a<s.length;a++)s[a].onStatisticField&&(s[a].onStatisticField=s[a].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),j(e,t,i)}async function j(e,t,i){if(!e)return null;let{where:o}=e;if(e.where=o=o?.trim(),(!o||/^1 *= *1$/.test(o)||t&&t===o)&&(e.where=null),!e.geometry)return e;let s=await d(e);if(e.distance=0,e.units=null,\"esriSpatialRelEnvelopeIntersects\"===e.spatialRel){const{spatialReference:t}=e.geometry;s=r(s),s.spatialReference=t}if(s){await p(s.spatialReference,i),s=x(s,i);const t=(await l(n(s)))[0];if(null==t)throw g;const r=\"quantizationParameters\"in e&&e.quantizationParameters?.tolerance||\"maxAllowableOffset\"in e&&e.maxAllowableOffset||0,o=r&&w(s,i)?{densificationStep:8*r}:void 0,a=t.toJSON(),m=y(a,a.spatialReference,i,o);if(!m)throw g;m.spatialReference=i,e.geometry=m}return e}function w(e,t){if(!e)return!1;const r=e.spatialReference;return(o(e)||s(e)||a(e))&&!m(r,t)&&!i(r,t)}function x(e,t){const i=e.spatialReference;return w(e,t)&&o(e)?{spatialReference:i,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}:e}async function d(e){const{distance:i,units:r}=e,n=e.geometry;if(null==i||\"vertexAttributes\"in n)return n;const o=n.spatialReference,s=r?R.fromJSON(r):t(o),a=o&&(f(o)||c(o))?n:await p(o,u).then((()=>y(n,u)));return(await U())(a.spatialReference,a,i,s)}async function U(){return(await import(\"../../../geometry/geometryEngineJSON.js\")).geodesicBuffer}export{S as normalizeQuery,j as normalizeQueryLike,g as queryEngineEmptyResult,R as unitsKebabDict};\n"],"mappings":"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"}