import{dA as t,fA as a,fz as n,U as s,h6 as r}from"./p-3013819f.js";import"./p-3b51db5e.js";async function c(r,c,o){const f=t(r),u=c.toJSON();u.traceLocations=JSON.stringify(c.traceLocations),c.resultTypes&&(u.resultTypes=JSON.stringify(c.resultTypes));const i=a(f.query,{query:n({...u,f:"json"}),...o}),p=`${f.path}/trace`;return s(p,i).then((t=>e(t,c.outSpatialReference)))}async function o(r,c,o){const e=t(r),f=c.toJSON();f.traceLocations=JSON.stringify(c.traceLocations),c.resultTypes&&(f.resultTypes=JSON.stringify(c.resultTypes));const u=a(e.query,{query:n({...f,async:!0,f:"json"}),...o}),i=`${e.path}/trace`,{data:p}=await s(i,u);return p.statusUrl}function e(t,a){const{data:n}=t,s=r.fromJSON(n.traceResults);return s.aggregatedGeometry&&a&&(s.aggregatedGeometry.line&&(s.aggregatedGeometry.line.spatialReference=a.clone()),s.aggregatedGeometry.multipoint&&(s.aggregatedGeometry.multipoint.spatialReference=a.clone()),s.aggregatedGeometry.polygon&&(s.aggregatedGeometry.polygon.spatialReference=a.clone())),s}export{o as submitTraceJob,c as trace};
//# sourceMappingURL=p-23f6d40d.js.map