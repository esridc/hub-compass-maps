{"version":3,"names":["n","o","s","r","a","e","style","t","Math","ceil","i","l","width","height","h","getContext","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","c","getImageData","m","Uint8Array","data","f","length","reduce","round","Float32Array","min","abs","S","g","M","d","max","T","F","sqrt"],"sources":["./node_modules/@arcgis/core/symbols/cim/rasterizingUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{packFloatRGBA as o}from\"../../core/floatRGBA.js\";import{nextPowerOfTwo as t}from\"../../core/mathUtils.js\";import{dashSdfRasterizationScale as r,dashSdfDistanceNormalization as a,dashRadius as e}from\"./constants.js\";const n=o=>\"vertical\"===o||\"horizontal\"===o||\"cross\"===o||\"esriSFSCross\"===o||\"esriSFSVertical\"===o||\"esriSFSHorizontal\"===o;function s(o,r,a){const e=r.style,s=t(Math.ceil(a)),i=n(e)?8*s:16*s,l=2*s;o.width=i,o.height=i;const h=o.getContext(\"2d\");h.strokeStyle=\"#ffffff\",h.lineWidth=s,h.beginPath(),\"vertical\"!==e&&\"cross\"!==e&&\"esriSFSCross\"!==e&&\"esriSFSVertical\"!==e||(h.moveTo(i/2,-l),h.lineTo(i/2,i+l)),\"horizontal\"!==e&&\"cross\"!==e&&\"esriSFSCross\"!==e&&\"esriSFSHorizontal\"!==e||(h.moveTo(-l,i/2),h.lineTo(i+l,i/2)),\"backward-diagonal\"!==e&&\"diagonal-cross\"!==e&&\"esriSFSDiagonalCross\"!==e&&\"esriSFSBackwardDiagonal\"!==e||(h.moveTo(-l,-l),h.lineTo(i+l,i+l),h.moveTo(i-l,-l),h.lineTo(i+l,l),h.moveTo(-l,i-l),h.lineTo(l,i+l)),\"forward-diagonal\"!==e&&\"diagonal-cross\"!==e&&\"esriSFSForwardDiagonal\"!==e&&\"esriSFSDiagonalCross\"!==e||(h.moveTo(i+l,-l),h.lineTo(-l,i+l),h.moveTo(l,-l),h.lineTo(-l,l),h.moveTo(i+l,i-l),h.lineTo(i-l,i+l)),h.stroke();const c=h.getImageData(0,0,o.width,o.height),m=new Uint8Array(c.data);let f;for(let t=0;t<m.length;t+=4)f=m[t+3]/255,m[t]=m[t]*f,m[t+1]=m[t+1]*f,m[t+2]=m[t+2]*f;return[m,o.width,o.height,s]}function i(t){t.length%2==1&&(t=[...t,...t]);const e=t.reduce(((o,t)=>o+t),0),n=Math.round(e*r),s=1,i=new Float32Array(n*s);let l=0,h=0,c=.5,m=!0;for(const o of t){for(l=h,h+=o*r;c<=h;){const o=c-.5,t=Math.min(Math.abs(c-l),Math.abs(c-h));i[o]=m?-t:t,c++}m=!m}const f=i.length,S=new Uint8Array(4*f);for(let g=0;g<f;++g){const t=i[g]/r;o(t/a*.5+.5,S,4*g)}return[S,n,s]}function l(t,r){null==t&&(t=[]);const a=\"Butt\"===r,n=\"Square\"===r,s=!a&&!n;t.length%2==1&&(t=[...t,...t]);const i=e,l=2*i;let h=0;for(const o of t)h+=o;const c=Math.round(h*i),m=new Float32Array(c*l),f=.5*i;let S=0,g=0,M=.5,d=!0;for(const o of t){for(S=g,g+=o*i;M<=g;){let o=.5;for(;o<l;){const t=(o-.5)*c+M-.5,r=s?(o-i)*(o-i):Math.abs(o-i);m[t]=d?a?Math.max(Math.max(S+f-M,r),Math.max(M-g+f,r)):r:s?Math.min((M-S)*(M-S)+r,(M-g)*(M-g)+r):n?Math.min(Math.max(M-S,r),Math.max(g-M,r)):Math.min(Math.max(M-S+f,r),Math.max(g+f-M,r)),o++}M++}d=!d}const T=m.length,F=new Uint8Array(4*T);for(let e=0;e<T;++e){const t=(s?Math.sqrt(m[e]):m[e])/i;o(t,F,4*e)}return[F,c,l]}export{l as rasterizeDash,i as rasterizeDash1D,s as rasterizeFillStyle};\n"],"mappings":"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"}