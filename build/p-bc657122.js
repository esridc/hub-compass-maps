import{aN as t,cB as n,bt as o,hF as r,jt as e}from"./p-028496e2.js";import{K as s}from"./p-854d8fad.js";import{e as c}from"./p-94b15954.js";import{j as f}from"./p-3a28ec18.js";const u=new Float64Array(2),a=new Float64Array(2),l="0123456789bcdefghjkmnpqrstuvwxyz",i=64;function h(r,e,u,a){const l=[r.xmin,r.ymin,r.xmax,r.ymax],h=t.fromExtent(n.fromBounds(l,a)),M=f(h,a,o.WGS84,{densificationStep:e*i});if(!M)return null;const m=s(new c,M,!1,!1),j=m.coords.filter(((t,n)=>!(n%2))),d=m.coords.filter(((t,n)=>n%2)),y=Math.min(...j),x=Math.min(...d),b=Math.max(...j),w=Math.max(...d),L=p(y,x,u,o.WGS84),F=p(b,w,u,o.WGS84);return L&&F?{bounds:l,geohashBounds:{xLL:L[0],yLL:L[1],xTR:F[0],yTR:F[1]},level:u}:null}function p(t,n,s,c){if(c.isWebMercator){const o=r(t/e.radius),c=o-360*Math.floor((o+180)/360),f=[0,0];return b(f,0,r(Math.PI/2-2*Math.atan(Math.exp(-n/e.radius))),c,s),f}const u=f({x:t,y:n},c,o.WGS84);if(!u)return null;const a=[0,0];return b(a,0,u.y,u.x,s),a}function M(t){return l[t]}function m(t){return(t[0]+t[1])/2}function j(t,n,o){return t[0]=n,t[1]=o,t}function d(t,n){const o=m(t),r=n,e=!n;t[0]=e*t[0]+r*o,t[1]=e*o+r*t[1]}function y(t,n){const o=n>m(t);return d(t,o),o}function x(t,n){let o=-90,r=90,e=-180,s=180;for(let c=0;c<n;c++){const n=Math.ceil((c+1)/2),f=Math.floor((c+1)/2),u=1-c%2,a=30-(3*n+2*f),l=30-(2*n+3*f),i=3*u+2*(1-u),h=2*u+3*(1-u),p=3*u+7*(1-u)<<l,M=(7*u+3*(1-u)<<a&t.geohashX)>>a,m=(p&t.geohashY)>>l;for(let t=i-1;t>=0;t--){const n=(e+s)/2,o=M&1<<t?1:0;e=(1-o)*e+o*n,s=(1-o)*n+o*s}for(let t=h-1;t>=0;t--){const n=(o+r)/2,e=m&1<<t?1:0;o=(1-e)*o+e*n,r=(1-e)*n+e*r}}return[e,o,s,r]}function b(t,n,o,r,e){e%2&&(e+=1);let s=0,c=0,f=-90,u=90,a=-180,l=180;for(let t=0;t<e/2;t++){for(let n=0;n<5;n++){const o=(a+l)/2,e=r>o?1:0;s|=e<<29-(n+5*t),a=(1-e)*a+e*o,l=(1-e)*o+e*l}for(let n=0;n<5;n++){const r=(f+u)/2,e=o>r?1:0;c|=e<<29-(n+5*t),f=(1-e)*f+e*r,u=(1-e)*r+e*u}}t[2*n]=s,t[2*n+1]=c}function w(t,n,o){let r="";const e=j(u,-90,90),s=j(a,-180,180);for(let c=0;c<o;c++){let o=0;!(c%2)?(o|=y(s,n)<<4,o|=y(e,t)<<3,o|=y(s,n)<<2,o|=y(e,t)<<1,o|=y(s,n)<<0):(o|=y(e,t)<<4,o|=y(s,n)<<3,o|=y(e,t)<<2,o|=y(s,n)<<1,o|=y(e,t)<<0),r+=M(o)}return r}export{p as A,x as R,h as S,w as z};
//# sourceMappingURL=p-bc657122.js.map