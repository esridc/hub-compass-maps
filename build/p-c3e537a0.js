import{ah as t,ai as s,dC as p,dK as i,g2 as o,g3 as r,g4 as e,an as a,ap as m}from"./p-028496e2.js";import{m as h,u as j}from"./p-a29a1b7a.js";import{t as f}from"./p-b3bc59ae.js";import{$ as c}from"./p-eccdd480.js";import"./p-3b51db5e.js";import"./p-d1d0c06b.js";import"./p-95e79972.js";import"./p-b362a32c.js";import"./p-8567e6fe.js";import"./p-711ed159.js";import"./p-262e0e67.js";import"./p-44dc1c97.js";import"./p-eaa7279e.js";import"./p-91f3f02f.js";import"./p-30a1f911.js";import"./p-6f5e77a7.js";import"./p-7b65c278.js";import"./p-94b15954.js";import"./p-6b5df147.js";import"./p-3811f238.js";import"./p-8e631d44.js";import"./p-a925664a.js";import"./p-851e644d.js";import"./p-5c282fdd.js";import"./p-5a65512b.js";import"./p-89242a33.js";import"./p-7580bdba.js";import"./p-a62b18ce.js";import"./p-af8cc455.js";import"./p-b0afd947.js";import"./p-0b0f20ea.js";import"./p-10e5b6ea.js";import"./p-3b8b0ae8.js";import"./p-854d8fad.js";import"./p-1f0b604e.js";import"./p-347800d3.js";import"./p-6339641f.js";import"./p-325c6878.js";import"./p-18b49978.js";import"./p-ecde740d.js";import"./p-3a28ec18.js";import"./p-4f73c6ea.js";import"./p-f87a9f21.js";let n=class extends(h(j)){constructor(){super(...arguments),this._graphicsViewMap={},this._popupTemplates=new Map,this.graphicsViews=[]}async hitTest(t,s){if(!this.graphicsViews.length)return null;const p=this.layer;return this.graphicsViews.reverse().flatMap((s=>{const i=this._popupTemplates.get(s),o=s.hitTest(t);for(const t of o)t.layer=p,t.sourceLayer=p,t.popupTemplate=i;return o})).map((s=>({type:"graphic",graphic:s,layer:p,mapPoint:t})))}update(t){if(this.graphicsViews)for(const s of this.graphicsViews)s.processUpdate(t)}attach(){this.addAttachHandles([t((()=>this.layer?.featureCollections),(t=>{this._clear();for(const{popupInfo:s,featureSet:e,layerDefinition:a}of t){const t=p.fromJSON(e),m=new i(t.features),h=a.drawingInfo,j=s?o.fromJSON(s):null,n=r(h.renderer),d=new c({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:m,renderer:n,container:new f(this.view.featuresTilingScheme)});this._graphicsViewMap[t.geometryType]=d,this._popupTemplates.set(d,j),"polygon"!==t.geometryType||this.layer.polygonSymbol?"polyline"!==t.geometryType||this.layer.lineSymbol?"point"!==t.geometryType||this.layer.pointSymbol||(this.layer.pointSymbol=n.symbol):this.layer.lineSymbol=n.symbol:this.layer.polygonSymbol=n.symbol,this.graphicsViews.push(d),this.container.addChild(d.container)}}),s),t((()=>this.layer?.polygonSymbol),(t=>{this._graphicsViewMap.polygon.renderer=new e({symbol:t})}),s),t((()=>this.layer?.lineSymbol),(t=>{this._graphicsViewMap.polyline.renderer=new e({symbol:t})}),s),t((()=>this.layer?.pointSymbol),(t=>{this._graphicsViewMap.point.renderer=new e({symbol:t})}),s)])}detach(){this._clear()}moveStart(){}moveEnd(){}viewChange(){for(const t of this.graphicsViews)t.viewChange()}_clear(){this.container.removeAllChildren();for(const t of this.graphicsViews)t.destroy();this._graphicsViewMap={},this._popupTemplates.clear(),this.graphicsViews.length=0}};n=a([m("esri.views.2d.layers.GeoRSSLayerView2D")],n);const d=n;export default d;
//# sourceMappingURL=p-c3e537a0.js.map