import{I as t}from"./p-06c101b5.js";import{E as r,f as e,u as n,p as s,d as a,m as i}from"./p-2e68ad5d.js";import"./p-fa12d64c.js";import"./p-aad64c9f.js";import"./p-2af77f97.js";import"./p-74edd46a.js";import"./p-dc645a50.js";import"./p-f9e31f43.js";import"./p-5b459e36.js";import"./p-e91c4d32.js";import"./p-480f4fcd.js";import"./p-7ce0ff48.js";function o(r,e){return e.push(r.buffer),{buffer:r.buffer,layout:new t(r.layout)}}class c{async extract(t){const r=p(t),n=e(r),s=[r.data.buffer];return{result:f(n,s),transferList:s}}async extractComponentsEdgeLocations(t){const r=p(t),e=n(r.data,r.skipDeduplicate,r.indices,r.indicesLength),a=s(e,m),i=[];return{result:o(a.regular.instancesData,i),transferList:i}}async extractEdgeLocations(t){const r=p(t),e=n(r.data,r.skipDeduplicate,r.indices,r.indicesLength),a=s(e,l),i=[];return{result:o(a.regular.instancesData,i),transferList:i}}}function p(t){return{data:r.createView(t.dataBuffer),indices:"Uint32Array"===t.indicesType?new Uint32Array(t.indices):"Uint16Array"===t.indicesType?new Uint16Array(t.indices):t.indices,indicesLength:t.indicesLength,writerSettings:t.writerSettings,skipDeduplicate:t.skipDeduplicate}}function f(t,r){r.push(t.regular.lodInfo.lengths.buffer),r.push(t.silhouette.lodInfo.lengths.buffer);return{regular:{instancesData:o(t.regular.instancesData,r),lodInfo:{lengths:t.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:o(t.silhouette.instancesData,r),lodInfo:{lengths:t.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:t.averageEdgeLength}}class u{allocate(t){return a.createBuffer(t)}trim(t,r){return t.slice(0,r)}write(t,r,e){t.position0.setVec(r,e.position0),t.position1.setVec(r,e.position1)}}class d{allocate(t){return i.createBuffer(t)}trim(t,r){return t.slice(0,r)}write(t,r,e){t.position0.setVec(r,e.position0),t.position1.setVec(r,e.position1),t.componentIndex.set(r,e.componentIndex)}}const l=new u,m=new d;export default c;
//# sourceMappingURL=p-fe650af8.js.map