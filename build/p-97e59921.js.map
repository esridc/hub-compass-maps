{"version":3,"names":["w","constructor","t","this","_ownsRctx","_rctx","_instance","_instanceRefCount","document","createElement","e","c","getExtension","g","applyProjection","bilinear","bicubic","r","m","Map","_program","programCache","acquire","shaders","vertexShader","fragmentShader","attributes","useProgram","setUniform1f","setUniform1i","_quad","o","reprojectTexture","s","n","extent","x","xmax","xmin","texture","descriptor","width","y","ymax","ymin","height","spatialReference","i","f","Math","round","b","j","D","a","projectedExtent","srcBufferExtent","pixelSize","hasWrapAround","spacing","R","_","T","l","wrapMode","p","CLAMP_TO_EDGE","C","d","bindFramebuffer","setViewport","bindTexture","bind","E","setUniform2f","setUniform2fv","size","draw","unbind","dispose","ImageData","readPixels","h","RGBA","UNSIGNED_BYTE","data","detachColorTexture","u","COLOR_ATTACHMENT0","imageData","U","reprojectBitmapData","bitmapData","getContext","putImageData","async","responseType","drawImage","getImageData","equals","destroy","allSublayers","allPoints","allPolylines","allPolygons","allMapImages","I","super","arguments","_bitmapIndex","_mapImageContainer","V","_kmlVisualData","_fetchController","allVisiblePoints","allVisiblePolylines","allVisiblePolygons","allVisibleMapImages","layer","_pointsView","hitTest","_polylinesView","_polygonsView","flat","filter","Boolean","map","sourceLayer","type","graphic","mapPoint","update","processUpdate","attach","AbortController","container","addChild","S","view","graphics","requestUpdateCallback","requestUpdate","v","featuresTilingScheme","addAttachHandles","on","added","forEach","_addMapImage","removed","_removeMapImage","visibleSublayers","visibility","get","id","_refreshCollections","_updatingHandles","addPromise","_fetchService","signal","_imageReprojector","detach","removeAllChildren","clear","moveStart","viewChange","moveEnd","isUpdating","updating","isWGS84","isWebMercator","loadAndReprojectBitmapData","href","fromJSON","then","resolution","rotation","set","viewFormat","viewBoundScale","httpQuery","Error","expand","WGS84","WebMercator","pixelRatio","max","toString","center","replace","query","path","_loadVisualData","url","removeAll","addMany","_isSublayerVisible","sublayerId","item","parentFolderId","_fetchParsedKML","sublayers","points","polylines","polygons","mapImages","push","networkLink","_getViewDependentUrl","state","refreshInterval","removeChild","delete","prototype","k"],"sources":["./node_modules/@arcgis/core/views/support/imageReprojection.js","./node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport t from\"../../request.js\";import e from\"../../geometry/Point.js\";import{project as r}from\"../../geometry/projection.js\";import{projectResolution as i,getProjectionOffsetGrid as a}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{isImageSource as s,rasterize as n}from\"../2d/engine/Bitmap.js\";import o from\"../2d/engine/webgl/VertexStream.js\";import{createProgramTemplate as m}from\"../2d/engine/webgl/shaders/MaterialPrograms.js\";import{createContext as c}from\"../webgl/contextUtils.js\";import{TextureWrapMode as p,PixelFormat as h,PixelType as x,ColorAttachment as u}from\"../webgl/enums.js\";import{FramebufferObject as d}from\"../webgl/FramebufferObject.js\";import{createTransformTexture as _}from\"../webgl/rasterUtils.js\";import{RenderingContext as g}from\"../webgl/RenderingContext.js\";import{Texture as f}from\"../webgl/Texture.js\";import{TextureDescriptor as l}from\"../webgl/TextureDescriptor.js\";class w{constructor(t){if(this._ownsRctx=!1,t)this._ownsRctx=!1,this._rctx=t;else{if(w._instance)return w._instanceRefCount++,w._instance;w._instanceRefCount=1,w._instance=this,this._ownsRctx=!0;const t=document.createElement(\"canvas\"),e=c(t);e.getExtension(\"OES_texture_float\"),this._rctx=new g(e,{})}const e={applyProjection:!0,bilinear:!1,bicubic:!1},r=m(\"raster/reproject\",\"raster/reproject\",new Map([[\"a_position\",0]]),e);this._program=this._rctx.programCache.acquire(r.shaders.vertexShader,r.shaders.fragmentShader,r.attributes),this._rctx.useProgram(this._program),this._program.setUniform1f(\"u_opacity\",1),this._program.setUniform1i(\"u_image\",0),this._program.setUniform1i(\"u_flipY\",0),this._program.setUniform1i(\"u_transformGrid\",1),this._quad=new o(this._rctx,[0,0,1,0,0,1,1,1])}reprojectTexture(t,s,n=!1){const o=r(t.extent,s),m=new e({x:(t.extent.xmax-t.extent.xmin)/t.texture.descriptor.width,y:(t.extent.ymax-t.extent.ymin)/t.texture.descriptor.height,spatialReference:t.extent.spatialReference}),{x:c,y:g}=i(m,s,t.extent);let f=(c+g)/2;const w=Math.round((o.xmax-o.xmin)/f),b=Math.round((o.ymax-o.ymin)/f);f=(o.width/w+o.height/b)/2;const j=new e({x:f,y:f,spatialReference:o.spatialReference}),D=a({projectedExtent:o,srcBufferExtent:t.extent,pixelSize:j,hasWrapAround:!0,spacing:[16,16]}),R=_(this._rctx,D),T=new l(w,b);T.wrapMode=p.CLAMP_TO_EDGE;const C=new d(this._rctx,T);this._rctx.bindFramebuffer(C),this._rctx.setViewport(0,0,w,b),this._rctx.useProgram(this._program),this._rctx.bindTexture(t.texture,0),this._rctx.bindTexture(R,1),this._quad.bind();const{width:y=0,height:E=0}=t.texture.descriptor;if(this._program.setUniform2f(\"u_srcImageSize\",y,E),this._program.setUniform2fv(\"u_transformSpacing\",D.spacing),this._program.setUniform2fv(\"u_transformGridSize\",D.size),this._program.setUniform2f(\"u_targetImageSize\",w,b),this._quad.draw(),this._quad.unbind(),this._rctx.useProgram(null),this._rctx.bindFramebuffer(null),R.dispose(),n){const{width:t,height:e}=C,r=new ImageData(t??0,e??0);C.readPixels(0,0,t??0,e??0,h.RGBA,x.UNSIGNED_BYTE,r.data);const i=C.detachColorTexture(u.COLOR_ATTACHMENT0);return C.dispose(),{texture:i,extent:o,imageData:r}}const U=C.detachColorTexture(u.COLOR_ATTACHMENT0);return C.dispose(),{texture:U,extent:o}}reprojectBitmapData(t,e){const r=s(t.bitmapData)?n(t.bitmapData):t.bitmapData,i=new l;i.wrapMode=p.CLAMP_TO_EDGE,i.width=t.bitmapData.width,i.height=t.bitmapData.height;const a=new f(this._rctx,i,r),o=this.reprojectTexture({texture:a,extent:t.extent},e,!0);o.texture.dispose();const m=document.createElement(\"canvas\"),c=o.imageData;m.width=c.width,m.height=c.height;return m.getContext(\"2d\").putImageData(c,0,0),{bitmapData:m,extent:o.extent}}async loadAndReprojectBitmapData(e,r,i){const a=(await t(e,{responseType:\"image\"})).data,s=document.createElement(\"canvas\");s.width=a.width,s.height=a.height;const n=s.getContext(\"2d\");n.drawImage(a,0,0);const o=n.getImageData(0,0,s.width,s.height);if(r.spatialReference.equals(i))return{bitmapData:o,extent:r};const m=this.reprojectBitmapData({bitmapData:o,extent:r},i);return{bitmapData:m.bitmapData,extent:m.extent}}destroy(){this._ownsRctx?(w._instanceRefCount--,0===w._instanceRefCount&&(this._quad.dispose(),this._program.dispose(),this._rctx.dispose(),w._instance=null)):(this._quad.dispose(),this._program.dispose())}}w._instanceRefCount=0;export{w as ImageReprojector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{version as i}from\"../../../kernel.js\";import t from\"../../../core/Collection.js\";import{abortMaybe as s,destroyMaybe as a}from\"../../../core/maybe.js\";import{watch as o}from\"../../../core/reactiveUtils.js\";import{queryToObject as l,objectToQuery as r}from\"../../../core/urlUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../geometry/Extent.js\";import{load as m,project as c}from\"../../../geometry/projection.js\";import d from\"../../../geometry/SpatialReference.js\";import{getGraphics as y,fetchService as g,parseKML as w}from\"../../../layers/support/kmlUtils.js\";import{parseUrl as u}from\"../../../rest/utils.js\";import{GraphicsCollection as _}from\"../../../support/GraphicsCollection.js\";import{Bitmap as b}from\"../engine/Bitmap.js\";import{BitmapContainer as V}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as f}from\"./LayerView2D.js\";import v from\"./graphics/GraphicContainer.js\";import S from\"./graphics/GraphicsView2D.js\";import I from\"../../layers/LayerView.js\";import{ImageReprojector as x}from\"../../support/imageReprojection.js\";class C{constructor(){this.allSublayers=new Map,this.allPoints=[],this.allPolylines=[],this.allPolygons=[],this.allMapImages=[]}}let j=class extends(f(I)){constructor(){super(...arguments),this._bitmapIndex=new Map,this._mapImageContainer=new V,this._kmlVisualData=new C,this._fetchController=null,this.allVisiblePoints=new _,this.allVisiblePolylines=new _,this.allVisiblePolygons=new _,this.allVisibleMapImages=new t}async hitTest(e,i){const t=this.layer;return[this._pointsView?.hitTest(e),this._polylinesView?.hitTest(e),this._polygonsView?.hitTest(e)].flat().filter(Boolean).map((i=>(i.layer=t,i.sourceLayer=t,{type:\"graphic\",graphic:i,layer:t,mapPoint:e})))}update(e){this._polygonsView&&this._polygonsView.processUpdate(e),this._polylinesView&&this._polylinesView.processUpdate(e),this._pointsView&&this._pointsView.processUpdate(e)}attach(){this._fetchController=new AbortController,this.container.addChild(this._mapImageContainer),this._polygonsView=new S({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:()=>this.requestUpdate(),container:new v(this.view.featuresTilingScheme)}),this.container.addChild(this._polygonsView.container),this._polylinesView=new S({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:()=>this.requestUpdate(),container:new v(this.view.featuresTilingScheme)}),this.container.addChild(this._polylinesView.container),this._pointsView=new S({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:()=>this.requestUpdate(),container:new v(this.view.featuresTilingScheme)}),this.container.addChild(this._pointsView.container),this.addAttachHandles([this.allVisibleMapImages.on(\"change\",(e=>{e.added.forEach((e=>this._addMapImage(e))),e.removed.forEach((e=>this._removeMapImage(e)))})),o((()=>this.layer.visibleSublayers),(e=>{for(const[i,t]of this._kmlVisualData.allSublayers)t.visibility=0;for(const i of e){const e=this._kmlVisualData.allSublayers.get(i.id);e&&(e.visibility=1)}this._refreshCollections()}))]),this._updatingHandles.addPromise(this._fetchService(this._fetchController.signal)),this._imageReprojector=new x}detach(){this._fetchController=s(this._fetchController),this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView=a(this._polygonsView),this._polylinesView=a(this._polylinesView),this._pointsView=a(this._pointsView),this._imageReprojector=a(this._imageReprojector)}moveStart(){}viewChange(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()}moveEnd(){}isUpdating(){return this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating}_addMapImage(e){(this.view.spatialReference?.isWGS84||this.view.spatialReference?.isWebMercator)&&this._imageReprojector.loadAndReprojectBitmapData(e.href,p.fromJSON(e.extent),this.view.spatialReference).then((i=>{const t=new b(i.bitmapData);t.x=i.extent.xmin,t.y=i.extent.ymax,t.resolution=i.extent.width/i.bitmapData.width,t.rotation=e.rotation,this._mapImageContainer.addChild(t),this._bitmapIndex.set(e,t)}))}async _getViewDependentUrl(e,t){const{viewFormat:s,viewBoundScale:a,httpQuery:o}=e;if(null!=s){if(null==t)throw new Error(\"Loading this network link requires a view state.\");let n;if(await m(),null!=a&&1!==a){const e=new p(t.extent);e.expand(a),n=e}else n=t.extent;n=c(n,d.WGS84);const h=c(n,d.WebMercator),y=n.xmin,g=n.xmax,w=n.ymin,_=n.ymax,b=t.size[0]*t.pixelRatio,V=t.size[1]*t.pixelRatio,f=Math.max(h.width,h.height),v={\"[bboxWest]\":y.toString(),\"[bboxEast]\":g.toString(),\"[bboxSouth]\":w.toString(),\"[bboxNorth]\":_.toString(),\"[lookatLon]\":n.center.x.toString(),\"[lookatLat]\":n.center.y.toString(),\"[lookatRange]\":f.toString(),\"[lookatTilt]\":\"0\",\"[lookatHeading]\":t.rotation.toString(),\"[lookatTerrainLon]\":n.center.x.toString(),\"[lookatTerrainLat]\":n.center.y.toString(),\"[lookatTerrainAlt]\":\"0\",\"[cameraLon]\":n.center.x.toString(),\"[cameraLat]\":n.center.y.toString(),\"[cameraAlt]\":f.toString(),\"[horizFov]\":\"60\",\"[vertFov]\":\"60\",\"[horizPixels]\":b.toString(),\"[vertPixels]\":V.toString(),\"[terrainEnabled]\":\"0\",\"[clientVersion]\":i,\"[kmlVersion]\":\"2.2\",\"[clientName]\":\"ArcGIS API for JavaScript\",\"[language]\":\"en-US\"},S=e=>{for(const i in e){let t;for(t in v)e[i]=e[i].replace(t,v[t])}},I=l(s);S(I);let x={};null!=o&&(x=l(o),S(x));const C=u(e.href);C.query={...C.query,...I,...x};return`${C.path}?${r(I)}`}return e.href}async _fetchService(e){const i=new C;await this._loadVisualData(this.layer.url,i,e),this._kmlVisualData=i,this._refreshCollections()}_refreshCollections(){this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),this.allVisiblePoints.addMany(this._kmlVisualData.allPoints.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolylines.addMany(this._kmlVisualData.allPolylines.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolygons.addMany(this._kmlVisualData.allPolygons.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisibleMapImages.addMany(this._kmlVisualData.allMapImages.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e)))}_isSublayerVisible(e){const i=this._kmlVisualData.allSublayers.get(e);return!!i?.visibility&&(-1===i.parentFolderId||this._isSublayerVisible(i.parentFolderId))}_loadVisualData(e,i,t){return this._fetchParsedKML(e,t).then((async e=>{for(const s of e.sublayers){i.allSublayers.set(s.id,s);const e=s.points?await y(s.points):[],a=s.polylines?await y(s.polylines):[],o=s.polygons?await y(s.polygons):[],l=s.mapImages||[];if(i.allPoints.push(...e.map((e=>({item:e,sublayerId:s.id})))),i.allPolylines.push(...a.map((e=>({item:e,sublayerId:s.id})))),i.allPolygons.push(...o.map((e=>({item:e,sublayerId:s.id})))),i.allMapImages.push(...l.map((e=>({item:e,sublayerId:s.id})))),s.networkLink){const e=await this._getViewDependentUrl(s.networkLink,this.view.state);await this._loadVisualData(e,i,t)}}}))}_fetchParsedKML(e,i){return g(e,this.layer.spatialReference,this.layer.refreshInterval,i).then((e=>w(e.data)))}_removeMapImage(e){const i=this._bitmapIndex.get(e);i&&(this._mapImageContainer.removeChild(i),this._bitmapIndex.delete(e))}};e([n()],j.prototype,\"_pointsView\",void 0),e([n()],j.prototype,\"_polylinesView\",void 0),e([n()],j.prototype,\"_polygonsView\",void 0),e([n()],j.prototype,\"updating\",void 0),j=e([h(\"esri.views.2d.layers.KMLLayerView2D\")],j);const k=j;export{k as default};\n"],"mappings":"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"}