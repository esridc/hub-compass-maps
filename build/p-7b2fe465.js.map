{"version":3,"names":["e","constructor","E","t","T","r","_","i","u","n","this","createQuery","deleteQuery","resultAvailable","getResult","disjoint","beginTimeElapsed","endTimeElapsed","createTimestamp","timestampBits","disjointTimerQuery","getExtension","getQueryParameter","QUERY_RESULT_AVAILABLE","QUERY_RESULT","getParameter","GPU_DISJOINT_EXT","beginQuery","TIME_ELAPSED_EXT","endQuery","queryCounterEXT","TIMESTAMP_EXT","getQuery","QUERY_COUNTER_BITS_EXT","createQueryEXT","deleteQueryEXT","getQueryObjectEXT","QUERY_RESULT_AVAILABLE_EXT","QUERY_RESULT_EXT","beginQueryEXT","endQueryEXT","getQueryEXT","_result","dispose","_program","s","result","_test","f","g","super","_rctx","programCache","acquire","Map","gl","l","c","wrapMode","CLAMP_TO_EDGE","samplingMode","o","NEAREST","w","m","v","createVertex","STATIC_DRAW","Uint16Array","x","d","geometry","h","LINEAR","b","useProgram","bindTexture","setUniform1i","A","getBoundFramebufferObject","y","width","j","height","C","getViewport","bindFramebuffer","setViewport","setClearColor","setBlendingEnabled","clearSafe","COLOR_BUFFER_BIT","bindVAO","drawArrays","TRIANGLE_STRIP","Uint8Array","readPixels","a","RGBA","p","UNSIGNED_BYTE","Image","src","decode"],"sources":["./node_modules/@arcgis/core/views/webgl/capabilities/DisjointTimerQuery.js","./node_modules/@arcgis/core/views/webgl/WebGLDriverTestModule.js","./node_modules/@arcgis/core/views/webgl/testSVGPremultipliedAlpha.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nclass e{constructor(e,E,t,T,r,_,i,u,n){this.createQuery=e,this.deleteQuery=E,this.resultAvailable=t,this.getResult=T,this.disjoint=r,this.beginTimeElapsed=_,this.endTimeElapsed=i,this.createTimestamp=u,this.timestampBits=n}}let E=!1;function t(t,T){if(T.disjointTimerQuery)return null;let r=t.getExtension(\"EXT_disjoint_timer_query_webgl2\");return r?new e((()=>t.createQuery()),(e=>{t.deleteQuery(e),E=!1}),(e=>t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE)),(e=>t.getQueryParameter(e,t.QUERY_RESULT)),(()=>t.getParameter(r.GPU_DISJOINT_EXT)),(e=>{E||(E=!0,t.beginQuery(r.TIME_ELAPSED_EXT,e))}),(()=>{t.endQuery(r.TIME_ELAPSED_EXT),E=!1}),(e=>r.queryCounterEXT(e,r.TIMESTAMP_EXT)),(()=>t.getQuery(r.TIMESTAMP_EXT,r.QUERY_COUNTER_BITS_EXT))):(r=t.getExtension(\"EXT_disjoint_timer_query\"),r?new e((()=>r.createQueryEXT()),(e=>{r.deleteQueryEXT(e),E=!1}),(e=>r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT)),(e=>r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)),(()=>t.getParameter(r.GPU_DISJOINT_EXT)),(e=>{E||(E=!0,r.beginQueryEXT(r.TIME_ELAPSED_EXT,e))}),(()=>{r.endQueryEXT(r.TIME_ELAPSED_EXT),E=!1}),(e=>r.queryCounterEXT(e,r.TIMESTAMP_EXT)),(()=>r.getQueryEXT(r.TIMESTAMP_EXT,r.QUERY_COUNTER_BITS_EXT))):null)}export{e as DisjointTimerQuery,t as createDisjointTimerQuery,E as hasRunningElapsedTimer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{disposeMaybe as s}from\"../../core/maybe.js\";class t{constructor(){this._result=!1}dispose(){this._program=s(this._program)}get result(){return null!=this._program&&(this._result=this._test(this._program),this.dispose()),this._result}}export{t as WebGLDriverTestModule};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{Pos2us as e}from\"../2d/engine/webgl/DefaultVertexAttributeLayouts.js\";import{BufferObject as r}from\"./BufferObject.js\";import{TextureWrapMode as t,TextureSamplingMode as o,Usage as n,ClearBufferBit as s,PrimitiveType as i,PixelFormat as a,PixelType as p}from\"./enums.js\";import{FramebufferObject as m}from\"./FramebufferObject.js\";import{Texture as u}from\"./Texture.js\";import{TextureDescriptor as c}from\"./TextureDescriptor.js\";import{VertexArrayObject as d}from\"./VertexArrayObject.js\";import{WebGLDriverTestModule as g}from\"./WebGLDriverTestModule.js\";class f extends g{constructor(e){super(),this._rctx=e;const r=\"\\n    precision highp float;\\n\\n    attribute vec2 a_pos;\\n    varying vec2 v_uv;\\n\\n    void main() {\\n      v_uv = a_pos;\\n      gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n    }\\n    \",t=\"\\n    precision highp float;\\n\\n    varying vec2 v_uv;\\n\\n    uniform sampler2D u_texture;\\n\\n    void main() {\\n      gl_FragColor = texture2D(u_texture, v_uv);\\n    }\\n    \";this._program=e.programCache.acquire(r,t,new Map([[\"a_pos\",0]]))}dispose(){super.dispose()}_test(g){const f=this._rctx;if(!f.gl)return g.dispose(),!0;const l=new c(1);l.wrapMode=t.CLAMP_TO_EDGE,l.samplingMode=o.NEAREST;const w=new m(f,l),v=r.createVertex(f,n.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),x=new d(f,new Map([[\"a_pos\",0]]),e,{geometry:v}),h=new c;h.samplingMode=o.LINEAR,h.wrapMode=t.CLAMP_TO_EDGE;const b=new u(f,h,_);f.useProgram(g),f.bindTexture(b,0),g.setUniform1i(\"u_texture\",0);const A=f.getBoundFramebufferObject(),{x:E,y:T,width:j,height:C}=f.getViewport();f.bindFramebuffer(w),f.setViewport(0,0,1,1),f.setClearColor(0,0,0,0),f.setBlendingEnabled(!1),f.clearSafe(s.COLOR_BUFFER_BIT),f.bindVAO(x),f.drawArrays(i.TRIANGLE_STRIP,0,4);const y=new Uint8Array(4);return w.readPixels(0,0,1,1,a.RGBA,p.UNSIGNED_BYTE,y),x.dispose(),w.dispose(),b.dispose(),f.setViewport(E,T,j,C),f.bindFramebuffer(A),255!==y[0]}}const _=new Image;_.src=\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A\",_.width=5,_.height=5,_.decode();export{f as SVGPremultipliedAlpha};\n"],"mappings":"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"}