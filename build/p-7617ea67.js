import{h as t}from"./p-f1aede5a.js";var e;!function(t){t[t.moveTo=1]="moveTo",t[t.lineTo=2]="lineTo",t[t.close=7]="close"}(e||(e={}));class s{constructor(t,e,s=0){this.values={},this._geometry=void 0,this._pbfGeometry=null,this.featureIndex=s;const r=e.keys,a=e.values,i=t.asUnsafe();for(;i.next();)switch(i.tag()){case 1:this.id=i.getUInt64();break;case 2:{const t=i.getMessage().asUnsafe(),e=this.values;for(;!t.empty();){const s=t.getUInt32(),i=t.getUInt32();e[r[s]]=a[i]}t.release();break}case 3:this.type=i.getUInt32();break;case 4:this._pbfGeometry=i.getMessage();break;default:i.skip()}}getGeometry(s){if(void 0!==this._geometry)return this._geometry;if(!this._pbfGeometry)return null;const r=this._pbfGeometry.asUnsafe();let a,i;this._pbfGeometry=null,s?s.reset(this.type):a=[];let c,n=e.moveTo,h=0,o=0,u=0;for(;!r.empty();){if(0===h){const t=r.getUInt32();n=7&t,h=t>>3}switch(h--,n){case e.moveTo:o+=r.getSInt32(),u+=r.getSInt32(),s?s.moveTo(o,u):a&&(i&&a.push(i),i=[],i.push(new t(o,u)));break;case e.lineTo:o+=r.getSInt32(),u+=r.getSInt32(),s?s.lineTo(o,u):i&&i.push(new t(o,u));break;case e.close:s?s.close():i&&!i[0].equals(o,u)&&i.push(i[0].clone());break;default:throw r.release(),new Error("Invalid path operation")}}return s?c=s.result():a&&(i&&a.push(i),c=a),r.release(),this._geometry=c,c}}class r{constructor(t){this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=t.clone();const e=t.asUnsafe();for(;e.next();)switch(e.tag()){case 1:this.name=e.getString();break;case 3:this.keys.push(e.getString());break;case 4:this.values.push(e.processMessage(r._parseValue));break;case 5:this.extent=e.getUInt32();break;default:e.skip()}}getData(){return this._pbfLayer}static _parseValue(t){for(;t.next();)switch(t.tag()){case 1:return t.getString();case 2:return t.getFloat();case 3:return t.getDouble();case 4:return t.getInt64();case 5:return t.getUInt64();case 6:return t.getSInt64();case 7:return t.getBool();default:t.skip()}return null}}export{r as e,s};
//# sourceMappingURL=p-7617ea67.js.map