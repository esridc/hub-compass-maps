import{c as t,a3 as r,U as n}from"./p-aad64c9f.js";import{c as s,p as e}from"./p-d5a66c42.js";class i{constructor(t,r,n){this.assetName=t,this.assetMimeType=r,this.parts=n}equals(r){return this===r||this.assetName===r.assetName&&this.assetMimeType===r.assetMimeType&&t(this.parts,r.parts,((t,r)=>t.equals(r)))}isOnService(t){return this.parts.every((r=>r.isOnService(t)))}makeHash(){let t="";for(const r of this.parts)t+=r.partHash;return t}async toBlob(t){const{parts:n}=this;if(1===n.length)return n[0].toBlob(t);const s=await Promise.all(n.map((r=>r.toBlob(t))));return r(t),new Blob(s)}}class o{constructor(t,r){this.partUrl=t,this.partHash=r}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(t){const{data:s}=await n(this.partUrl,{responseType:"blob"});return r(t),s}}function u(t){return h(t?.source)}function c(t){if(!Array.isArray(t))return!1;return t.every((t=>t instanceof i))}const f=/^(model\/gltf\+json)|(model\/gltf-binary)$/,a=/\.(gltf|glb)/i;function h(t){if(!t)return!1;if(Array.isArray(t)){return t.some(l)}return l(t)}function l(t){if(t instanceof File){const{type:r,name:n}=t;return f.test(r)||a.test(n)}return f.test(t.assetMimeType)||a.test(t.assetName)}function p(t,r){if(!t)return!1;const{source:n}=t;return y(n,r)}function m(t,r){if(t===r)return!0;const{source:n}=t,{source:s}=r;if(n===s)return!0;if(c(n)&&c(s)){if(n.length!==s.length)return!1;const t=(t,r)=>t.assetName<r.assetName?-1:t.assetName>r.assetName?1:0,r=[...n].sort(t),e=[...s].sort(t);for(let t=0;t<r.length;++t)if(!r[t].equals(e[t]))return!1;return!0}return!1}function y(t,r){if(Array.isArray(t)){const n=t;return n.length>0&&n.every((t=>b(t,r)))}return b(t,r)}function b(t,r){return t instanceof i&&t.isOnService(r)}function d(t,r){return t instanceof File?s(t,r):e(t.assetMimeType,t.assetName,r)}function g(t){return Array.isArray(t)?t:[t]}function A(t){return!!t.original}export{A,g as N,i as a,d as b,m as h,o as i,p as m,u as o};
//# sourceMappingURL=p-cde3f633.js.map