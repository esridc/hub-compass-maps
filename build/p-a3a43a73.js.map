{"version":3,"names":["CSS","container","TOOLTIP_OPEN_DELAY_MS","TOOLTIP_CLOSE_DELAY_MS","ARIA_DESCRIBED_BY","getEffectiveReferenceElement","tooltip","referenceElement","queryElementRoots","id","TooltipManager","constructor","this","registeredElements","WeakMap","registeredShadowRootCounts","hoverOpenTimeout","hoverCloseTimeout","hoveredTooltip","clickedTooltip","activeTooltip","registeredElementCount","queryTooltip","composedPath","registeredElement","find","pathEl","has","get","keyDownHandler","event","key","defaultPrevented","open","clearHoverTimeout","closeActiveTooltip","Element","contains","target","preventDefault","pointerMoveHandler","hoveringActiveTooltip","includes","isClosableClickedTooltip","openHoveredTooltip","closeHoveredTooltip","clickHandler","closeOnClick","toggleTooltip","focusInHandler","queryFocusedTooltip","focusOutHandler","window","setTimeout","clearHoverCloseTimeout","registerElement","referenceEl","set","shadowRoot","getReferenceElShadowRootNode","registerShadowRoot","addListeners","unregisterElement","unregisterShadowRoot","delete","removeListeners","addShadowListeners","addEventListener","capture","removeShadowListeners","removeEventListener","clearHoverOpenTimeout","clearTimeout","toggleFocusedTooltip","newCount","getShadowRootNode","tooltipCss","manager","Tooltip","proxyCustomElement","HTMLElement","super","__registerHost","__attachShadow","calciteTooltipBeforeClose","createEvent","calciteTooltipClose","calciteTooltipBeforeOpen","calciteTooltipOpen","guid","hasLoaded","openTransitionProp","setTransitionEl","el","transitionEl","setUpReferenceElement","warn","removeReferences","effectiveReferenceElement","connectFloatingUI","console","tagName","addReferences","getId","setAttribute","removeAttribute","label","undefined","offsetDistance","defaultOffsetDistance","offsetSkidding","overlayPositioning","placement","floatingLayout","offsetDistanceOffsetHandler","reposition","offsetSkiddingHandler","openHandler","onToggleOpenCloseComponent","overlayPositioningHandler","placementHandler","referenceElementHandler","connectedCallback","async","componentDidLoad","disconnectedCallback","disconnectFloatingUI","delayed","arrowEl","floatingEl","type","onBeforeOpen","emit","onOpen","onBeforeClose","onClose","render","displayed","hidden","h","Host","toAriaBoolean","role","class","FloatingCSS","animation","animationActive","ref","FloatingArrow","watchers","style","defineCustomElement$1","customElements","components","forEach","define","CalciteTooltip","defineCustomElement"],"sources":["./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/calcite-tooltip.js"],"sourcesContent":["/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.\n * v2.7.0\n */\nimport { proxyCustomElement, HTMLElement, createEvent, h, Host } from '@stencil/core/internal/client/index.js';\nimport { q as queryElementRoots, E as getShadowRootNode, t as toAriaBoolean } from './dom.js';\nimport { c as connectFloatingUI, d as defaultOffsetDistance, a as disconnectFloatingUI, r as reposition, F as FloatingCSS } from './floating-ui.js';\nimport { g as guid } from './guid.js';\nimport { o as onToggleOpenCloseComponent } from './openCloseComponent.js';\nimport { F as FloatingArrow } from './FloatingArrow.js';\n\nconst CSS = {\n    container: \"container\",\n};\nconst TOOLTIP_OPEN_DELAY_MS = 300;\nconst TOOLTIP_CLOSE_DELAY_MS = 500;\nconst ARIA_DESCRIBED_BY = \"aria-describedby\";\n\nfunction getEffectiveReferenceElement(tooltip) {\n    const { referenceElement } = tooltip;\n    return ((typeof referenceElement === \"string\" ? queryElementRoots(tooltip, { id: referenceElement }) : referenceElement) ||\n        null);\n}\n\nclass TooltipManager {\n    constructor() {\n        // --------------------------------------------------------------------------\n        //\n        //  Private Properties\n        //\n        // --------------------------------------------------------------------------\n        this.registeredElements = new WeakMap();\n        this.registeredShadowRootCounts = new WeakMap();\n        this.hoverOpenTimeout = null;\n        this.hoverCloseTimeout = null;\n        this.hoveredTooltip = null;\n        this.clickedTooltip = null;\n        this.activeTooltip = null;\n        this.registeredElementCount = 0;\n        // --------------------------------------------------------------------------\n        //\n        //  Private Methods\n        //\n        // --------------------------------------------------------------------------\n        this.queryTooltip = (composedPath) => {\n            const { registeredElements } = this;\n            const registeredElement = composedPath.find((pathEl) => registeredElements.has(pathEl));\n            return registeredElements.get(registeredElement);\n        };\n        this.keyDownHandler = (event) => {\n            if (event.key === \"Escape\" && !event.defaultPrevented) {\n                const { activeTooltip } = this;\n                if (activeTooltip?.open) {\n                    this.clearHoverTimeout();\n                    this.closeActiveTooltip();\n                    const referenceElement = getEffectiveReferenceElement(activeTooltip);\n                    if (referenceElement instanceof Element && referenceElement.contains(event.target)) {\n                        event.preventDefault();\n                    }\n                }\n            }\n        };\n        this.pointerMoveHandler = (event) => {\n            const composedPath = event.composedPath();\n            const { activeTooltip } = this;\n            const hoveringActiveTooltip = activeTooltip?.open && composedPath.includes(activeTooltip);\n            if (hoveringActiveTooltip) {\n                this.clearHoverTimeout();\n                return;\n            }\n            const tooltip = this.queryTooltip(composedPath);\n            this.hoveredTooltip = tooltip;\n            if (this.isClosableClickedTooltip(tooltip)) {\n                return;\n            }\n            this.clickedTooltip = null;\n            if (tooltip) {\n                this.openHoveredTooltip(tooltip);\n            }\n            else if (activeTooltip) {\n                this.closeHoveredTooltip();\n            }\n        };\n        this.clickHandler = (event) => {\n            const clickedTooltip = this.queryTooltip(event.composedPath());\n            this.clickedTooltip = clickedTooltip;\n            if (clickedTooltip?.closeOnClick) {\n                this.toggleTooltip(clickedTooltip, false);\n                this.clearHoverTimeout();\n            }\n        };\n        this.focusInHandler = (event) => {\n            this.queryFocusedTooltip(event, true);\n        };\n        this.focusOutHandler = (event) => {\n            this.queryFocusedTooltip(event, false);\n        };\n        this.openHoveredTooltip = (tooltip) => {\n            this.hoverOpenTimeout = window.setTimeout(() => {\n                if (this.hoverOpenTimeout === null) {\n                    return;\n                }\n                this.clearHoverCloseTimeout();\n                if (this.activeTooltip === this.hoveredTooltip) {\n                    return;\n                }\n                this.closeActiveTooltip();\n                if (tooltip !== this.hoveredTooltip) {\n                    return;\n                }\n                this.toggleTooltip(tooltip, true);\n            }, this.activeTooltip ? 0 : TOOLTIP_OPEN_DELAY_MS);\n        };\n        this.closeHoveredTooltip = () => {\n            this.hoverCloseTimeout = window.setTimeout(() => {\n                if (this.hoverCloseTimeout === null) {\n                    return;\n                }\n                this.closeActiveTooltip();\n            }, TOOLTIP_CLOSE_DELAY_MS);\n        };\n    }\n    // --------------------------------------------------------------------------\n    //\n    //  Public Methods\n    //\n    // --------------------------------------------------------------------------\n    registerElement(referenceEl, tooltip) {\n        this.registeredElementCount++;\n        this.registeredElements.set(referenceEl, tooltip);\n        const shadowRoot = this.getReferenceElShadowRootNode(referenceEl);\n        if (shadowRoot) {\n            this.registerShadowRoot(shadowRoot);\n        }\n        if (this.registeredElementCount === 1) {\n            this.addListeners();\n        }\n    }\n    unregisterElement(referenceEl) {\n        const shadowRoot = this.getReferenceElShadowRootNode(referenceEl);\n        if (shadowRoot) {\n            this.unregisterShadowRoot(shadowRoot);\n        }\n        if (this.registeredElements.delete(referenceEl)) {\n            this.registeredElementCount--;\n        }\n        if (this.registeredElementCount === 0) {\n            this.removeListeners();\n        }\n    }\n    addShadowListeners(shadowRoot) {\n        shadowRoot.addEventListener(\"focusin\", this.focusInHandler, { capture: true });\n        shadowRoot.addEventListener(\"focusout\", this.focusOutHandler, { capture: true });\n    }\n    removeShadowListeners(shadowRoot) {\n        shadowRoot.removeEventListener(\"focusin\", this.focusInHandler, { capture: true });\n        shadowRoot.removeEventListener(\"focusout\", this.focusOutHandler, { capture: true });\n    }\n    addListeners() {\n        window.addEventListener(\"keydown\", this.keyDownHandler, { capture: true });\n        window.addEventListener(\"pointermove\", this.pointerMoveHandler, { capture: true });\n        window.addEventListener(\"click\", this.clickHandler, { capture: true });\n        window.addEventListener(\"focusin\", this.focusInHandler, { capture: true });\n        window.addEventListener(\"focusout\", this.focusOutHandler, { capture: true });\n    }\n    removeListeners() {\n        window.removeEventListener(\"keydown\", this.keyDownHandler, { capture: true });\n        window.removeEventListener(\"pointermove\", this.pointerMoveHandler, { capture: true });\n        window.removeEventListener(\"click\", this.clickHandler, { capture: true });\n        window.removeEventListener(\"focusin\", this.focusInHandler, { capture: true });\n        window.removeEventListener(\"focusout\", this.focusOutHandler, { capture: true });\n    }\n    clearHoverOpenTimeout() {\n        window.clearTimeout(this.hoverOpenTimeout);\n        this.hoverOpenTimeout = null;\n    }\n    clearHoverCloseTimeout() {\n        window.clearTimeout(this.hoverCloseTimeout);\n        this.hoverCloseTimeout = null;\n    }\n    clearHoverTimeout() {\n        this.clearHoverOpenTimeout();\n        this.clearHoverCloseTimeout();\n    }\n    closeActiveTooltip() {\n        const { activeTooltip } = this;\n        if (activeTooltip?.open) {\n            this.toggleTooltip(activeTooltip, false);\n        }\n    }\n    toggleFocusedTooltip(tooltip, open) {\n        this.closeActiveTooltip();\n        if (open) {\n            this.clearHoverTimeout();\n        }\n        this.toggleTooltip(tooltip, open);\n    }\n    toggleTooltip(tooltip, open) {\n        tooltip.open = open;\n        this.activeTooltip = open ? tooltip : null;\n    }\n    queryFocusedTooltip(event, open) {\n        const tooltip = this.queryTooltip(event.composedPath());\n        if (!tooltip || this.isClosableClickedTooltip(tooltip)) {\n            return;\n        }\n        this.toggleFocusedTooltip(tooltip, open);\n    }\n    isClosableClickedTooltip(tooltip) {\n        return tooltip?.closeOnClick && tooltip === this.clickedTooltip;\n    }\n    registerShadowRoot(shadowRoot) {\n        const { registeredShadowRootCounts } = this;\n        const newCount = (registeredShadowRootCounts.get(shadowRoot) ?? 0) + 1;\n        if (newCount === 1) {\n            this.addShadowListeners(shadowRoot);\n        }\n        registeredShadowRootCounts.set(shadowRoot, newCount);\n    }\n    unregisterShadowRoot(shadowRoot) {\n        const { registeredShadowRootCounts } = this;\n        const newCount = registeredShadowRootCounts.get(shadowRoot) - 1;\n        if (newCount === 0) {\n            this.removeShadowListeners(shadowRoot);\n        }\n        registeredShadowRootCounts.set(shadowRoot, newCount);\n    }\n    getReferenceElShadowRootNode(referenceEl) {\n        return referenceEl instanceof Element ? getShadowRootNode(referenceEl) : null;\n    }\n}\n\nconst tooltipCss = \":host{--calcite-floating-ui-z-index:var(--calcite-tooltip-z-index, var(--calcite-z-index-tooltip));display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{transform:translateY(-5px)}:host([data-placement^=top]) .calcite-floating-ui-anim{transform:translateY(5px)}:host([data-placement^=left]) .calcite-floating-ui-anim{transform:translateX(5px)}:host([data-placement^=right]) .calcite-floating-ui-anim{transform:translateX(-5px)}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}.container{position:relative;overflow:hidden;border-radius:0.25rem;padding-block:0.75rem;padding-inline:1rem;font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);max-inline-size:20rem;max-block-size:20rem;text-align:start}.calcite-floating-ui-anim{border-radius:0.25rem;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3);background-color:var(--calcite-color-foreground-1)}.arrow::before{outline:1px solid var(--calcite-color-border-3)}:host([hidden]){display:none}[hidden]{display:none}\";\n\nconst manager = new TooltipManager();\nconst Tooltip = /*@__PURE__*/ proxyCustomElement(class Tooltip extends HTMLElement {\n    constructor() {\n        super();\n        this.__registerHost();\n        this.__attachShadow();\n        this.calciteTooltipBeforeClose = createEvent(this, \"calciteTooltipBeforeClose\", 6);\n        this.calciteTooltipClose = createEvent(this, \"calciteTooltipClose\", 6);\n        this.calciteTooltipBeforeOpen = createEvent(this, \"calciteTooltipBeforeOpen\", 6);\n        this.calciteTooltipOpen = createEvent(this, \"calciteTooltipOpen\", 6);\n        this.guid = `calcite-tooltip-${guid()}`;\n        this.hasLoaded = false;\n        this.openTransitionProp = \"opacity\";\n        this.setTransitionEl = (el) => {\n            this.transitionEl = el;\n        };\n        this.setUpReferenceElement = (warn = true) => {\n            this.removeReferences();\n            this.effectiveReferenceElement = getEffectiveReferenceElement(this.el);\n            connectFloatingUI(this, this.effectiveReferenceElement, this.el);\n            const { el, referenceElement, effectiveReferenceElement } = this;\n            if (warn && referenceElement && !effectiveReferenceElement) {\n                console.warn(`${el.tagName}: reference-element id \"${referenceElement}\" was not found.`, {\n                    el,\n                });\n            }\n            this.addReferences();\n        };\n        this.getId = () => {\n            return this.el.id || this.guid;\n        };\n        this.addReferences = () => {\n            const { effectiveReferenceElement } = this;\n            if (!effectiveReferenceElement) {\n                return;\n            }\n            const id = this.getId();\n            if (\"setAttribute\" in effectiveReferenceElement) {\n                effectiveReferenceElement.setAttribute(ARIA_DESCRIBED_BY, id);\n            }\n            manager.registerElement(effectiveReferenceElement, this.el);\n        };\n        this.removeReferences = () => {\n            const { effectiveReferenceElement } = this;\n            if (!effectiveReferenceElement) {\n                return;\n            }\n            if (\"removeAttribute\" in effectiveReferenceElement) {\n                effectiveReferenceElement.removeAttribute(ARIA_DESCRIBED_BY);\n            }\n            manager.unregisterElement(effectiveReferenceElement);\n        };\n        this.closeOnClick = false;\n        this.label = undefined;\n        this.offsetDistance = defaultOffsetDistance;\n        this.offsetSkidding = 0;\n        this.open = false;\n        this.overlayPositioning = \"absolute\";\n        this.placement = \"auto\";\n        this.referenceElement = undefined;\n        this.effectiveReferenceElement = undefined;\n        this.floatingLayout = \"vertical\";\n    }\n    offsetDistanceOffsetHandler() {\n        this.reposition(true);\n    }\n    offsetSkiddingHandler() {\n        this.reposition(true);\n    }\n    openHandler() {\n        onToggleOpenCloseComponent(this);\n        this.reposition(true);\n    }\n    overlayPositioningHandler() {\n        this.reposition(true);\n    }\n    placementHandler() {\n        this.reposition(true);\n    }\n    referenceElementHandler() {\n        this.setUpReferenceElement();\n    }\n    // --------------------------------------------------------------------------\n    //\n    //  Lifecycle\n    //\n    // --------------------------------------------------------------------------\n    connectedCallback() {\n        this.setUpReferenceElement(this.hasLoaded);\n        if (this.open) {\n            onToggleOpenCloseComponent(this);\n        }\n        connectFloatingUI(this, this.effectiveReferenceElement, this.el);\n    }\n    async componentWillLoad() {\n        if (this.open) {\n            onToggleOpenCloseComponent(this);\n        }\n    }\n    componentDidLoad() {\n        if (this.referenceElement && !this.effectiveReferenceElement) {\n            this.setUpReferenceElement();\n        }\n        connectFloatingUI(this, this.effectiveReferenceElement, this.el);\n        this.hasLoaded = true;\n    }\n    disconnectedCallback() {\n        this.removeReferences();\n        disconnectFloatingUI(this, this.effectiveReferenceElement, this.el);\n    }\n    // --------------------------------------------------------------------------\n    //\n    //  Public Methods\n    //\n    // --------------------------------------------------------------------------\n    /**\n     * Updates the position of the component.\n     *\n     * @param delayed\n     */\n    async reposition(delayed = false) {\n        const { el, effectiveReferenceElement, placement, overlayPositioning, offsetDistance, offsetSkidding, arrowEl, } = this;\n        return reposition(this, {\n            floatingEl: el,\n            referenceEl: effectiveReferenceElement,\n            overlayPositioning,\n            placement,\n            offsetDistance,\n            offsetSkidding,\n            arrowEl,\n            type: \"tooltip\",\n        }, delayed);\n    }\n    // --------------------------------------------------------------------------\n    //\n    //  Private Methods\n    //\n    // --------------------------------------------------------------------------\n    onBeforeOpen() {\n        this.calciteTooltipBeforeOpen.emit();\n    }\n    onOpen() {\n        this.calciteTooltipOpen.emit();\n    }\n    onBeforeClose() {\n        this.calciteTooltipBeforeClose.emit();\n    }\n    onClose() {\n        this.calciteTooltipClose.emit();\n    }\n    // --------------------------------------------------------------------------\n    //\n    //  Render Methods\n    //\n    // --------------------------------------------------------------------------\n    render() {\n        const { effectiveReferenceElement, label, open, floatingLayout } = this;\n        const displayed = effectiveReferenceElement && open;\n        const hidden = !displayed;\n        return (h(Host, { \"aria-hidden\": toAriaBoolean(hidden), \"aria-label\": label, \"aria-live\": \"polite\", \"calcite-hydrated-hidden\": hidden, id: this.getId(), role: \"tooltip\" }, h(\"div\", { class: {\n                [FloatingCSS.animation]: true,\n                [FloatingCSS.animationActive]: displayed,\n            },\n            // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n            ref: this.setTransitionEl }, h(FloatingArrow, { floatingLayout: floatingLayout,\n            // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n            ref: (arrowEl) => (this.arrowEl = arrowEl) }), h(\"div\", { class: CSS.container }, h(\"slot\", null)))));\n    }\n    get el() { return this; }\n    static get watchers() { return {\n        \"offsetDistance\": [\"offsetDistanceOffsetHandler\"],\n        \"offsetSkidding\": [\"offsetSkiddingHandler\"],\n        \"open\": [\"openHandler\"],\n        \"overlayPositioning\": [\"overlayPositioningHandler\"],\n        \"placement\": [\"placementHandler\"],\n        \"referenceElement\": [\"referenceElementHandler\"]\n    }; }\n    static get style() { return tooltipCss; }\n}, [1, \"calcite-tooltip\", {\n        \"closeOnClick\": [516, \"close-on-click\"],\n        \"label\": [1],\n        \"offsetDistance\": [514, \"offset-distance\"],\n        \"offsetSkidding\": [514, \"offset-skidding\"],\n        \"open\": [516],\n        \"overlayPositioning\": [513, \"overlay-positioning\"],\n        \"placement\": [513],\n        \"referenceElement\": [1, \"reference-element\"],\n        \"effectiveReferenceElement\": [32],\n        \"floatingLayout\": [32],\n        \"reposition\": [64]\n    }, undefined, {\n        \"offsetDistance\": [\"offsetDistanceOffsetHandler\"],\n        \"offsetSkidding\": [\"offsetSkiddingHandler\"],\n        \"open\": [\"openHandler\"],\n        \"overlayPositioning\": [\"overlayPositioningHandler\"],\n        \"placement\": [\"placementHandler\"],\n        \"referenceElement\": [\"referenceElementHandler\"]\n    }]);\nfunction defineCustomElement$1() {\n    if (typeof customElements === \"undefined\") {\n        return;\n    }\n    const components = [\"calcite-tooltip\"];\n    components.forEach(tagName => { switch (tagName) {\n        case \"calcite-tooltip\":\n            if (!customElements.get(tagName)) {\n                customElements.define(tagName, Tooltip);\n            }\n            break;\n    } });\n}\ndefineCustomElement$1();\n\nconst CalciteTooltip = Tooltip;\nconst defineCustomElement = defineCustomElement$1;\n\nexport { CalciteTooltip, defineCustomElement };\n\n//# sourceMappingURL=calcite-tooltip.js.map"],"mappings":"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"}