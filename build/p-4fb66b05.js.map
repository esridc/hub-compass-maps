{"version":3,"names":["i","constructor","t","r","e","this","assetName","assetMimeType","parts","equals","isOnService","every","makeHash","partHash","async","length","toBlob","s","Promise","all","map","Blob","o","partUrl","startsWith","path","data","responseType","u","p","source","c","Array","isArray","f","l","some","m","File","type","name","test","h","g","y","sort","n","b","N","a","A","v","original"],"sources":["./node_modules/@arcgis/core/geometry/support/meshUtils/External.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport t from\"../../../request.js\";import{equals as r}from\"../../../core/arrayUtils.js\";import{throwIfAborted as e}from\"../../../core/promiseUtils.js\";import{getFileFormatId as s,getMimeTypeFormatId as n,getFilenameFormatId as a}from\"../../../layers/support/infoFor3D.js\";class i{constructor(t,r,e){this.assetName=t,this.assetMimeType=r,this.parts=e}equals(t){return this===t||this.assetName===t.assetName&&this.assetMimeType===t.assetMimeType&&r(this.parts,t.parts,((t,r)=>t.equals(r)))}isOnService(t){return this.parts.every((r=>r.isOnService(t)))}makeHash(){let t=\"\";for(const r of this.parts)t+=r.partHash;return t}async toBlob(t){const{parts:r}=this;if(1===r.length)return r[0].toBlob(t);const s=await Promise.all(r.map((r=>r.toBlob(t))));return e(t),new Blob(s)}}class o{constructor(t,r){this.partUrl=t,this.partHash=r}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(r){const{data:s}=await t(this.partUrl,{responseType:\"blob\"});return e(r),s}}function u(t){return p(t?.source)}function c(t){if(!Array.isArray(t))return!1;return t.every((t=>t instanceof i))}const f=/^(model\\/gltf\\+json)|(model\\/gltf-binary)$/,l=/\\.(gltf|glb)/i;function p(t){if(!t)return!1;if(Array.isArray(t)){return t.some(m)}return m(t)}function m(t){if(t instanceof File){const{type:r,name:e}=t;return f.test(r)||l.test(e)}return f.test(t.assetMimeType)||l.test(t.assetName)}function h(t,r){if(!t)return!1;const{source:e}=t;return g(e,r)}function y(t,r){if(t===r)return!0;const{source:e}=t,{source:s}=r;if(e===s)return!0;if(c(e)&&c(s)){if(e.length!==s.length)return!1;const t=(t,r)=>t.assetName<r.assetName?-1:t.assetName>r.assetName?1:0,r=[...e].sort(t),n=[...s].sort(t);for(let e=0;e<r.length;++e)if(!r[e].equals(n[e]))return!1;return!0}return!1}function g(t,r){if(Array.isArray(t)){const e=t;return e.length>0&&e.every((t=>b(t,r)))}return b(t,r)}function b(t,r){return t instanceof i&&t.isOnService(r)}function N(t,r){return t instanceof File?s(t,r):n(t.assetMimeType,r)??a(t.assetName,r)}function A(t){return Array.isArray(t)?t:[t]}function v(t){return!!t.original}export{i as ServiceAsset,o as ServiceAssetPart,N as assetFormatId,b as assetIsOnService,h as externalIsOnService,A as externalSourceToMultiPart,y as externalSourcesAreEqual,m as isDisplayAsset,u as isDisplayExternal,p as isDisplaySource,v as isOriginalExternal,g as sourceIsOnService};\n"],"mappings":"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"}