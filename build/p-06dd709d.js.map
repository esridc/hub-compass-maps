{"version":3,"names":["e","t","type","o","symbolLayers","length","n","markerGraphics","r","geometry","symbol","some","effects","geom","asFill","l","rings","paths","xmin","ymin","xmax","ymax","i","s","f","m","a","c","u","y","h","Math","floor","x","max","M","round","p","g","d","b","w","C","I","width","height","push","Array","sqrt","Uint8Array"],"sources":["./node_modules/@arcgis/core/symbols/cim/SDFHelper.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{packFloatRGBA as t}from\"../../core/floatRGBA.js\";import{isExtent as o}from\"../../geometry/support/jsonUtils.js\";import n from\"./Rect.js\";import{spritePadding as r}from\"../../views/2d/engine/webgl/definitions.js\";function e(t){switch(t.type){case\"CIMPointSymbol\":{const o=t.symbolLayers;if(!o||1!==o.length)return null;const n=o[0];return\"CIMVectorMarker\"!==n.type?null:e(n)}case\"CIMVectorMarker\":{const o=t.markerGraphics;if(!o||1!==o.length)return null;const n=o[0];if(!n)return null;const r=n.geometry;if(!r)return null;const e=n.symbol;return!e||\"CIMPolygonSymbol\"!==e.type&&\"CIMLineSymbol\"!==e.type||e.symbolLayers?.some((t=>!!t.effects))?null:{type:\"sdf\",geom:r,asFill:\"CIMPolygonSymbol\"===e.type}}}}function l(t){return t?t.rings?t.rings:t.paths?t.paths:void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:null:null}function i(t){let o=1/0,r=-1/0,e=1/0,l=-1/0;for(const n of t)for(const t of n)t[0]<o&&(o=t[0]),t[0]>r&&(r=t[0]),t[1]<e&&(e=t[1]),t[1]>l&&(l=t[1]);return new n(o,e,r-o,l-e)}function s(t){let o=1/0,n=-1/0,r=1/0,e=-1/0;for(const l of t)for(const t of l)t[0]<o&&(o=t[0]),t[0]>n&&(n=t[0]),t[1]<r&&(r=t[1]),t[1]>e&&(e=t[1]);return[o,r,n,e]}function f(t){return t?t.rings?s(t.rings):t.paths?s(t.paths):o(t)?[t.xmin,t.ymin,t.xmax,t.ymax]:null:null}function m(t,o,n,e,l){const[i,s,f,m]=t;if(f<i||m<s)return[0,0,0,1];const a=f-i,c=m-s,u=128,y=r,h=Math.floor(.5*(.5*u-y)),x=(u-2*(h+y))/Math.max(a,c),M=Math.round(a*x)+2*h,p=Math.round(c*x)+2*h;let g=1;if(o){g=p/x/(o.ymax-o.ymin)}let d=0,b=0,w=1;e&&(l?o&&n&&o.ymax-o.ymin>0&&(w=(o.xmax-o.xmin)/(o.ymax-o.ymin),d=e.x/(n*w),b=e.y/n):(d=e.x,b=e.y)),o&&(d=.5*(o.xmax+o.xmin)+d*(o.xmax-o.xmin),b=.5*(o.ymax+o.ymin)+b*(o.ymax-o.ymin)),d-=i,b-=s,d*=x,b*=x,d+=h,b+=h;let C=d/M-.5,I=b/p-.5;return l&&n&&(C*=n*w,I*=n),[g,C,I,w]}function a(t){const o=l(t.geom),n=i(o),e=128,s=r,f=Math.floor(.5*(.5*e-s)),m=(e-2*(f+s))/Math.max(n.width,n.height),a=Math.round(n.width*m)+2*f,h=Math.round(n.height*m)+2*f,x=[];for(const r of o)if(r&&r.length>1){const o=[];for(const e of r){let[r,l]=e;r-=n.x,l-=n.y,r*=m,l*=m,r+=f-.5,l+=f-.5,t.asFill?o.push([r,l]):o.push([Math.round(r),Math.round(l)])}if(t.asFill){const t=o.length-1;o[0][0]===o[t][0]&&o[0][1]===o[t][1]||o.push(o[0])}x.push(o)}const M=c(x,a,h,f);return t.asFill&&u(x,a,h,f,M),[y(M,f),a,h]}function c(t,o,n,r){const e=o*n,l=new Array(e),i=r*r+1;for(let s=0;s<e;++s)l[s]=i;for(const s of t){const t=s.length;for(let e=1;e<t;++e){const t=s[e-1],i=s[e];let f,m,a,c;t[0]<i[0]?(f=t[0],m=i[0]):(f=i[0],m=t[0]),t[1]<i[1]?(a=t[1],c=i[1]):(a=i[1],c=t[1]);let u=Math.floor(f)-r,y=Math.floor(m)+r,h=Math.floor(a)-r,x=Math.floor(c)+r;u<0&&(u=0),y>o&&(y=o),h<0&&(h=0),x>n&&(x=n);const M=i[0]-t[0],p=i[1]-t[1],g=M*M+p*p;for(let r=u;r<y;r++)for(let e=h;e<x;e++){let s,f,m=(r-t[0])*M+(e-t[1])*p;m<0?(s=t[0],f=t[1]):m>g?(s=i[0],f=i[1]):(m/=g,s=t[0]+m*M,f=t[1]+m*p);const a=(r-s)*(r-s)+(e-f)*(e-f),c=(n-e-1)*o+r;a<l[c]&&(l[c]=a)}}}for(let s=0;s<e;++s)l[s]=Math.sqrt(l[s]);return l}function u(t,o,n,r,e){for(const l of t){const t=l.length;for(let i=1;i<t;++i){const t=l[i-1],s=l[i];let f,m,a,c;t[0]<s[0]?(f=t[0],m=s[0]):(f=s[0],m=t[0]),t[1]<s[1]?(a=t[1],c=s[1]):(a=s[1],c=t[1]);let u=Math.floor(f),y=Math.floor(m)+1,h=Math.floor(a),x=Math.floor(c)+1;u<r&&(u=r),y>o-r&&(y=o-r),h<r&&(h=r),x>n-r&&(x=n-r);for(let l=h;l<x;++l){if(t[1]>l==s[1]>l)continue;const i=(n-l-1)*o;for(let o=u;o<y;++o)o<(s[0]-t[0])*(l-t[1])/(s[1]-t[1])+t[0]&&(e[i+o]=-e[i+o]);for(let t=r;t<u;++t)e[i+t]=-e[i+t]}}}}function y(o,n){const r=2*n,e=o.length,l=new Uint8Array(4*e);for(let i=0;i<e;++i){const n=.5-o[i]/r;t(n,l,4*i)}return l}export{a as buildSDF,f as getExtent,e as getSDFInfo,m as getSDFMetrics};\n"],"mappings":"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"}