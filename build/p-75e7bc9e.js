import{t}from"./p-2db650ee.js";async function e(e,n){const{loadContext:a,...i}=n||{},o=a?await a.fetchServiceMetadata(e,i):await t(e,i);u(o),r(o);const c={serviceJSON:o};if((o.currentVersion??0)<10.5)return c;const s=`${e}/layers`,f=a?await a.fetchServiceMetadata(s,i):await t(s,i);return u(f),r(f),c.layersJSON={layers:f.layers,tables:f.tables},c}function n(t){return"Feature Layer"===t.type||"Oriented Imagery Layer"===t.type}function a(t){return"Table"===t.type}function r(t){t.layers=t.layers?.filter(n),t.tables=t.tables?.filter(a)}function i(t){t.type||="Feature Layer"}function o(t){t.type||="Table"}function u(t){t.layers?.forEach(i),t.tables?.forEach(o)}export{e as t};
//# sourceMappingURL=p-75e7bc9e.js.map