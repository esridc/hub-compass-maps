{"version":3,"names":["SLOTS","dropdownTrigger","dropdownCss","CalciteDropdownStyle0","Dropdown","proxyCustomElement","HTMLElement","constructor","super","this","__registerHost","__attachShadow","calciteDropdownSelect","createEvent","calciteDropdownBeforeClose","calciteDropdownClose","calciteDropdownBeforeOpen","calciteDropdownOpen","items","groups","mutationObserver","createObserver","updateItems","resizeObserver","entries","resizeObserverCallback","openTransitionProp","guid","focusLastDropdownItem","setFilteredPlacements","el","flipPlacements","filteredFlipPlacements","filterValidFlipPlacements","updateTriggers","event","triggers","target","assignedElements","flatten","reposition","map","group","Array","from","querySelectorAll","reduce","previousValue","currentValue","updateSelectedItems","forEach","item","scale","updateGroups","filter","matches","updateGroupScale","entry","referenceEl","setDropdownWidth","scrollerEl","setMaxScrollerHeight","referenceElWidth","clientWidth","style","minWidth","maxScrollerHeight","getMaxScrollerHeight","maxHeight","setScrollerAndTransitionEl","observe","transitionEl","setReferenceEl","connectFloatingUI","floatingEl","setFloatingEl","keyDownHandler","composedPath","includes","defaultPrevented","key","closeCalciteDropdown","preventDefault","open","shiftKey","isActivationKey","toggleDropdown","addEventListener","onOpenEnd","focusOnFirstActiveOrDefaultItem","selectedItem","getTraversableItems","find","selected","length","focusElement","removeEventListener","closeOnSelectDisabled","disabled","undefined","maxItems","overlayPositioning","placement","defaultMenuPlacement","selectedItems","type","widthScale","openHandler","onToggleOpenCloseComponent","handleDisabledChange","value","flipPlacementsHandler","maxItemsHandler","overlayPositioningHandler","placementHandler","handlePropsChange","async","componentFocusable","focusFirstTabbable","connectedCallback","childList","subtree","componentWillLoad","setUpLoadableComponent","componentDidLoad","setComponentLoaded","componentDidRender","updateHostInteraction","disconnectedCallback","disconnect","disconnectFloatingUI","render","h","Host","InteractiveContainer","class","id","onClick","onKeyDown","ref","toAriaBoolean","name","onSlotchange","FloatingCSS","animation","animationActive","role","delayed","closeCalciteDropdownOnClick","closeCalciteDropdownOnEvent","stopPropagation","closeCalciteDropdownOnOpenEvent","pointerEnterHandler","pointerLeaveHandler","hidden","calciteInternalDropdownItemKeyEvent","keyboardEvent","detail","traversableItems","updateTabIndexOfItems","focusElementInGroup","handleItemSelect","emit","requestedDropdownGroup","selectionMode","onBeforeOpen","onOpen","onBeforeClose","onClose","itemsToProcess","groupHeaderHeight","children","index","isNaN","offsetTop","offsetHeight","focusTrigger","tabIndex","delegatesFocus","watchers","setFocus","defineCustomElement","customElements","components","tagName","get","define","CalciteDropdown","defineCustomElement$1"],"sources":["./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/dropdown.js","./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/calcite-dropdown.js"],"sourcesContent":["/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\n * v2.13.2\n */\nimport { proxyCustomElement, HTMLElement, createEvent, h, Host } from '@stencil/core/internal/client';\nimport { e as focusElement, f as focusFirstTabbable, t as toAriaBoolean, v as focusElementInGroup } from './dom.js';\nimport { f as filterValidFlipPlacements, c as connectFloatingUI, e as defaultMenuPlacement, a as disconnectFloatingUI, F as FloatingCSS, r as reposition } from './floating-ui.js';\nimport { g as guid } from './guid.js';\nimport { u as updateHostInteraction, I as InteractiveContainer } from './interactive.js';\nimport { i as isActivationKey } from './key.js';\nimport { c as componentFocusable, s as setUpLoadableComponent, a as setComponentLoaded } from './loadable.js';\nimport { c as createObserver } from './observers.js';\nimport { o as onToggleOpenCloseComponent } from './openCloseComponent.js';\n\nconst SLOTS = {\n    dropdownTrigger: \"trigger\",\n};\n\nconst dropdownCss = \":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host .calcite-dropdown-wrapper{--calcite-floating-ui-z-index:var(--calcite-z-index-dropdown);display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index);visibility:hidden}.calcite-dropdown-wrapper .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset, left, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}.calcite-dropdown-wrapper[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.calcite-dropdown-wrapper[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.calcite-dropdown-wrapper[data-placement^=left] .calcite-floating-ui-anim{left:5px}.calcite-dropdown-wrapper[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.calcite-dropdown-wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block:0;left:0}:host([open]) .calcite-dropdown-wrapper{visibility:visible}:host .calcite-dropdown-content{max-block-size:45vh;inline-size:auto;overflow-y:auto;overflow-x:hidden;background-color:var(--calcite-color-foreground-1);inline-size:var(--calcite-dropdown-width)}.calcite-trigger-container{position:relative;display:flex;block-size:100%;flex:1 1 auto;word-wrap:break-word;word-break:break-word}@media (forced-colors: active){:host([open]) .calcite-dropdown-wrapper{border:1px solid canvasText}}:host([width-scale=s]){--calcite-dropdown-width:12rem}:host([width-scale=m]){--calcite-dropdown-width:14rem}:host([width-scale=l]){--calcite-dropdown-width:16rem}:host([hidden]){display:none}[hidden]{display:none}\";\nconst CalciteDropdownStyle0 = dropdownCss;\n\nconst Dropdown = /*@__PURE__*/ proxyCustomElement(class Dropdown extends HTMLElement {\n    constructor() {\n        super();\n        this.__registerHost();\n        this.__attachShadow();\n        this.calciteDropdownSelect = createEvent(this, \"calciteDropdownSelect\", 6);\n        this.calciteDropdownBeforeClose = createEvent(this, \"calciteDropdownBeforeClose\", 6);\n        this.calciteDropdownClose = createEvent(this, \"calciteDropdownClose\", 6);\n        this.calciteDropdownBeforeOpen = createEvent(this, \"calciteDropdownBeforeOpen\", 6);\n        this.calciteDropdownOpen = createEvent(this, \"calciteDropdownOpen\", 6);\n        this.items = [];\n        this.groups = [];\n        this.mutationObserver = createObserver(\"mutation\", () => this.updateItems());\n        this.resizeObserver = createObserver(\"resize\", (entries) => this.resizeObserverCallback(entries));\n        this.openTransitionProp = \"opacity\";\n        this.guid = `calcite-dropdown-${guid()}`;\n        this.focusLastDropdownItem = false;\n        //--------------------------------------------------------------------------\n        //\n        //  Private Methods\n        //\n        //--------------------------------------------------------------------------\n        this.setFilteredPlacements = () => {\n            const { el, flipPlacements } = this;\n            this.filteredFlipPlacements = flipPlacements\n                ? filterValidFlipPlacements(flipPlacements, el)\n                : null;\n        };\n        this.updateTriggers = (event) => {\n            this.triggers = event.target.assignedElements({\n                flatten: true,\n            });\n            this.reposition(true);\n        };\n        this.updateItems = () => {\n            this.items = this.groups\n                .map((group) => Array.from(group?.querySelectorAll(\"calcite-dropdown-item\")))\n                .reduce((previousValue, currentValue) => [...previousValue, ...currentValue], []);\n            this.updateSelectedItems();\n            this.reposition(true);\n            this.items.forEach((item) => (item.scale = this.scale));\n        };\n        this.updateGroups = (event) => {\n            const groups = event.target\n                .assignedElements({ flatten: true })\n                .filter((el) => el?.matches(\"calcite-dropdown-group\"));\n            this.groups = groups;\n            this.updateItems();\n            this.updateGroupScale();\n        };\n        this.resizeObserverCallback = (entries) => {\n            entries.forEach((entry) => {\n                const { target } = entry;\n                if (target === this.referenceEl) {\n                    this.setDropdownWidth();\n                }\n                else if (target === this.scrollerEl) {\n                    this.setMaxScrollerHeight();\n                }\n            });\n        };\n        this.setDropdownWidth = () => {\n            const { referenceEl, scrollerEl } = this;\n            const referenceElWidth = referenceEl?.clientWidth;\n            if (!referenceElWidth || !scrollerEl) {\n                return;\n            }\n            scrollerEl.style.minWidth = `${referenceElWidth}px`;\n        };\n        this.setMaxScrollerHeight = () => {\n            const { scrollerEl } = this;\n            if (!scrollerEl) {\n                return;\n            }\n            this.reposition(true);\n            const maxScrollerHeight = this.getMaxScrollerHeight();\n            scrollerEl.style.maxHeight = maxScrollerHeight > 0 ? `${maxScrollerHeight}px` : \"\";\n            this.reposition(true);\n        };\n        this.setScrollerAndTransitionEl = (el) => {\n            this.resizeObserver.observe(el);\n            this.scrollerEl = el;\n            this.transitionEl = el;\n        };\n        this.setReferenceEl = (el) => {\n            this.referenceEl = el;\n            connectFloatingUI(this, this.referenceEl, this.floatingEl);\n            this.resizeObserver.observe(el);\n        };\n        this.setFloatingEl = (el) => {\n            this.floatingEl = el;\n            connectFloatingUI(this, this.referenceEl, this.floatingEl);\n        };\n        this.keyDownHandler = (event) => {\n            if (!event.composedPath().includes(this.referenceEl)) {\n                return;\n            }\n            const { defaultPrevented, key } = event;\n            if (defaultPrevented) {\n                return;\n            }\n            if (key === \"Escape\") {\n                this.closeCalciteDropdown();\n                event.preventDefault();\n                return;\n            }\n            if (this.open && event.shiftKey && key === \"Tab\") {\n                this.closeCalciteDropdown();\n                event.preventDefault();\n                return;\n            }\n            if (isActivationKey(key)) {\n                this.toggleDropdown();\n                event.preventDefault();\n            }\n            else if (key === \"ArrowDown\" || key === \"ArrowUp\") {\n                this.focusLastDropdownItem = key === \"ArrowUp\";\n                this.open = true;\n                this.el.addEventListener(\"calciteDropdownOpen\", this.onOpenEnd);\n            }\n        };\n        this.focusOnFirstActiveOrDefaultItem = () => {\n            const selectedItem = this.getTraversableItems().find((item) => item.selected);\n            const target = selectedItem ||\n                (this.focusLastDropdownItem ? this.items[this.items.length - 1] : this.items[0]);\n            this.focusLastDropdownItem = false;\n            if (!target) {\n                return;\n            }\n            focusElement(target);\n        };\n        this.onOpenEnd = () => {\n            this.focusOnFirstActiveOrDefaultItem();\n            this.el.removeEventListener(\"calciteDropdownOpen\", this.onOpenEnd);\n        };\n        this.toggleDropdown = () => {\n            this.open = !this.open;\n            if (this.open) {\n                this.el.addEventListener(\"calciteDropdownOpen\", this.onOpenEnd);\n            }\n        };\n        this.open = false;\n        this.closeOnSelectDisabled = false;\n        this.disabled = false;\n        this.flipPlacements = undefined;\n        this.maxItems = 0;\n        this.overlayPositioning = \"absolute\";\n        this.placement = defaultMenuPlacement;\n        this.selectedItems = [];\n        this.type = \"click\";\n        this.widthScale = undefined;\n        this.scale = \"m\";\n    }\n    openHandler() {\n        onToggleOpenCloseComponent(this);\n        if (this.disabled) {\n            this.open = false;\n            return;\n        }\n        this.reposition(true);\n    }\n    handleDisabledChange(value) {\n        if (!value) {\n            this.open = false;\n        }\n    }\n    flipPlacementsHandler() {\n        this.setFilteredPlacements();\n        this.reposition(true);\n    }\n    maxItemsHandler() {\n        this.setMaxScrollerHeight();\n    }\n    overlayPositioningHandler() {\n        this.reposition(true);\n    }\n    placementHandler() {\n        this.reposition(true);\n    }\n    handlePropsChange() {\n        this.updateItems();\n        this.updateGroupScale();\n    }\n    //--------------------------------------------------------------------------\n    //\n    //  Public Methods\n    //\n    //--------------------------------------------------------------------------\n    /** Sets focus on the component's first focusable element. */\n    async setFocus() {\n        await componentFocusable(this);\n        focusFirstTabbable(this.referenceEl);\n    }\n    //--------------------------------------------------------------------------\n    //\n    //  Lifecycle\n    //\n    //--------------------------------------------------------------------------\n    connectedCallback() {\n        this.mutationObserver?.observe(this.el, { childList: true, subtree: true });\n        this.setFilteredPlacements();\n        if (this.open) {\n            this.openHandler();\n            onToggleOpenCloseComponent(this);\n        }\n        this.updateItems();\n        connectFloatingUI(this, this.referenceEl, this.floatingEl);\n    }\n    componentWillLoad() {\n        setUpLoadableComponent(this);\n    }\n    componentDidLoad() {\n        setComponentLoaded(this);\n        connectFloatingUI(this, this.referenceEl, this.floatingEl);\n    }\n    componentDidRender() {\n        updateHostInteraction(this);\n    }\n    disconnectedCallback() {\n        this.mutationObserver?.disconnect();\n        this.resizeObserver?.disconnect();\n        disconnectFloatingUI(this, this.referenceEl, this.floatingEl);\n    }\n    render() {\n        const { open, guid } = this;\n        return (h(Host, { key: '377c3d9687bc025f004b4efe58bfa5f0893d86d0' }, h(InteractiveContainer, { key: '9e2f48be045fc6db10cc7203a8b998ec2b6abafd', disabled: this.disabled }, h(\"div\", { key: '8607de2d53a4f8c4b29206ee56aa23ad4c2cbe3d', class: \"calcite-trigger-container\", id: `${guid}-menubutton`, onClick: this.toggleDropdown, onKeyDown: this.keyDownHandler, ref: this.setReferenceEl }, h(\"slot\", { key: '07de8df34055ddc39301654a5ca312ddf293e6a9', \"aria-controls\": `${guid}-menu`, \"aria-expanded\": toAriaBoolean(open), \"aria-haspopup\": \"menu\", name: SLOTS.dropdownTrigger, onSlotchange: this.updateTriggers })), h(\"div\", { key: 'c1469efb62eb704b021ce6479ad55deda59582d4', \"aria-hidden\": toAriaBoolean(!open), class: \"calcite-dropdown-wrapper\", ref: this.setFloatingEl }, h(\"div\", { key: 'f875166d486a53cd393f17d9295974aa449d449f', \"aria-labelledby\": `${guid}-menubutton`, class: {\n                [\"calcite-dropdown-content\"]: true,\n                [FloatingCSS.animation]: true,\n                [FloatingCSS.animationActive]: open,\n            }, id: `${guid}-menu`, ref: this.setScrollerAndTransitionEl, role: \"menu\" }, h(\"slot\", { key: 'bc6e61383aaf85b3d6242a86c50da68bc8b31e27', onSlotchange: this.updateGroups }))))));\n    }\n    //--------------------------------------------------------------------------\n    //\n    //  Public Methods\n    //\n    //--------------------------------------------------------------------------\n    /**\n     * Updates the position of the component.\n     *\n     * @param delayed\n     */\n    async reposition(delayed = false) {\n        const { floatingEl, referenceEl, placement, overlayPositioning, filteredFlipPlacements } = this;\n        return reposition(this, {\n            floatingEl,\n            referenceEl,\n            overlayPositioning,\n            placement,\n            flipPlacements: filteredFlipPlacements,\n            type: \"menu\",\n        }, delayed);\n    }\n    closeCalciteDropdownOnClick(event) {\n        if (this.disabled || !this.open || event.composedPath().includes(this.el)) {\n            return;\n        }\n        this.closeCalciteDropdown(false);\n    }\n    closeCalciteDropdownOnEvent(event) {\n        this.closeCalciteDropdown();\n        event.stopPropagation();\n    }\n    closeCalciteDropdownOnOpenEvent(event) {\n        if (event.composedPath().includes(this.el)) {\n            return;\n        }\n        this.open = false;\n    }\n    pointerEnterHandler() {\n        if (this.disabled || this.type !== \"hover\") {\n            return;\n        }\n        this.toggleDropdown();\n    }\n    pointerLeaveHandler() {\n        if (this.disabled || this.type !== \"hover\") {\n            return;\n        }\n        this.closeCalciteDropdown();\n    }\n    getTraversableItems() {\n        return this.items.filter((item) => !item.disabled && !item.hidden);\n    }\n    calciteInternalDropdownItemKeyEvent(event) {\n        const { keyboardEvent } = event.detail;\n        const target = keyboardEvent.target;\n        const traversableItems = this.getTraversableItems();\n        switch (keyboardEvent.key) {\n            case \"Tab\":\n                this.open = false;\n                this.updateTabIndexOfItems(target);\n                break;\n            case \"ArrowDown\":\n                focusElementInGroup(traversableItems, target, \"next\");\n                break;\n            case \"ArrowUp\":\n                focusElementInGroup(traversableItems, target, \"previous\");\n                break;\n            case \"Home\":\n                focusElementInGroup(traversableItems, target, \"first\");\n                break;\n            case \"End\":\n                focusElementInGroup(traversableItems, target, \"last\");\n                break;\n        }\n        event.stopPropagation();\n    }\n    handleItemSelect(event) {\n        this.updateSelectedItems();\n        event.stopPropagation();\n        this.calciteDropdownSelect.emit();\n        if (!this.closeOnSelectDisabled ||\n            event.detail.requestedDropdownGroup.selectionMode === \"none\") {\n            this.closeCalciteDropdown();\n        }\n        event.stopPropagation();\n    }\n    updateGroupScale() {\n        this.groups?.forEach((group) => (group.scale = this.scale));\n    }\n    onBeforeOpen() {\n        this.calciteDropdownBeforeOpen.emit();\n    }\n    onOpen() {\n        this.calciteDropdownOpen.emit();\n    }\n    onBeforeClose() {\n        this.calciteDropdownBeforeClose.emit();\n    }\n    onClose() {\n        this.calciteDropdownClose.emit();\n    }\n    updateSelectedItems() {\n        this.selectedItems = this.items.filter((item) => item.selected);\n    }\n    getMaxScrollerHeight() {\n        const { maxItems, items } = this;\n        let itemsToProcess = 0;\n        let maxScrollerHeight = 0;\n        let groupHeaderHeight;\n        this.groups.forEach((group) => {\n            if (maxItems > 0 && itemsToProcess < maxItems) {\n                Array.from(group.children).forEach((item, index) => {\n                    if (index === 0) {\n                        if (isNaN(groupHeaderHeight)) {\n                            groupHeaderHeight = item.offsetTop;\n                        }\n                        maxScrollerHeight += groupHeaderHeight;\n                    }\n                    if (itemsToProcess < maxItems) {\n                        maxScrollerHeight += item.offsetHeight;\n                        itemsToProcess += 1;\n                    }\n                });\n            }\n        });\n        return items.length > maxItems ? maxScrollerHeight : 0;\n    }\n    closeCalciteDropdown(focusTrigger = true) {\n        this.open = false;\n        if (focusTrigger) {\n            focusElement(this.triggers[0]);\n        }\n    }\n    updateTabIndexOfItems(target) {\n        this.items.forEach((item) => {\n            item.tabIndex = target !== item ? -1 : 0;\n        });\n    }\n    static get delegatesFocus() { return true; }\n    get el() { return this; }\n    static get watchers() { return {\n        \"open\": [\"openHandler\"],\n        \"disabled\": [\"handleDisabledChange\"],\n        \"flipPlacements\": [\"flipPlacementsHandler\"],\n        \"maxItems\": [\"maxItemsHandler\"],\n        \"overlayPositioning\": [\"overlayPositioningHandler\"],\n        \"placement\": [\"placementHandler\"],\n        \"scale\": [\"handlePropsChange\"]\n    }; }\n    static get style() { return CalciteDropdownStyle0; }\n}, [17, \"calcite-dropdown\", {\n        \"open\": [1540],\n        \"closeOnSelectDisabled\": [516, \"close-on-select-disabled\"],\n        \"disabled\": [516],\n        \"flipPlacements\": [16],\n        \"maxItems\": [514, \"max-items\"],\n        \"overlayPositioning\": [513, \"overlay-positioning\"],\n        \"placement\": [513],\n        \"selectedItems\": [1040],\n        \"type\": [513],\n        \"widthScale\": [513, \"width-scale\"],\n        \"scale\": [513],\n        \"setFocus\": [64],\n        \"reposition\": [64]\n    }, [[8, \"click\", \"closeCalciteDropdownOnClick\"], [0, \"calciteInternalDropdownCloseRequest\", \"closeCalciteDropdownOnEvent\"], [8, \"calciteDropdownOpen\", \"closeCalciteDropdownOnOpenEvent\"], [1, \"pointerenter\", \"pointerEnterHandler\"], [1, \"pointerleave\", \"pointerLeaveHandler\"], [0, \"calciteInternalDropdownItemKeyEvent\", \"calciteInternalDropdownItemKeyEvent\"], [0, \"calciteInternalDropdownItemSelect\", \"handleItemSelect\"]], {\n        \"open\": [\"openHandler\"],\n        \"disabled\": [\"handleDisabledChange\"],\n        \"flipPlacements\": [\"flipPlacementsHandler\"],\n        \"maxItems\": [\"maxItemsHandler\"],\n        \"overlayPositioning\": [\"overlayPositioningHandler\"],\n        \"placement\": [\"placementHandler\"],\n        \"scale\": [\"handlePropsChange\"]\n    }]);\nfunction defineCustomElement() {\n    if (typeof customElements === \"undefined\") {\n        return;\n    }\n    const components = [\"calcite-dropdown\"];\n    components.forEach(tagName => { switch (tagName) {\n        case \"calcite-dropdown\":\n            if (!customElements.get(tagName)) {\n                customElements.define(tagName, Dropdown);\n            }\n            break;\n    } });\n}\ndefineCustomElement();\n\nexport { Dropdown as D, defineCustomElement as d };\n\n//# sourceMappingURL=dropdown.js.map","/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\n * v2.13.2\n */\nimport { D as Dropdown, d as defineCustomElement$1 } from './dropdown.js';\n\nconst CalciteDropdown = Dropdown;\nconst defineCustomElement = defineCustomElement$1;\n\nexport { CalciteDropdown, defineCustomElement };\n\n//# sourceMappingURL=calcite-dropdown.js.map"],"mappings":"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"}