import{af as t,dc as s,dK as i,aY as p,cH as r,an as o,ao as a,ap as e}from"./p-3013819f.js";import{t as h}from"./p-7b13247d.js";import{m,u as j}from"./p-4e55d8f0.js";import{t as c}from"./p-9cf72458.js";import{$ as f}from"./p-6d5c327b.js";import{t as d}from"./p-90032174.js";import"./p-3b51db5e.js";import"./p-0d83e514.js";import"./p-b362a32c.js";import"./p-8567e6fe.js";import"./p-c268fbe3.js";import"./p-17c1fa4b.js";import"./p-b6b871c6.js";import"./p-ffa11fc1.js";import"./p-808395fb.js";import"./p-30a1f911.js";import"./p-508fdb0a.js";import"./p-f1aede5a.js";import"./p-94b15954.js";import"./p-a9376829.js";import"./p-3811f238.js";import"./p-e6812c2f.js";import"./p-a925664a.js";import"./p-a897fcf8.js";import"./p-c7810a6f.js";import"./p-201cec5f.js";import"./p-89242a33.js";import"./p-7580bdba.js";import"./p-a62b18ce.js";import"./p-2d8c68ca.js";import"./p-d97e7de8.js";import"./p-595ce045.js";import"./p-10e5b6ea.js";import"./p-3b8b0ae8.js";import"./p-ec95a4fb.js";import"./p-1f0b604e.js";import"./p-347800d3.js";import"./p-72db18d5.js";import"./p-325c6878.js";import"./p-721433ed.js";import"./p-1cf43261.js";import"./p-8b1f6523.js";import"./p-4f73c6ea.js";import"./p-ffb26433.js";let b=class extends(m(j)){constructor(){super(...arguments),this._highlightCounter=new d}attach(){this.graphicsView=new f({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:this.layer.graphics,container:new c(this.view.featuresTilingScheme),layerId:this.layer.id}),this.container.addChild(this.graphicsView.container),this.addAttachHandles(this.layer.on("graphic-update",this.graphicsView.graphicUpdateHandler)),this._updateHighlight()}detach(){this.container.removeAllChildren(),this.graphicsView=t(this.graphicsView)}async hitTest(t){return this.graphicsView?this.graphicsView.hitTest(t).map((s=>({type:"graphic",graphic:s,mapPoint:t,layer:this.layer}))):null}queryGraphics(){return Promise.resolve(this.graphicsView.graphics)}update(t){this.graphicsView.processUpdate(t)}moveStart(){}viewChange(){this.graphicsView.viewChange()}moveEnd(){}isUpdating(){return!this.graphicsView||this.graphicsView.updating}highlight(t,o="highlight"){let a;"number"==typeof t?a=[t]:t instanceof s?a=[t.uid]:Array.isArray(t)&&t.length>0?a="number"==typeof t[0]?t:t.map((t=>t&&t.uid)):i.isCollection(t)&&t.length>0&&(a=t.map((t=>t&&t.uid)).toArray());const e=a?.filter(p);return e?.length?(this._addHighlight(e,o),r((()=>this._removeHighlight(e,o)))):r()}_addHighlight(t,s){this._highlightCounter.addReason(t,s),this._updateHighlight()}_removeHighlight(t,s){this._highlightCounter.deleteReason(t,s),this._updateHighlight()}_updateHighlight(){const t=[];for(const s of this._highlightCounter.ids()){const i=this._highlightCounter.getHighestReason(s),p=h(i);t.push({objectId:s,highlightFlags:p})}this.graphicsView?.setHighlight(t)}};o([a()],b.prototype,"graphicsView",void 0),b=o([e("esri.views.2d.layers.GraphicsLayerView2D")],b);const n=b;export default n;
//# sourceMappingURL=p-90f257a6.js.map