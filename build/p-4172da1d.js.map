{"version":3,"names":["e","constructor","l","t","i","lods","length","level","this","tileInfo","minLOD","maxLOD","lodAt","effectiveMinLOD","effectiveMaxLOD","getAvailability","cols","rows","async","o","s","a","row","col","n","updateTileInfo","fetchAvailability","catch","upsampleTile","fetchAvailabilityUpsample"],"sources":["./node_modules/@arcgis/core/layers/support/TileInfoTilemapCache.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport l from\"../../core/Error.js\";import{waitTick as t,isAbortError as i}from\"../../core/promiseUtils.js\";class e{constructor(l,t=0,i=l.lods[l.lods.length-1].level){this.tileInfo=l,this.minLOD=t,this.maxLOD=i,l.lodAt(t)||(this.minLOD=l.lods[0].level),l.lodAt(i)||(this.maxLOD=l.lods[l.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(l,t,i){const e=this.tileInfo?.lodAt(l);return!e||l<this.minLOD||l>this.maxLOD?\"unavailable\":e.cols&&e.rows?i>=e.cols[0]&&i<=e.cols[1]&&t>=e.rows[0]&&t<=e.rows[1]?\"unknown\":\"unavailable\":\"unknown\"}async fetchAvailability(i,e,o,s){await t(s);const a=this.getAvailability(i,e,o);if(\"unavailable\"===a)throw new l(\"tile-map:tile-unavailable\",\"Tile is not available\",{level:i,row:e,col:o});return a}async fetchAvailabilityUpsample(l,e,o,s,a){await t(a),s.level=l,s.row=e,s.col=o;const n=this.tileInfo;return n.updateTileInfo(s),this.fetchAvailability(l,e,o,a).catch((l=>{if(i(l))throw l;if(n.upsampleTile(s))return this.fetchAvailabilityUpsample(s.level,s.row,s.col,s,a);throw l}))}}export{e as default};\n"],"mappings":"mDAI2G,MAAMA,EAAEC,YAAYC,EAAEC,EAAE,EAAEC,EAAEF,EAAEG,KAAKH,EAAEG,KAAKC,OAAO,GAAGC,OAAOC,KAAKC,SAASP,EAAEM,KAAKE,OAAOP,EAAEK,KAAKG,OAAOP,EAAEF,EAAEU,MAAMT,KAAKK,KAAKE,OAAOR,EAAEG,KAAK,GAAGE,OAAOL,EAAEU,MAAMR,KAAKI,KAAKG,OAAOT,EAAEG,KAAKH,EAAEG,KAAKC,OAAO,GAAGC,MAAM,CAAKM,sBAAkB,OAAOL,KAAKE,QAAQF,KAAKC,SAASJ,KAAK,GAAGE,KAAK,CAAKO,sBAAkB,OAAON,KAAKG,QAAQH,KAAKC,SAASJ,KAAKG,KAAKC,SAASJ,KAAKC,OAAO,GAAGC,KAAK,CAACQ,gBAAgBb,EAAEC,EAAEC,GAAG,MAAMJ,EAAEQ,KAAKC,UAAUG,MAAMV,GAAG,OAAOF,GAAGE,EAAEM,KAAKE,QAAQR,EAAEM,KAAKG,OAAO,cAAcX,EAAEgB,MAAMhB,EAAEiB,KAAKb,GAAGJ,EAAEgB,KAAK,IAAIZ,GAAGJ,EAAEgB,KAAK,IAAIb,GAAGH,EAAEiB,KAAK,IAAId,GAAGH,EAAEiB,KAAK,GAAG,UAAU,cAAc,SAAS,CAACC,wBAAwBd,EAAEJ,EAAEmB,EAAEC,SAASjB,EAAEiB,GAAG,MAAMC,EAAEb,KAAKO,gBAAgBX,EAAEJ,EAAEmB,GAAG,GAAG,gBAAgBE,EAAE,MAAM,IAAInB,EAAE,4BAA4B,wBAAwB,CAACK,MAAMH,EAAEkB,IAAItB,EAAEuB,IAAIJ,IAAI,OAAOE,CAAC,CAACH,gCAAgChB,EAAEF,EAAEmB,EAAEC,EAAEC,SAASlB,EAAEkB,GAAGD,EAAEb,MAAML,EAAEkB,EAAEE,IAAItB,EAAEoB,EAAEG,IAAIJ,EAAE,MAAMK,EAAEhB,KAAKC,SAAS,OAAOe,EAAEC,eAAeL,GAAGZ,KAAKkB,kBAAkBxB,EAAEF,EAAEmB,EAAEE,GAAGM,OAAOzB,IAAI,GAAGE,EAAEF,GAAG,MAAMA,EAAE,GAAGsB,EAAEI,aAAaR,GAAG,OAAOZ,KAAKqB,0BAA0BT,EAAEb,MAAMa,EAAEE,IAAIF,EAAEG,IAAIH,EAAEC,GAAG,MAAMnB,CAAE,GAAE,S"}