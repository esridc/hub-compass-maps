{"version":3,"names":["e","t","r","n","layerType","featureCollectionType","async","c","a","map","f","y","Promise","allSettled","i","status","value","add","l","ArcGISDimensionLayer","ArcGISFeatureLayer","ArcGISImageServiceLayer","ArcGISMapServiceLayer","PointCloudLayer","ArcGISSceneServiceLayer","IntegratedMeshLayer","OGCFeatureLayer","BuildingSceneLayer","ArcGISTiledElevationServiceLayer","ArcGISTiledImageServiceLayer","ArcGISTiledMapServiceLayer","GroupLayer","GeoJSON","WebTiledLayer","CSV","VectorTileLayer","WFS","WMS","DefaultTileLayer","IntegratedMesh3DTilesLayer","KML","RasterDataLayer","Voxel","LineOfSightLayer","s","RasterDataElevationLayer","p","S","OpenStreetMap","u","ArcGISAnnotationLayer","ArcGISImageServiceVectorLayer","ArcGISStreamLayer","BingMapsAerial","BingMapsRoad","BingMapsHybrid","CatalogLayer","GeoRSS","KnowledgeGraphLayer","MediaLayer","OrientedImageryLayer","SubtypeGroupLayer","d","SubtypeGroupTable","I","m","LinkChartLayer","g","T","G","M","read","context","type","w","b","h","A","C","o","v","defaultLayerType","UnknownLayer","portal","itemId","id","load","L","className","MapNotesLayer","RouteLayer","wmtsInfo","url","layerIdentifier","WMTSLayer","wfsInfo","version","UnsupportedLayer","featureCollection","layers","length","origin","layerContainerType","Array","isArray","addMany","destroy","portalItem","when","layerId","F","forEach","tables","FeatureLayer","showLegend","ignoreDefaults","visibility","visibleLayers","includes"],"sources":["./node_modules/@arcgis/core/portal/support/featureCollectionUtils.js","./node_modules/@arcgis/core/layers/support/layersCreator.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nfunction e(e){return t(e,\"notes\")}function r(e){return t(e,\"markup\")}function n(e){return t(e,\"route\")}function t(e,r){return!(!e.layerType||\"ArcGISFeatureLayer\"!==e.layerType)&&e.featureCollectionType===r}export{e as isMapNotesLayer,r as isMarkupLayer,n as isRouteLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Collection.js\";import\"../../core/has.js\";import{LayerLoadContext as r}from\"./LayerLoadContext.js\";import{layerLookupMap as a}from\"./lazyLayerLoader.js\";import t from\"../../portal/PortalItem.js\";import{isMapNotesLayer as y,isMarkupLayer as i,isRouteLayer as L}from\"../../portal/support/featureCollectionUtils.js\";import{selectLayerClassPath as n}from\"../../portal/support/portalLayers.js\";import{loadStyleRenderer as o}from\"../../renderers/support/styleUtils.js\";async function c(e,r,a){if(!r)return;const t=r.map((e=>f(e,a))),y=await Promise.allSettled(t);for(const i of y)\"rejected\"===i.status||i.value&&e.add(i.value)}const l={ArcGISDimensionLayer:\"DimensionLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",PointCloudLayer:\"PointCloudLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",IntegratedMeshLayer:\"IntegratedMeshLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",BuildingSceneLayer:\"BuildingSceneLayer\",ArcGISTiledElevationServiceLayer:\"ElevationLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",GroupLayer:\"GroupLayer\",GeoJSON:\"GeoJSONLayer\",WebTiledLayer:\"WebTileLayer\",CSV:\"CSVLayer\",VectorTileLayer:\"VectorTileLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",DefaultTileLayer:\"TileLayer\",IntegratedMesh3DTilesLayer:\"IntegratedMesh3DTilesLayer\",KML:\"KMLLayer\",RasterDataLayer:\"UnsupportedLayer\",Voxel:\"VoxelLayer\",LineOfSightLayer:\"LineOfSightLayer\"},s={ArcGISTiledElevationServiceLayer:\"ElevationLayer\",DefaultTileLayer:\"ElevationLayer\",RasterDataElevationLayer:\"UnsupportedLayer\"},p={ArcGISFeatureLayer:\"FeatureLayer\"},S={ArcGISTiledMapServiceLayer:\"TileLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",WebTiledLayer:\"WebTileLayer\",VectorTileLayer:\"VectorTileLayer\",ArcGISImageServiceLayer:\"UnsupportedLayer\",WMS:\"UnsupportedLayer\",ArcGISMapServiceLayer:\"UnsupportedLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",DefaultTileLayer:\"TileLayer\"},u={ArcGISAnnotationLayer:\"UnsupportedLayer\",ArcGISDimensionLayer:\"UnsupportedLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISStreamLayer:\"StreamLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",CatalogLayer:\"CatalogLayer\",CSV:\"CSVLayer\",DefaultTileLayer:\"TileLayer\",GeoRSS:\"GeoRSSLayer\",GeoJSON:\"GeoJSONLayer\",GroupLayer:\"GroupLayer\",KML:\"KMLLayer\",KnowledgeGraphLayer:\"UnsupportedLayer\",MediaLayer:\"MediaLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",OrientedImageryLayer:\"OrientedImageryLayer\",SubtypeGroupLayer:\"SubtypeGroupLayer\",VectorTileLayer:\"VectorTileLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},d={ArcGISFeatureLayer:\"FeatureLayer\",SubtypeGroupTable:\"UnsupportedLayer\"},I={ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",VectorTileLayer:\"VectorTileLayer\",WebTiledLayer:\"WebTileLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",WMS:\"WMSLayer\",DefaultTileLayer:\"TileLayer\"},m={...u,LinkChartLayer:\"LinkChartLayer\"},g={...d},T={...I};async function f(e,r){return G(await M(e,r),e,r)}async function G(e,r,a){const t=new e;return t.read(r,a.context),\"group\"===t.type&&(\"GroupLayer\"===r.layerType?await w(t,r,a):b(r)?h(t,r,a.context):A(r)&&await C(t,r,a.context)),await o(t,a.context),t}async function M(e,o){const c=o.context,l=v(c);let s=e.layerType||e.type;!s&&o?.defaultLayerType&&(s=o.defaultLayerType);const p=l[s];let S=p?a[p]:a.UnknownLayer;if(b(e)){const y=c?.portal;if(e.itemId){const i=new t({id:e.itemId,portal:y});await i.load();const L=(await n(i,new r)).className||\"UnknownLayer\";S=a[L]}}else\"ArcGISFeatureLayer\"===s?y(e)||i(e)?S=a.MapNotesLayer:L(e)?S=a.RouteLayer:A(e)&&(S=a.GroupLayer):e.wmtsInfo?.url&&e.wmtsInfo.layerIdentifier?S=a.WMTSLayer:\"WFS\"===s&&\"2.0.0\"!==e.wfsInfo?.version&&(S=a.UnsupportedLayer);return S()}function A(e){if(\"ArcGISFeatureLayer\"!==e.layerType||b(e))return!1;return(e.featureCollection?.layers?.length??0)>1}function b(e){return\"Feature Collection\"===e.type}function v(e){let r;switch(e.origin){case\"web-scene\":switch(e.layerContainerType){case\"basemap\":r=S;break;case\"ground\":r=s;break;case\"tables\":r=p;break;default:r=l}break;case\"link-chart\":switch(e.layerContainerType){case\"basemap\":r=T;break;case\"tables\":r=g;break;default:r=m}break;default:switch(e.layerContainerType){case\"basemap\":r=I;break;case\"tables\":r=d;break;default:r=u}}return r}async function w(r,a,t){const y=new e,i=c(y,Array.isArray(a.layers)?a.layers:[],t);try{try{if(await i,\"group\"===r.type)return r.layers.addMany(y),r}catch(L){r.destroy();for(const e of y)e.destroy();throw L}}catch(L){throw L}}function h(e,r,a){r.itemId&&(e.portalItem=new t({id:r.itemId,portal:a?.portal}),e.when((()=>{const t=t=>{const y=t.layerId;F(t,e,r,y,a);const i=r.featureCollection?.layers?.[y];i&&t.read(i,a)};e.layers?.forEach(t),e.tables?.forEach(t)})))}async function C(e,r,t){const y=a.FeatureLayer,i=await y(),L=r.featureCollection,n=L?.showLegend,o=L?.layers?.map(((a,y)=>{const L=new i;L.read(a,t);const o={...t,ignoreDefaults:!0};return F(L,e,r,y,o),null!=n&&L.read({showLegend:n},o),L}));e.layers.addMany(o??[])}function F(e,r,a,t,y){e.read({id:`${r.id}-sublayer-${t}`,visibility:a.visibleLayers?.includes(t)??!0},y)}export{w as populateGroupLayer,c as populateOperationalLayers};\n"],"mappings":"oLAIA,SAASA,EAAEA,GAAG,OAAOC,EAAED,EAAE,QAAQ,CAAC,SAASE,EAAEF,GAAG,OAAOC,EAAED,EAAE,SAAS,CAAC,SAASG,EAAEH,GAAG,OAAOC,EAAED,EAAE,QAAQ,CAAC,SAASC,EAAED,EAAEE,GAAG,SAASF,EAAEI,WAAW,uBAAuBJ,EAAEI,YAAYJ,EAAEK,wBAAwBH,CAAC,CCA0RI,eAAeC,EAAEP,EAAEE,EAAEM,GAAG,IAAIN,EAAE,OAAO,MAAMD,EAAEC,EAAEO,KAAKT,GAAGU,EAAEV,EAAEQ,KAAKG,QAAQC,QAAQC,WAAWZ,GAAG,IAAI,MAAMa,KAAKH,EAAE,aAAaG,EAAEC,QAAQD,EAAEE,OAAOhB,EAAEiB,IAAIH,EAAEE,MAAM,CAAC,MAAME,EAAE,CAACC,qBAAqB,iBAAiBC,mBAAmB,eAAeC,wBAAwB,eAAeC,sBAAsB,gBAAgBC,gBAAgB,kBAAkBC,wBAAwB,aAAaC,oBAAoB,sBAAsBC,gBAAgB,kBAAkBC,mBAAmB,qBAAqBC,iCAAiC,iBAAiBC,6BAA6B,mBAAmBC,2BAA2B,YAAYC,WAAW,aAAaC,QAAQ,eAAeC,cAAc,eAAeC,IAAI,WAAWC,gBAAgB,kBAAkBC,IAAI,WAAWC,IAAI,WAAWC,iBAAiB,YAAYC,2BAA2B,6BAA6BC,IAAI,WAAWC,gBAAgB,mBAAmBC,MAAM,aAAaC,iBAAiB,oBAAoBC,EAAE,CAAChB,iCAAiC,iBAAiBU,iBAAiB,iBAAiBO,yBAAyB,oBAAoBC,EAAE,CAAC1B,mBAAmB,gBAAgB2B,EAAE,CAACjB,2BAA2B,YAAYD,6BAA6B,mBAAmBmB,cAAc,qBAAqBf,cAAc,eAAeE,gBAAgB,kBAAkBd,wBAAwB,mBAAmBgB,IAAI,mBAAmBf,sBAAsB,mBAAmBE,wBAAwB,aAAac,iBAAiB,aAAaW,EAAE,CAACC,sBAAsB,mBAAmB/B,qBAAqB,mBAAmBC,mBAAmB,eAAeC,wBAAwB,eAAe8B,8BAA8B,eAAe7B,sBAAsB,gBAAgB8B,kBAAkB,cAAcvB,6BAA6B,mBAAmBC,2BAA2B,YAAYuB,eAAe,gBAAgBC,aAAa,gBAAgBC,eAAe,gBAAgBC,aAAa,eAAetB,IAAI,WAAWI,iBAAiB,YAAYmB,OAAO,cAAczB,QAAQ,eAAeD,WAAW,aAAaS,IAAI,WAAWkB,oBAAoB,mBAAmBC,WAAW,aAAajC,gBAAgB,kBAAkBkC,qBAAqB,uBAAuBC,kBAAkB,oBAAoB1B,gBAAgB,kBAAkBC,IAAI,WAAWC,IAAI,WAAWJ,cAAc,gBAAgB6B,EAAE,CAAC1C,mBAAmB,eAAe2C,kBAAkB,oBAAoBC,EAAE,CAAC3C,wBAAwB,eAAe8B,8BAA8B,eAAe7B,sBAAsB,gBAAgBO,6BAA6B,mBAAmBC,2BAA2B,YAAYkB,cAAc,qBAAqBb,gBAAgB,kBAAkBF,cAAc,eAAeoB,eAAe,gBAAgBC,aAAa,gBAAgBC,eAAe,gBAAgBlB,IAAI,WAAWC,iBAAiB,aAAa2B,EAAE,IAAIhB,EAAEiB,eAAe,kBAAkBC,EAAE,IAAIL,GAAGM,EAAE,IAAIJ,GAAG1D,eAAeI,EAAEV,EAAEE,GAAG,OAAOmE,QAAQC,EAAEtE,EAAEE,GAAGF,EAAEE,EAAE,CAACI,eAAe+D,EAAErE,EAAEE,EAAEM,GAAG,MAAMP,EAAE,IAAID,EAAE,OAAOC,EAAEsE,KAAKrE,EAAEM,EAAEgE,SAAS,UAAUvE,EAAEwE,OAAO,eAAevE,EAAEE,gBAAgBsE,EAAEzE,EAAEC,EAAEM,GAAGmE,EAAEzE,GAAG0E,EAAE3E,EAAEC,EAAEM,EAAEgE,SAASK,EAAE3E,UAAU4E,EAAE7E,EAAEC,EAAEM,EAAEgE,gBAAgBO,EAAE9E,EAAEO,EAAEgE,SAASvE,CAAC,CAACK,eAAegE,EAAEtE,EAAE+E,GAAG,MAAMxE,EAAEwE,EAAEP,QAAQtD,EAAE8D,EAAEzE,GAAG,IAAIqC,EAAE5C,EAAEI,WAAWJ,EAAEyE,MAAM7B,GAAGmC,GAAGE,mBAAmBrC,EAAEmC,EAAEE,kBAAkB,MAAMnC,EAAE5B,EAAE0B,GAAG,IAAIG,EAAED,EAAEtC,EAAEsC,GAAGtC,EAAE0E,aAAa,GAAGP,EAAE3E,GAAG,CAAC,MAAMW,EAAEJ,GAAG4E,OAAO,GAAGnF,EAAEoF,OAAO,CAAC,MAAMtE,EAAE,IAAIb,EAAE,CAACoF,GAAGrF,EAAEoF,OAAOD,OAAOxE,UAAUG,EAAEwE,OAAO,MAAMC,SAASpF,EAAEW,EAAE,IAAIZ,IAAIsF,WAAW,eAAezC,EAAEvC,EAAE+E,EAAE,CAAC,KAAK,uBAAuB3C,EAAEjC,EAAEX,IAAIc,EAAEd,GAAG+C,EAAEvC,EAAEiF,cAAcF,EAAEvF,GAAG+C,EAAEvC,EAAEkF,WAAWb,EAAE7E,KAAK+C,EAAEvC,EAAEuB,YAAY/B,EAAE2F,UAAUC,KAAK5F,EAAE2F,SAASE,gBAAgB9C,EAAEvC,EAAEsF,UAAU,QAAQlD,GAAG,UAAU5C,EAAE+F,SAASC,UAAUjD,EAAEvC,EAAEyF,kBAAkB,OAAOlD,GAAG,CAAC,SAAS8B,EAAE7E,GAAG,GAAG,uBAAuBA,EAAEI,WAAWuE,EAAE3E,GAAG,OAAO,EAAE,OAAOA,EAAEkG,mBAAmBC,QAAQC,QAAQ,GAAG,CAAC,CAAC,SAASzB,EAAE3E,GAAG,MAAM,uBAAuBA,EAAEyE,IAAI,CAAC,SAASO,EAAEhF,GAAG,IAAIE,EAAE,OAAOF,EAAEqG,QAAQ,IAAI,YAAY,OAAOrG,EAAEsG,oBAAoB,IAAI,UAAUpG,EAAE6C,EAAE,MAAM,IAAI,SAAS7C,EAAE0C,EAAE,MAAM,IAAI,SAAS1C,EAAE4C,EAAE,MAAM,QAAQ5C,EAAEgB,EAAE,MAAM,IAAI,aAAa,OAAOlB,EAAEsG,oBAAoB,IAAI,UAAUpG,EAAEkE,EAAE,MAAM,IAAI,SAASlE,EAAEiE,EAAE,MAAM,QAAQjE,EAAE+D,EAAE,MAAM,QAAQ,OAAOjE,EAAEsG,oBAAoB,IAAI,UAAUpG,EAAE8D,EAAE,MAAM,IAAI,SAAS9D,EAAE4D,EAAE,MAAM,QAAQ5D,EAAE+C,GAAG,OAAO/C,CAAC,CAACI,eAAeoE,EAAExE,EAAEM,EAAEP,GAAG,MAAMU,EAAE,IAAIX,EAAEc,EAAEP,EAAEI,EAAE4F,MAAMC,QAAQhG,EAAE2F,QAAQ3F,EAAE2F,OAAO,GAAGlG,GAAG,IAAI,IAAI,SAASa,EAAE,UAAUZ,EAAEuE,KAAK,OAAOvE,EAAEiG,OAAOM,QAAQ9F,GAAGT,CAA2D,CAAzD,MAAMqF,GAAGrF,EAAEwG,UAAU,IAAI,MAAM1G,KAAKW,EAAEX,EAAE0G,UAAU,MAAMnB,CAAC,CAAkB,CAAhB,MAAMA,GAAG,MAAMA,CAAC,CAAC,CAAC,SAASX,EAAE5E,EAAEE,EAAEM,GAAGN,EAAEkF,SAASpF,EAAE2G,WAAW,IAAI1G,EAAE,CAACoF,GAAGnF,EAAEkF,OAAOD,OAAO3E,GAAG2E,SAASnF,EAAE4G,MAAI,KAAO,MAAM3G,EAAEA,IAAI,MAAMU,EAAEV,EAAE4G,QAAQC,EAAE7G,EAAED,EAAEE,EAAES,EAAEH,GAAG,MAAMM,EAAEZ,EAAEgG,mBAAmBC,SAASxF,GAAGG,GAAGb,EAAEsE,KAAKzD,EAAEN,EAAC,EAAGR,EAAEmG,QAAQY,QAAQ9G,GAAGD,EAAEgH,QAAQD,QAAQ9G,EAAG,IAAG,CAACK,eAAewE,EAAE9E,EAAEE,EAAED,GAAG,MAAMU,EAAEH,EAAEyG,aAAanG,QAAQH,IAAI4E,EAAErF,EAAEgG,kBAAkB/F,EAAEoF,GAAG2B,WAAWnC,EAAEQ,GAAGY,QAAQ1F,KAAG,CAAGD,EAAEG,KAAK,MAAM4E,EAAE,IAAIzE,EAAEyE,EAAEhB,KAAK/D,EAAEP,GAAG,MAAM8E,EAAE,IAAI9E,EAAEkH,gBAAgB,GAAG,OAAOL,EAAEvB,EAAEvF,EAAEE,EAAES,EAAEoE,GAAG,MAAM5E,GAAGoF,EAAEhB,KAAK,CAAC2C,WAAW/G,GAAG4E,GAAGQ,CAAE,IAAGvF,EAAEmG,OAAOM,QAAQ1B,GAAG,GAAG,CAAC,SAAS+B,EAAE9G,EAAEE,EAAEM,EAAEP,EAAEU,GAAGX,EAAEuE,KAAK,CAACc,GAAG,GAAGnF,EAAEmF,eAAepF,IAAImH,WAAW5G,EAAE6G,eAAeC,SAASrH,KAAK,GAAGU,EAAE,Q"}