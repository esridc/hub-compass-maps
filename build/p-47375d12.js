import{oN as t,Y as s,ac as e,pK as i,r as n,p as r,a0 as l,kO as a,q as o,oO as u,az as h,jR as p,w as d,j3 as c,j1 as f,ns as y,iI as g,nI as j,pL as m,kV as v,kX as w,iP as O}from"./p-aad64c9f.js";import{c as b}from"./p-2778592f.js";import{c as x,b as L}from"./p-7672451c.js";import{j as q}from"./p-4d009bad.js";import{i as R}from"./p-5a6692f0.js";import"./p-2af77f97.js";import"./p-175d4a9b.js";import"./p-79c28fb7.js";import"./p-a040372a.js";import"./p-88dd7081.js";import"./p-93091a88.js";import"./p-d2c6038f.js";import"./p-ed54582d.js";import"./p-e974c449.js";import"./p-7523d580.js";import"./p-2c974bfd.js";let E=class extends(t(s(e))){constructor(t){super(t),this.position=null,this.elevationInfo=null,this.feature=null}equals(t){return i(this.position,t.position)&&i(this.elevationInfo,t.elevationInfo)&&x(this.feature,t.feature)}};n([r({type:l,json:{write:{isRequired:!0}}})],E.prototype,"position",void 0),n([r({type:a}),q()],E.prototype,"elevationInfo",void 0),n([r(L)],E.prototype,"feature",void 0),E=n([o("esri.analysis.LineOfSightAnalysisObserver")],E);const S=E;let z=class extends(t(u)){constructor(t){super(t),this.position=null,this.elevationInfo=null,this.feature=null}equals(t){return i(this.position,t.position)&&i(this.elevationInfo,t.elevationInfo)&&x(this.feature,t.feature)}};n([r({type:l}),q()],z.prototype,"position",void 0),n([r({type:a}),q()],z.prototype,"elevationInfo",void 0),n([r(L)],z.prototype,"feature",void 0),z=n([o("esri.analysis.LineOfSightAnalysisTarget")],z);const A=z;const I=h.ofType(A);let P=class extends b{constructor(t){super(t),this.type="line-of-sight",this.observer=null,this.extent=null}initialize(){this.addHandles(d((()=>this._computeExtent()),(t=>{null==t?.pending&&this._set("extent",null!=t?t.extent:null)}),c))}get targets(){return this._get("targets")||new I}set targets(t){this._set("targets",f(t,this.targets,I))}get spatialReference(){return null!=this.observer?.position?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[this.observer?.position]}async waitComputeExtent(){const t=this._computeExtent();return null!=t?t.pending:Promise.resolve()}_computeExtent(){const t=this.spatialReference;if(null==this.observer?.position||null==t)return null;const s=t=>"absolute-height"===R(t.position,t.elevationInfo),e=this.observer.position,i=y(e.x,e.y,e.z,e.x,e.y,e.z);for(const s of this.targets)if(null!=s.position){const e=g(s.position,t);if(null!=e.pending)return{pending:e.pending,extent:null};if(null!=e.geometry){const{x:t,y:s,z:n}=e.geometry;j(i,[t,s,n])}}const n=m(i,t);return s(this.observer)&&this.targets.every(s)||(n.zmin=void 0,n.zmax=void 0),{pending:null,extent:n}}clear(){this.observer=null,this.targets.removeAll()}};n([r({type:["line-of-sight"]})],P.prototype,"type",void 0),n([r({type:S,json:{read:!0,write:!0}})],P.prototype,"observer",void 0),n([r({cast:p,type:I,nonNullable:!0,json:{read:!0,write:!0}})],P.prototype,"targets",null),n([r({value:null,readOnly:!0})],P.prototype,"extent",void 0),n([r({readOnly:!0})],P.prototype,"spatialReference",null),n([r({readOnly:!0})],P.prototype,"requiredPropertiesForEditing",null),P=n([o("esri.analysis.LineOfSightAnalysis")],P);const k=P;const N=h.ofType(A);let F=class extends(v(w(O))){constructor(t){super(t),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new k,this.opacity=1}initialize(){this.addHandles(d((()=>this.analysis),((t,s)=>{null!=s&&s.parent===this&&(s.parent=null),null!=t&&(t.parent=this)}),c))}async load(){return null!=this.analysis&&this.addResolvingPromise(this.analysis.waitComputeExtent()),this}get observer(){return this.analysis?.observer}set observer(t){const{analysis:s}=this;s&&(s.observer=t)}get targets(){return null!=this.analysis?this.analysis.targets:new h}set targets(t){f(t,this.analysis?.targets)}get fullExtent(){return null!=this.analysis?this.analysis.extent:null}get spatialReference(){return null!=this.analysis?this.analysis.spatialReference:null}releaseAnalysis(t){this.analysis===t&&(this.analysis=new k)}};n([r({json:{read:!1},readOnly:!0})],F.prototype,"type",void 0),n([r({type:["LineOfSightLayer"]})],F.prototype,"operationalLayerType",void 0),n([r({type:S,json:{read:!0,write:{isRequired:!0,ignoreOrigin:!0}}})],F.prototype,"observer",null),n([r({type:N,json:{read:!0,write:{ignoreOrigin:!0}}})],F.prototype,"targets",null),n([r({nonNullable:!0,json:{read:!1,write:!1}})],F.prototype,"analysis",void 0),n([r({readOnly:!0})],F.prototype,"fullExtent",null),n([r({readOnly:!0})],F.prototype,"spatialReference",null),n([r({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],F.prototype,"opacity",void 0),n([r({type:["show","hide"]})],F.prototype,"listMode",void 0),F=n([o("esri.layers.LineOfSightLayer")],F);const T=F;export default T;
//# sourceMappingURL=p-47375d12.js.map