import{lK as t,aX as n,ep as r,aW as e,aU as u,$ as c,mD as s,ee as a,mQ as o,dv as i,lN as f,a2 as h,lM as M,eo as I,dX as N}from"./p-aad64c9f.js";import{e as E}from"./p-79c28fb7.js";import{e as m}from"./p-88dd7081.js";import{e as p}from"./p-93091a88.js";function T(t,e){return n(t,e)/r(t)}function l(e,u){const c=n(e,u)/(r(e)*r(u));return-t(c)}function S(r,c,s){e(w,r),e(_,c);const a=n(w,_),o=t(a),i=u(w,w,_);return n(i,s)<0?2*Math.PI-o:o}const w=c(),_=c();class d{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&s((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new d(a)}static createVec3f64(){return new d(c)}static createVec4f64(){return new d(o)}static createMat3f64(){return new d(E)}static createMat4f64(){return new d(m)}static createQuatf64(){return new d(p)}get test(){}}const D=d.createVec2f64(),j=d.createVec3f64(),O=d.createVec4f64();d.createMat3f64();const U=d.createMat4f64(),v=d.createQuatf64();function A(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],r=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],e=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(n,r,e))}function C(t,n){const r=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),e=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),u=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return i(t,r,e,u),t}function V(t,n,r){Math.abs(t[0])>Math.abs(t[1])?i(n,0,1,0):i(n,1,0,0),u(r,t,n),u(n,r,t),e(r,r),e(n,n)}function X(t=at){return[t[0],t[1],t[2],t[3]]}function b(t=at[0],n=at[1],r=at[2],e=at[3]){return Q(t,n,r,e,O.get())}function g(t,n){return Q(n[0],n[1],n[2],n[3],t)}function F(t){return t}function Q(t,n,r,e,u=X()){return u[0]=t,u[1]=n,u[2]=r,u[3]=e,u}function R(t,n,r){const e=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],u=Math.abs(e-1)>1e-5&&e>1e-12?1/Math.sqrt(e):1;return r[0]=n[0]*u,r[1]=n[1]*u,r[2]=n[2]*u,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function x(t,n,r,e=X()){const u=r[0]-n[0],c=r[1]-n[1],s=r[2]-n[2],a=t[0]-n[0],o=t[1]-n[1],i=t[2]-n[2],f=c*i-s*o,h=s*a-u*i,M=u*o-c*a,I=f*f+h*h+M*M,N=Math.abs(I-1)>1e-5&&I>1e-12?1/Math.sqrt(I):1;return e[0]=f*N,e[1]=h*N,e[2]=M*N,e[3]=-(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]),e}function y(t,r,u,c=0,s=Math.floor(u*(1/3)),a=Math.floor(u*(2/3))){if(u<3)return!1;r(L,c);let o=s,i=!1;for(;o<u-1&&!i;)r(P,o),o++,i=!h(L,P);if(!i)return!1;for(o=Math.max(o,a),i=!1;o<u&&!i;)r(W,o),o++,M($,L,P),e($,$),M(k,P,W),e(k,k),i=!h(L,W)&&!h(P,W)&&Math.abs(n($,k))<K;return i?(x(L,P,W,t),!0):(0!==c||1!==s||2!==a)&&y(t,r,u,0,1,2)}const K=.99619469809,L=c(),P=c(),W=c(),$=c(),k=c();function q(t,r,e){return r!==t&&g(t,r),t[3]=-n(F(t),e),t}function z(t,n,r,e){return u(W,n,t),R(r,W,e)}function B(t,n,r,e){return ct(st(t,n,M(j.get(),r,n),it,e))}function G(t,n,r){return null!=n&&ct(st(t,n.origin,n.direction,ft,r))}function H(t,n,r){return ct(st(t,n.origin,n.vector,ot.NONE,r))}function J(t,n,r){return ct(st(t,n.origin,n.vector,ot.CLAMP,r))}function Y(t,n){return et(t,n)>=0}function Z(t,n,r){const e=I(j.get(),F(t),-t[3]),u=nt(t,M(j.get(),n,e),j.get());return f(r,u,e),r}function tt(t,n,r,e){const u=F(t),c=j.get(),s=j.get();V(u,c,s);const a=M(j.get(),r,n),o=T(c,a),f=T(s,a),h=T(u,a);return i(e,o,f,h)}function nt(t,r,e){const u=I(j.get(),F(t),n(F(t),r));return M(e,r,u),e}function rt(t,n){return Math.abs(et(t,n))}function et(t,r){return n(F(t),r)+t[3]}var ut;function ct(t){return t===ut.INTERSECTS_INSIDE_OUT||t===ut.INTERSECTS_OUTSIDE_IN}function st(t,r,e,u,c){const s=n(F(t),e),a=et(t,r);if(0===s)return a>=0?ut.INSIDE:ut.OUTSIDE;let o=-a/s;return u&ot.CLAMP&&(o=N(o,0,1)),!(u&ot.INFINITE_MIN)&&o<0||!(u&ot.INFINITE_MAX)&&o>1?a>=0?ut.INSIDE:ut.OUTSIDE:(f(c,r,I(c,e,o)),a>=0?ut.INTERSECTS_INSIDE_OUT:ut.INTERSECTS_OUTSIDE_IN)}!function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"}(ut||(ut={}));const at=[0,0,1,0];var ot;!function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"}(ot||(ot={}));const it=ot.INFINITE_MIN|ot.INFINITE_MAX,ft=ot.INFINITE_MAX;export{b as D,Z as H,tt as J,X as M,F as O,z as P,rt as Q,Q as U,et as V,l as a,T as b,j as c,V as d,U as f,C as g,g as h,B as k,R as l,A as m,v as o,x as p,H as q,O as r,D as t,S as u,y as v,J as w,G as x,q as y,Y as z};
//# sourceMappingURL=p-a040372a.js.map