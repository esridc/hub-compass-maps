{"version":3,"names":["i","o","s","t","e","r","Error","ImageData","a","m","c","n","data","set","f","document","createElement","width","height","getContext","createImageData","async","u","window","URL","createObjectURL","responseType","revokeObjectURL","p","arrayBuffer","mediaType","d","isAnimatedGIF","parseGif","import","isAnimatedPNG","parseApng","Blob","type","isBase64","getHeader"],"sources":["./node_modules/@arcgis/core/core/imageUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport t from\"../request.js\";import e from\"./Error.js\";import{isAbortError as r}from\"./promiseUtils.js\";import{dataComponents as a}from\"./urlUtils.js\";import{base64ToArrayBuffer as n}from\"../support/base64Utils.js\";let i=null,o=!0;function s(t,e,r){if(!t||!e)throw new Error(\"Cannot construct image data without dimensions\");if(o)try{return new ImageData(t,e)}catch(a){o=!1}return m(t,e,r)}function c(t,e,r,a){if(!e||!r)throw new Error(\"Cannot construct image data without dimensions\");if(o)try{return new ImageData(t,e,r)}catch(i){o=!1}const n=m(e,r,a);return n.data.set(t,0),n}function f(){return i||(i=document.createElement(\"canvas\"),i.width=1,i.height=1),i}function m(t,e,r){return r||(r=f()),r.getContext(\"2d\").createImageData(t,e)}async function u(a,n){const i=window.URL.createObjectURL(a);try{const{data:e}=await t(i,{...n,responseType:\"image\"});return e}catch(o){if(!r(o))throw new e(\"invalid-image\",`Could not fetch requested image at ${i}`);throw o}finally{window.URL.revokeObjectURL(i)}}async function p(t,e){const{arrayBuffer:r,mediaType:a}=await d(t,e),n=\"image/png\"===a;if(\"image/gif\"===a){const{isAnimatedGIF:t,parseGif:a}=await import(\"./image/gif.js\");if(t(r))return a(r,e)}if(n){const{isAnimatedPNG:t,parseApng:a}=await import(\"./image/apng.js\");if(t(r))return a(r,e)}return u(new Blob([r],{type:a}),e)}async function d(e,r){const i=a(e);if(i?.isBase64)return{arrayBuffer:n(i.data),mediaType:i.mediaType};const o=await t(e,{responseType:\"array-buffer\",...r});return{arrayBuffer:o.data,mediaType:o.getHeader?.(\"Content-Type\")??\"\"}}export{s as createEmptyImageData,p as getImageData,c as wrapImageData};\n"],"mappings":"kEAIuN,IAAIA,EAAE,KAAKC,GAAG,EAAE,SAASC,EAAEC,EAAEC,EAAEC,GAAG,IAAIF,IAAIC,EAAE,MAAM,IAAIE,MAAM,kDAAkD,GAAGL,EAAE,IAAI,OAAO,IAAIM,UAAUJ,EAAEC,EAAgB,CAAb,MAAMI,GAAGP,GAAG,CAAC,CAAC,OAAOQ,EAAEN,EAAEC,EAAEC,EAAE,CAAC,SAASK,EAAEP,EAAEC,EAAEC,EAAEG,GAAG,IAAIJ,IAAIC,EAAE,MAAM,IAAIC,MAAM,kDAAkD,GAAGL,EAAE,IAAI,OAAO,IAAIM,UAAUJ,EAAEC,EAAEC,EAAgB,CAAb,MAAML,GAAGC,GAAG,CAAC,CAAC,MAAMU,EAAEF,EAAEL,EAAEC,EAAEG,GAAG,OAAOG,EAAEC,KAAKC,IAAIV,EAAE,GAAGQ,CAAC,CAAC,SAASG,IAAI,OAAOd,IAAIA,EAAEe,SAASC,cAAc,UAAUhB,EAAEiB,MAAM,EAAEjB,EAAEkB,OAAO,GAAGlB,CAAC,CAAC,SAASS,EAAEN,EAAEC,EAAEC,GAAG,OAAOA,IAAIA,EAAES,KAAKT,EAAEc,WAAW,MAAMC,gBAAgBjB,EAAEC,EAAE,CAACiB,eAAeC,EAAEd,EAAEG,GAAG,MAAMX,EAAEuB,OAAOC,IAAIC,gBAAgBjB,GAAG,IAAI,MAAMI,KAAKR,SAASD,EAAEH,EAAE,IAAIW,EAAEe,aAAa,UAAU,OAAOtB,CAAwI,CAAtI,MAAMH,GAAG,IAAII,EAAEJ,GAAG,MAAM,IAAIG,EAAE,gBAAgB,sCAAsCJ,KAAK,MAAMC,CAAC,CAAC,QAAQsB,OAAOC,IAAIG,gBAAgB3B,EAAE,CAAC,CAACqB,eAAeO,EAAEzB,EAAEC,GAAG,MAAMyB,YAAYxB,EAAEyB,UAAUtB,SAASuB,EAAE5B,EAAEC,GAAGO,EAAE,cAAcH,EAAE,GAAG,cAAcA,EAAE,CAAC,MAAMwB,cAAc7B,EAAE8B,SAASzB,SAAS0B,OAAO,mBAAkB,GAAG/B,EAAEE,GAAG,OAAOG,EAAEH,EAAED,EAAE,CAAC,GAAGO,EAAE,CAAC,MAAMwB,cAAchC,EAAEiC,UAAU5B,SAAS0B,OAAO,mBAAmB,GAAG/B,EAAEE,GAAG,OAAOG,EAAEH,EAAED,EAAE,CAAC,OAAOkB,EAAE,IAAIe,KAAK,CAAChC,GAAG,CAACiC,KAAK9B,IAAIJ,EAAE,CAACiB,eAAeU,EAAE3B,EAAEC,GAAG,MAAML,EAAEQ,EAAEJ,GAAG,GAAGJ,GAAGuC,SAAS,MAAM,CAACV,YAAYlB,EAAEX,EAAEY,MAAMkB,UAAU9B,EAAE8B,WAAW,MAAM7B,QAAQE,EAAEC,EAAE,CAACsB,aAAa,kBAAkBrB,IAAI,MAAM,CAACwB,YAAY5B,EAAEW,KAAKkB,UAAU7B,EAAEuC,YAAY,iBAAiB,GAAG,Q"}