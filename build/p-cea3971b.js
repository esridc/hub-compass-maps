import{a as n,n as t,m as r}from"./p-4295487d.js";import{h5 as e,h3 as u,h4 as i,hB as a,hC as o,hD as s,hE as c,x as l}from"./p-aad64c9f.js";var f;!function(n){n.InvalidFunctionParameters="InvalidFunctionParameters",n.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction",n.UnsupportedSqlFunction="UnsupportedSqlFunction",n.UnsupportedOperator="UnsupportedOperator",n.UnsupportedSyntax="UnsupportedSyntax",n.UnsupportedIsRhs="UnsupportedIsRhs",n.UnsupportedIsLhs="UnsupportedIsLhs",n.InvalidDataType="InvalidDataType",n.CannotCastValue="CannotCastValue",n.FunctionNotRecognized="FunctionNotRecognized",n.InvalidTime="InvalidTime",n.InvalidParameterCount="InvalidParameterCount",n.InvalidTimeStamp="InvalidTimeStamp",n.InvalidDate="InvalidDate",n.InvalidOperator="InvalidOperator",n.IllegalInterval="IllegalInterval",n.YearMonthIntervals="YearMonthIntervals",n.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers",n.MissingStatisticParameters="MissingStatisticParameters"}(f||(f={}));const h={[f.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[f.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[f.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[f.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[f.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[f.UnsupportedOperator]:"Unsupported operator - {operator}",[f.UnsupportedSyntax]:"Unsupported syntax - {node}",[f.UnsupportedSqlFunction]:"Sql function not found = {function}",[f.InvalidDataType]:"Invalid sql data type",[f.InvalidDate]:"Invalid date encountered",[f.InvalidOperator]:"Invalid operator encountered",[f.InvalidTime]:"Invalid time encountered",[f.IllegalInterval]:"Illegal interval",[f.FunctionNotRecognized]:"Function not recognized",[f.InvalidTimeStamp]:"Invalid timestamp encountered",[f.InvalidParameterCount]:"Invalid parameter count for call to {name}",[f.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[f.YearMonthIntervals]:"Year-Month Intervals not supported",[f.CannotCastValue]:"Cannot cast value to the required data type"};class d extends Error{constructor(n,t){super(e(h[n],t)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,d)}}function p(n){return Number.isNaN(n)||0===n?n:Math.trunc(n)}class m{constructor(n){this._timeStampOffset=n,this._date=null}toDateTime(){return this._date??=u.DateTime.fromISO(this._timeStampOffset,{setZone:!0}),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return p(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return p(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return m.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(n){return new m(u.DateTime.fromJSDate(n).toISO({includeOffset:!0}))}static fromDateTime(n){return new m(n.toISO({includeOffset:!0}))}static fromParts(n,t,r=0,e=0,u=0,i=0,a=0,o=!1,s=0,c=0){const l=`${n.toString().padStart(4,"0")}-${t.toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}`;let f="";i<10&&(f="0");let h=`${e.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}:${f+i.toString()}`;0!==a&&(h+="."+a.toString().padStart(3,"0"));const d=`${o?"-":"+"}${s.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`;return new m(l+"T"+h+d)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let n=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return n&&(n=n.replace(".000","")),n}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(n){const t=this.toDateTime().plus(n);return m.fromDateTime(t)}}function w(n,t){const r=y[n.toLowerCase()];if(null==r)throw new d(f.FunctionNotRecognized);if(t.length<r.minParams||t.length>r.maxParams)throw new d(f.InvalidParameterCount,{name:n.toUpperCase()});return r.evaluate(t)}function v(n,t){const r=y[n.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams}const y={min:{minParams:1,maxParams:1,evaluate:n=>N(n[0],"min")},max:{minParams:1,maxParams:1,evaluate:n=>N(n[0],"max")},avg:{minParams:1,maxParams:1,evaluate:n=>I(n[0])},sum:{minParams:1,maxParams:1,evaluate:n=>T(n[0])},stddev:{minParams:1,maxParams:1,evaluate:n=>g(n[0])},count:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:n[0].length},var:{minParams:1,maxParams:1,evaluate:n=>x(n[0])}};function I(n){if(null===n)return null;let t=0,r=0;for(let e=0;e<n.length;e++){const u=n[e];if(null!==u){if(!E(u))throw new d(f.InvalidValueForAggregateFunction);r++,t+=u}}return 0===r?null:t/n.length}function E(n){return"number"==typeof n}function N(r,e){if(null===r)return null;let i=null,a=null;for(const o of r){let r=o;r=o instanceof n||o instanceof t?o.toNumber():o instanceof u.DateTime?o.toMillis():o instanceof m?o.toMilliseconds():o,(null===i||"max"===e&&null!==a&&null!==r&&a<=r||"min"===e&&null!==a&&null!==r&&a>=r)&&(i=o,a=r)}return i}function T(n){if(null===n)return null;let t=0;for(let r=0;r<n.length;r++){const e=n[r];if(null!==e){if(!E(e))throw new d(f.InvalidValueForAggregateFunction);t+=e}}return t}function g(n){if(null===n)return null;const t=x(n);return null===t?null:Math.sqrt(t)}function x(n){if(null===n)return null;if(0===(n=n.filter((n=>null!==n))).length)return null;const t=I(n);if(null===t)return null;let r=0;for(const e of n){if(!E(e))throw new d(f.InvalidValueForAggregateFunction);r+=(t-e)**2}return r/(n.length-1)}class O{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static _fixDefaults(n){if(null!==n.precision||null!==n.secondary)throw new d(f.PrimarySecondaryQualifiers)}static _parseSecondsComponent(n,t){if(t.includes(".")){const r=t.split(".");n.second=parseFloat(r[0]),n.millis=parseInt(r[1],10)}else n.second=parseFloat(t)}static createFromMilliseconds(n){const t=new O;return t.second=n/1e3,t}static createFromValueAndQualifier(n,t,r){let e=null;const u=new O;if(u.op="-"===r?"-":"+","interval-period"===t.type){O._fixDefaults(t);const r=new RegExp("^[0-9]{1,}$");if("year"===t.period||"month"===t.period)throw new d(f.YearMonthIntervals);if("second"===t.period){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(n))throw new d(f.IllegalInterval);O._parseSecondsComponent(u,n)}else{if(!r.test(n))throw new d(f.IllegalInterval);u[t.period]=parseFloat(n)}}else{if(O._fixDefaults(t.start),O._fixDefaults(t.end),"year"===t.start.period||"month"===t.start.period||"year"===t.end.period||"month"===t.end.period)throw new d(f.YearMonthIntervals);switch(t.start.period){case"day":switch(t.end.period){case"hour":if(e=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!e.test(n))throw new d(f.IllegalInterval);u[t.start.period]=parseFloat(n.split(" ")[0]),u[t.end.period]=parseFloat(n.split(" ")[1]);break;case"minute":if(e=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!e.test(n))throw new d(f.IllegalInterval);{u[t.start.period]=parseFloat(n.split(" ")[0]);const r=n.split(" ")[1].split(":");u.hour=parseFloat(r[0]),u.minute=parseFloat(r[1])}break;case"second":if(e=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!e.test(n))throw new d(f.IllegalInterval);{u[t.start.period]=parseFloat(n.split(" ")[0]);const r=n.split(" ")[1].split(":");u.hour=parseFloat(r[0]),u.minute=parseFloat(r[1]),O._parseSecondsComponent(u,r[2])}break;default:throw new d(f.IllegalInterval)}break;case"hour":switch(t.end.period){case"minute":if(e=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!e.test(n))throw new d(f.IllegalInterval);u.hour=parseFloat(n.split(":")[0]),u.minute=parseFloat(n.split(":")[1]);break;case"second":if(e=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!e.test(n))throw new d(f.IllegalInterval);{const t=n.split(":");u.hour=parseFloat(t[0]),u.minute=parseFloat(t[1]),O._parseSecondsComponent(u,t[2])}break;default:throw new d(f.IllegalInterval)}break;case"minute":if("second"!==t.end.period)throw new d(f.IllegalInterval);if(e=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!e.test(n))throw new d(f.IllegalInterval);{const t=n.split(":");u.minute=parseFloat(t[0]),O._parseSecondsComponent(u,t[1])}break;default:throw new d(f.IllegalInterval)}}return u}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}const P=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,A=/^(\d{1,2}):(\d{1,2})$/,S=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,F=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,M=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,R=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,b=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,$=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function U(n,t){if(t instanceof u.Zone)return t===i.instance?u.DateTime.fromMillis(n.getTime(),{zone:i.instance}):u.DateTime.fromJSDate(n,{zone:t});switch(t){case"system":case"local":case null:return u.DateTime.fromJSDate(n);default:return"unknown"===t?.toLowerCase()?u.DateTime.fromMillis(n.getTime(),{zone:i.instance}):u.DateTime.fromJSDate(n,{zone:t})}}function D(n){return"number"==typeof n}function k(n){return"string"==typeof n||n instanceof String}function L(n){return n instanceof O}function C(n){return n instanceof Date}function _(n){return n instanceof u.DateTime}function H(t){return t instanceof n}function Z(n){return n instanceof t}function z(n){return n instanceof m}function q(n){let r=P.exec(n);if(null!==r){const[,n,e,u]=r,i=t.fromParts(parseInt(n,10),parseInt(e,10),parseInt(u,10),0);if(null!==i)return i;throw new d(f.InvalidTime)}if(r=A.exec(n),null!==r){const[,n,e]=r,u=t.fromParts(parseInt(n,10),parseInt(e,10),0,0);if(null!==u)return u;throw new d(f.InvalidTime)}if(r=S.exec(n),null!==r){const[,n,e,u,i]=r,a=t.fromParts(parseInt(n,10),parseInt(e,10),parseInt(u,10),parseInt(i,10));if(null!==a)return a;throw new d(f.InvalidTime)}throw new d(f.InvalidTime)}function B(n,t,r=!1){let e=M.exec(n);if(null!==e){const[,n,r,i,o,s,c,l]=e,h=u.DateTime.fromObject({year:parseInt(n,10),month:parseInt(r,10),day:parseInt(i,10),hour:parseInt(o,10),minute:parseInt(s,10),second:parseInt(c,10),millisecond:l?parseInt(l.replace(".",""),10):0},{zone:a(t)});if(!1===h.isValid)throw new d(f.InvalidTimeStamp);return h}if(e=R.exec(n),null!==e){const[,n,t,r,u,i,a,o,s,c,l]=e,h=m.fromParts(parseInt(n,10),parseInt(t,10),parseInt(r,10),parseInt(u,10),parseInt(i,10),parseInt(a,10),o?parseInt(o.replace(".",""),10):0,"-"===s,parseInt(c,10),parseInt(l,10));if(!1===h.isValid)throw new d(f.InvalidTimeStamp);return h}if(e=b.exec(n),null!==e){const[,n,t,r,u,i,a,o,s]=e,c=m.fromParts(parseInt(n,10),parseInt(t,10),parseInt(r,10),parseInt(u,10),parseInt(i,10),0,0,"-"===a,parseInt(o,10),parseInt(s,10));if(!1===c.isValid)throw new d(f.InvalidTimeStamp);return c}if(e=$.exec(n),null!==e){const[,n,r,i,o,s]=e,c=u.DateTime.fromObject({year:parseInt(n,10),month:parseInt(r,10),day:parseInt(i,10),hour:parseInt(o,10),minute:parseInt(s,10),second:0},{zone:a(t)});if(!1===c.isValid)throw new d(f.InvalidTimeStamp);return c}if(e=F.exec(n),null!==e){const[,n,r,i]=e,o=u.DateTime.fromObject({year:parseInt(n,10),month:parseInt(r,10),day:parseInt(i,10),hour:0,minute:0,second:0},{zone:a(t)});if(!1===o.isValid)throw new d(f.InvalidTimeStamp);return o}throw new d(f.InvalidTimeStamp)}function J(t,r){const e=F.exec(t);if(null===e)try{return B(t,r)}catch{throw new d(f.InvalidDate)}const[,u,i,a]=e,o=n.fromParts(parseInt(u,10),parseInt(i,10),parseInt(a,10));if(null===o)throw new d(f.InvalidDate);return o}const V=321408e5,Y=26784e5,W=864e5,G=36e5,K=6e4;function j(n){return!!_(n)||!!z(n)}function X(n){return!!_(n)||(!!H(n)||(!!z(n)||!!Z(n)))}function Q(n){if(_(n))return n.toMillis();if(H(n))return n.toNumber();if(z(n))return n.toMilliseconds();throw new d(f.InvalidDataType)}function nn(n,t,r,e){if(null==n||null==t)return null;if(D(n)){if(D(t))return tn(n,t,r);if(k(t))return rn(n,t,r);if(X(t))throw new d(f.InvalidOperator);if(H(t))throw new d(f.InvalidOperator)}else if(k(n)){if(D(t))return en(n,t,r);if(k(t))return un(n,t,r);if(_(t))throw new d(f.InvalidOperator);if(H(t))throw new d(f.InvalidOperator);if(Z(t))throw new d(f.InvalidOperator);if(z(t))throw new d(f.InvalidOperator)}else if(_(n)){if(j(t)){if(n instanceof u.DateTime&&o(n.zone)){if(t instanceof u.DateTime&&!1===o(t.zone))return ln(n,t,r);if(t instanceof m)return ln(n,t,r)}else if(t instanceof u.DateTime&&o(t.zone)){if(n instanceof u.DateTime&&!1===o(n.zone))return ln(n,t,r);if(n instanceof m)return ln(n,t,r)}return tn(Q(n),Q(t),r)}if(k(t))throw new d(f.InvalidOperator);if(H(t))return an(n,t,r);if(Z(t))throw new d(f.InvalidOperator);if(D(t))throw new d(f.InvalidOperator)}else if(H(n)){if(z(t))return cn(n,t,r);if(_(t))return sn(n,t,r);if(k(t))throw new d(f.InvalidOperator);if(H(t))return tn(n.toNumber(),t.toNumber(),r);if(Z(t))throw new d(f.InvalidOperator);if(D(t))throw new d(f.InvalidOperator)}else if(Z(n)){if(Z(t))return tn(n.toNumber(),t.toNumber(),r);if(k(t))throw new d(f.InvalidOperator);if(D(t))throw new d(f.InvalidOperator);if(H(t))throw new d(f.InvalidOperator);if(j(t))throw new d(f.InvalidOperator)}else if(z(n)){if(j(t))return t instanceof u.DateTime&&o(t.zone)?ln(n,t,r):tn(Q(n),Q(t),r);if(k(t))throw new d(f.InvalidOperator);if(H(t))return on(n,t,r);if(Z(t))throw new d(f.InvalidOperator);if(D(t))throw new d(f.InvalidOperator)}switch(r){case"<>":return n!==t;case"=":return n===t;case">":return n>t;case"<":return n<t;case">=":return n>=t;case"<=":return n<=t}}function tn(n,t,r){switch(r){case"<>":return n!==t;case"=":return n===t;case">":return n>t;case"<":return n<t;case">=":return n>=t;case"<=":return n<=t}}function rn(n,t,r){const e=parseFloat(t);if(!isNaN(e))return tn(n,e,r);const u=n.toString();switch(r){case"<>":return u!==t;case"=":return u===t;case">":return u>t;case"<":return u<t;case">=":return u>=t;case"<=":return u<=t}}function en(n,t,r){const e=parseFloat(n);if(!isNaN(e))return tn(e,t,r);const u=t.toString();switch(r){case"<>":return n!==u;case"=":return n===u;case">":return n>u;case"<":return n<u;case">=":return n>=u;case"<=":return n<=u}}function un(n,t,r){switch(r){case"<>":return n!==t;case"=":return n===t;case">":return n>t;case"<":return n<t;case">=":return n>=t;case"<=":return n<=t}}function an(n,t,r){const e=t.toDateTimeLuxon(n.zone);return tn((n=n.startOf("day")).toMillis(),e.toMillis(),r)}function on(n,t,r){const e=t.toDateTimeLuxon(n.toDateTime().zone);return tn((n=n.startOfDay()).toMilliseconds(),e.toMillis(),r)}function sn(n,t,r){const e=n.toDateTimeLuxon(t.zone);return t=t.startOf("day"),tn(e.toMillis(),t.toMillis(),r)}function cn(n,t,r){const e=n.toDateTimeLuxon(t.toDateTime().zone);return t=t.startOfDay(),tn(e.toMillis(),t.toMilliseconds(),r)}function ln(n,t,r){n instanceof m&&(n=n.toDateTime()),t instanceof m&&(t=t.toDateTime());const e=fn(n),u=fn(t);switch(r){case"<>":return e!==u;case"=":return e===u;case">":return e>u;case"<":return e<u;case">=":return e>=u;case"<=":return e<=u}}function fn(n){return n.year*V+n.month*Y+n.day*W+n.hour*G+n.minute*K+1e3*n.second+n.millisecond}function hn(n,t,r){const e=En[n.toLowerCase()];if(null==e)throw new d(f.FunctionNotRecognized);if(t.length<e.minParams||t.length>e.maxParams)throw new d(f.InvalidParameterCount,{name:n.toUpperCase()});return e.evaluate(t,r)}function dn(n,t){const r=En[n.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams}function pn(n){return"string"==typeof n||n instanceof String}function mn(n){return!C(n)&&(!H(n)&&(!_(n)&&(!Z(n)&&!z(n))))}function wn(n){return H(n)||Z(n)?n.toString():z(n)?n.toSQLValue():_(n)?0===n.millisecond?n.toFormat("yyyy-LL-dd HH:mm:ss"):n.toSQL({includeOffset:!1}):C(n)?wn(u.DateTime.fromJSDate(n)):n.toString()}function vn(t){if(C(t))return n.fromDateJS(t);if(_(t))return n.fromParts(t.year,t.month,t.day);if(H(t))return t;if(Z(t))throw new d(f.CannotCastValue);if(z(t)){if(null===n.fromParts(t.year,t.month,t.day))throw new d(f.CannotCastValue)}if(pn(t)){const r=n.fromReader(t);if(null!==r&&r.isValid)return r}throw new d(f.CannotCastValue)}function yn(n,t,r){if(C(n))return U(n,t);if(_(n))return n;if(H(n))return n.toDateTimeLuxon("unknown");if(Z(n))throw new d(f.CannotCastValue);if(z(n))return n;if(pn(n))return B(n,"unknown",r);throw new d(f.CannotCastValue)}function In(n){if(C(n))return t.fromDateJS(n);if(_(n))return t.fromDateTime(n);if(H(n))throw new d(f.CannotCastValue);if(Z(n))return n;if(z(n))return t.fromSqlTimeStampOffset(n);if(pn(n))return q(n);throw new d(f.CannotCastValue)}const En={extract:{minParams:2,maxParams:2,evaluate:([n,t])=>{if(null==t)return null;if(C(t))switch(n.toUpperCase()){case"SECOND":return t.getSeconds();case"MINUTE":return t.getMinutes();case"HOUR":return t.getHours();case"DAY":return t.getDate();case"MONTH":return t.getMonth()+1;case"YEAR":return t.getFullYear();case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":return 0}else if(_(t))switch(n.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour;case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new d(f.InvalidFunctionParameters,{function:"EXTRACT"})}else if(H(t))switch(n.toUpperCase()){case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new d(f.InvalidFunctionParameters,{function:"EXTRACT"})}else if(Z(t))switch(n.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour}else if(z(t))switch(n.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour;case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":return t.timezoneOffsetHour;case"TIMEZONE_MINUTE":return t.timezoneOffsetMinutes}throw new d(f.InvalidFunctionParameters,{function:"EXTRACT"})}},substring:{minParams:2,maxParams:3,evaluate:n=>{if(2===n.length){const[t,r]=n;return null==t||null==r?null:t.toString().substring(r-1)}if(3===n.length){const[t,r,e]=n;return null==t||null==r||null==e?null:e<=0?"":t.toString().substring(r-1,r+e-1)}}},position:{minParams:2,maxParams:2,evaluate:([n,t])=>null==n||null==t?null:t.indexOf(n)+1},trim:{minParams:2,maxParams:3,evaluate:n=>{const t=3===n.length,r=t?n[1]:" ",e=t?n[2]:n[1];if(null==r||null==e)return null;const u=`(${s(r)})`;switch(n[0]){case"BOTH":return e.replaceAll(new RegExp(`^${u}*|${u}*$`,"g"),"");case"LEADING":return e.replaceAll(new RegExp(`^${u}*`,"g"),"");case"TRAILING":return e.replaceAll(new RegExp(`${u}*$`,"g"),"")}throw new d(f.InvalidFunctionParameters,{function:"TRIM"})}},abs:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:Math.abs(n[0])},ceiling:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:Math.ceil(n[0])},floor:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:Math.floor(n[0])},log:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:Math.log(n[0])},log10:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:Math.log(n[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:Math.sin(n[0])},cos:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:Math.cos(n[0])},tan:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:Math.tan(n[0])},asin:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:Math.asin(n[0])},acos:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:Math.acos(n[0])},atan:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:Math.atan(n[0])},sign:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:n[0]>0?1:n[0]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:n=>null==n[0]||null==n[1]?null:n[0]**n[1]},mod:{minParams:2,maxParams:2,evaluate:n=>null==n[0]||null==n[1]?null:n[0]%n[1]},round:{minParams:1,maxParams:2,evaluate:n=>{const t=n[0],r=2===n.length?10**n[1]:1;return null==t?null:Math.round(t*r)/r}},truncate:{minParams:1,maxParams:2,evaluate:n=>null==n[0]?null:1===n.length||0===n[1]?Math.trunc(n[0]):c("trunc",n[0],-Number(n[1]))},char_length:{minParams:1,maxParams:1,evaluate:n=>pn(n[0])?n[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:n=>{let t="";for(let r=0;r<n.length;r++){if(null==n[r])return null;t+=n[r].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:n[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:n[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:n=>{for(const t of n)if(null!==t)return t;return null}},cosh:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:Math.cosh(n[0])},sinh:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:Math.sinh(n[0])},tanh:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:Math.tanh(n[0])},nullif:{minParams:2,maxParams:2,evaluate:(n,t)=>nn(n[0],n[1],"=")?null:n[0]},cast:{minParams:2,maxParams:2,evaluate:(n,t)=>{const r=n[0],e=n[1];if(null===r)return null;switch(e.type){case"integer":{if(!mn(r))throw new d(f.CannotCastValue);const n=parseInt(r,10);if(isNaN(n))throw new d(f.CannotCastValue);return n}case"smallint":{if(!mn(r))throw new d(f.CannotCastValue);const n=parseInt(r,10);if(isNaN(n))throw new d(f.CannotCastValue);if(n>32767||n<-32767)throw new d(f.CannotCastValue);return n}case"float":case"real":{if(!mn(r))throw new d(f.CannotCastValue);const n=parseFloat(r);if(isNaN(n))throw new d(f.CannotCastValue);return n}case"time":return In(r);case"date":return vn(r);case"timestamp":return yn(r,t,!0===e.withtimezone);case"varchar":{const n=wn(r);if(n.length>e.size)throw new d(f.CannotCastValue);return n}default:throw new d(f.InvalidDataType)}}}};function Nn(n,t,r,e){if("||"===n)return hn("concat",[t,r],e);if(null===t||null===r)return null;if(D(t)){if(D(r))return Tn(t,r,n);if(L(r))return Mn(t,r,n);if(Z(r))return Hn();if(H(r))return Zn();if(z(r))return _n();if(_(r))return Ln();if(k(r))return zn(t,r,n);throw new d(f.InvalidOperator)}if(H(t)){if(D(r))return Dn(t,r,n);if(L(r))return Rn(t,r,n);if(Z(r))return Kn();if(H(r))return Gn(t,r,n);if(z(r))return Wn(t,r,n);if(_(r))return Yn(t,r,n);if(k(r))return ct();throw new d(f.InvalidOperator)}if(Z(t)){if(D(r))return kn(t,r,n);if(L(r))return Pn(t,r,n);if(Z(r))return ut();if(H(r))return rt();if(z(r))return et();if(_(r))return tt();if(k(r))return lt();throw new d(f.InvalidOperator)}if(L(t)){if(D(r))return Fn(t,r,n);if(L(r))return Sn(t,r,n);if(Z(r))return xn(t,r,n);if(H(r))return On(t,r,n);if(z(r))return An(t,r,n);if(_(r))return gn(t,r,n);if(k(r))return Jn();throw new d(f.InvalidOperator)}if(_(t)){if(D(r))return Un(t,r,n);if(L(r))return bn(t,r,n);if(Z(r))return st();if(H(r))return at(t,r,n);if(z(r))return ot(t,r,n);if(_(r))return it(t,r,n);if(k(r))return ft();throw new d(f.InvalidOperator)}if(z(t)){if(D(r))return Cn(t,r,n);if(L(r))return $n(t,r,n);if(Z(r))return jn();if(H(r))return Xn(t,r,n);if(z(r))return nt(t,r,n);if(_(r))return Qn(t,r,n);if(k(r))return ht();throw new d(f.InvalidOperator)}if(k(t)){if(D(r))return qn(t,r,n);if(L(r))return Vn();if(Z(r))return dt();if(H(r))return pt();if(z(r))return wt();if(_(r))return mt();if(k(r))return Bn(t,r,n);throw new d(f.InvalidOperator)}throw new d(f.InvalidOperator)}function Tn(n,t,r){switch(r){case"+":return n+t;case"-":return n-t;case"*":return n*t;case"/":return n/t}throw new d(f.InvalidOperator)}function gn(n,t,r){switch(r){case"+":return t.plus({milliseconds:n.valueInMilliseconds()});case"-":return n.valueInMilliseconds()-t.toMillis()}throw new d(f.InvalidOperator)}function xn(n,t,r){if("+"===r)return t.plus("milliseconds",n.valueInMilliseconds());throw new d(f.InvalidOperator)}function On(n,t,r){if("+"===r)return t.plus("milliseconds",n.valueInMilliseconds());throw new d(f.InvalidOperator)}function Pn(n,t,r){switch(r){case"+":return n.plus("milliseconds",t.valueInMilliseconds());case"-":return n.plus("milliseconds",-1*t.valueInMilliseconds())}throw new d(f.InvalidOperator)}function An(n,t,r){if("+"===r)return t.addMilliseconds(n.valueInMilliseconds());throw new d(f.InvalidOperator)}function Sn(n,t,r){switch(r){case"+":return O.createFromMilliseconds(n.valueInMilliseconds()+t.valueInMilliseconds());case"-":return O.createFromMilliseconds(n.valueInMilliseconds()-t.valueInMilliseconds());case"*":return O.createFromMilliseconds(n.valueInMilliseconds()*t.valueInMilliseconds());case"/":return O.createFromMilliseconds(n.valueInMilliseconds()/t.valueInMilliseconds())}throw new d(f.InvalidOperator)}function Fn(n,t,r){switch(r){case"+":return O.createFromMilliseconds(n.valueInMilliseconds()+t);case"-":return O.createFromMilliseconds(n.valueInMilliseconds()-t);case"*":return O.createFromMilliseconds(n.valueInMilliseconds()*t);case"/":return O.createFromMilliseconds(n.valueInMilliseconds()/t)}throw new d(f.InvalidOperator)}function Mn(n,t,r){switch(r){case"+":return O.createFromMilliseconds(n+t.valueInMilliseconds());case"-":return O.createFromMilliseconds(n-t.valueInMilliseconds());case"*":return O.createFromMilliseconds(n*t.valueInMilliseconds());case"/":return O.createFromMilliseconds(n/t.valueInMilliseconds())}throw new d(f.InvalidOperator)}function Rn(n,t,r){switch(r){case"+":return n.plus("milliseconds",t.valueInMilliseconds());case"-":return n.plus("milliseconds",-1*t.valueInMilliseconds())}throw new d(f.InvalidOperator)}function bn(n,t,r){switch(r){case"+":return n.plus({milliseconds:t.valueInMilliseconds()});case"-":return n.minus({milliseconds:t.valueInMilliseconds()})}throw new d(f.InvalidOperator)}function $n(n,t,r){switch(r){case"+":return n.addMilliseconds(t.valueInMilliseconds());case"-":return n.addMilliseconds(-1*t.valueInMilliseconds())}throw new d(f.InvalidOperator)}function Un(n,t,r){const e=1e3*t*24*60*60;switch(r){case"+":return n.plus({milliseconds:e});case"-":return n.minus({milliseconds:e})}throw new d(f.InvalidOperator)}function Dn(n,t,r){const e=1e3*t*24*60*60;switch(r){case"+":return n.plus("milliseconds",e);case"-":return n.plus("milliseconds",-1*e)}throw new d(f.InvalidOperator)}function kn(n,t,r){const e=1e3*t*24*60*60;switch(r){case"+":return n.plus("milliseconds",e);case"-":return n.plus("milliseconds",-1*e)}throw new d(f.InvalidOperator)}function Ln(n,t,r){throw new d(f.InvalidOperator)}function Cn(n,t,r){const e=1e3*t*24*60*60;switch(r){case"+":return n.addMilliseconds(e);case"-":return n.addMilliseconds(-1*e)}throw new d(f.InvalidOperator)}function _n(n,t,r){throw new d(f.InvalidOperator)}function Hn(n,t,r){throw new d(f.InvalidOperator)}function Zn(n,t,r){throw new d(f.InvalidOperator)}function zn(n,t,r){const e=parseFloat(t);if(isNaN(e))throw new d(f.InvalidOperator);return Tn(n,e,r)}function qn(n,t,r){const e=parseFloat(n);if(isNaN(e))throw new d(f.InvalidOperator);return Tn(e,t,r)}function Bn(n,t,r){if("+"===r)return n+t;throw new d(f.InvalidOperator)}function Jn(n,t,r){throw new d(f.InvalidOperator)}function Vn(n,t,r){throw new d(f.InvalidOperator)}function Yn(n,t,r){if("-"===r)return n.toDateTimeLuxon(t.zone).diff(t).as("days");throw new d(f.InvalidOperator)}function Wn(n,t,r){if("-"===r)return n.toDateTimeLuxon(t.toDateTime().zone).diff(t.toDateTime()).as("days");throw new d(f.InvalidOperator)}function Gn(n,t,r){if("-"===r)return n.toDateTimeLuxon("UTC").diff(t.toDateTimeLuxon("UTC")).as("days");throw new d(f.InvalidOperator)}function Kn(n,t,r){throw new d(f.InvalidOperator)}function jn(n,t,r){throw new d(f.InvalidOperator)}function Xn(n,t,r){if("-"===r)return n.toDateTime().diff(t.toDateTimeLuxon(n.toDateTime().zone)).as("days");throw new d(f.InvalidOperator)}function Qn(n,t,r){if("-"===r)return n.toDateTime().diff(t).as("days");throw new d(f.InvalidOperator)}function nt(n,t,r){if("-"===r)return n.toDateTime().diff(t.toDateTime()).as("days");throw new d(f.InvalidOperator)}function tt(n,t,r){throw new d(f.InvalidOperator)}function rt(n,t,r){throw new d(f.InvalidOperator)}function et(n,t,r){throw new d(f.InvalidOperator)}function ut(n,t,r){throw new d(f.InvalidOperator)}function it(n,t,r){if("-"===r)return n.diff(t).as("days");throw new d(f.InvalidOperator)}function at(n,t,r){if("-"===r)return n.diff(t.toDateTimeLuxon(n.zone)).as("days");throw new d(f.InvalidOperator)}function ot(n,t,r){if("-"===r)return n.diff(t.toDateTime()).as("days");throw new d(f.InvalidOperator)}function st(n,t,r){throw new d(f.InvalidOperator)}function ct(n,t,r){throw new d(f.InvalidOperator)}function lt(n,t,r){throw new d(f.InvalidOperator)}function ft(n,t,r){throw new d(f.InvalidOperator)}function ht(n,t,r){throw new d(f.InvalidOperator)}function dt(n,t,r){throw new d(f.InvalidOperator)}function pt(n,t,r){throw new d(f.InvalidOperator)}function mt(n,t,r){throw new d(f.InvalidOperator)}function wt(n,t,r){throw new d(f.InvalidOperator)}function vt(n,t){function r(){this.constructor=n}r.prototype=t.prototype,n.prototype=new r}function yt(n,t,r,e){var u=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(u,yt.prototype),u.expected=t,u.found=r,u.location=e,u.name="SyntaxError",u}function It(n,t,r){return r=r||" ",n.length>t?n:(t-=n.length,n+(r+=r.repeat(t)).slice(0,t))}function Et(n,t){var r,e={},u=(t=void 0!==t?t:{}).grammarSource,i={start:ui},a=ui,o="!",s="=",c=">=",l=">",f="<=",h="<>",d="!=",p="||",m="@",w="'",v="N'",y="''",I=".",E="null",N="true",T="false",g="in",x="is",O="like",P="escape",A="not",S="and",F="or",M="between",R="from",b="for",$="substring",U="extract",D="trim",k="position",L="timestamp",C="date",_="time",H="leading",Z="trailing",z="both",q="cast",B="as",J="integer",V="int",Y="smallint",W="float",G="real",K="varchar",j="to",X="interval",Q="year",nn="timezone_hour",tn="timezone_minute",rn="month",en="day",un="hour",an="minute",on="second",sn="case",cn="end",ln="when",fn="then",hn="else",dn=",",pn="(",mn=")",wn="`",vn=/^[<-=]/,yn=/^[+\-]/,In=/^[*\/]/,En=/^[A-Za-z_\x80-\uFFFF]/,Nn=/^[A-Za-z0-9_]/,Tn=/^[A-Za-z0-9_.\x80-\uFFFF]/,gn=/^["]/,xn=/^[^']/,On=/^[0-9]/,Pn=/^[eE]/,An=/^[ \t\n\r]/,Sn=/^[^`]/,Fn=Ku("!",!1),Mn=Ku("=",!1),Rn=Ku(">=",!1),bn=Ku(">",!1),$n=Ku("<=",!1),Un=Ku("<>",!1),Dn=ju([["<","="]],!1,!1),kn=Ku("!=",!1),Ln=ju(["+","-"],!1,!1),Cn=Ku("||",!1),_n=ju(["*","/"],!1,!1),Hn=ju([["A","Z"],["a","z"],"_",["","￿"]],!1,!1),Zn=ju([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),zn=ju([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1),qn=ju(['"'],!1,!1),Bn=Ku("@",!1),Jn=Ku("'",!1),Vn=Ku("N'",!1),Yn=Ku("''",!1),Wn=ju(["'"],!0,!1),Gn=Ku(".",!1),Kn=ju([["0","9"]],!1,!1),jn=ju(["e","E"],!1,!1),Xn=Ku("NULL",!0),Qn=Ku("TRUE",!0),nt=Ku("FALSE",!0),tt=Ku("IN",!0),rt=Ku("IS",!0),et=Ku("LIKE",!0),ut=Ku("ESCAPE",!0),it=Ku("NOT",!0),at=Ku("AND",!0),ot=Ku("OR",!0),st=Ku("BETWEEN",!0),ct=Ku("FROM",!0),lt=Ku("FOR",!0),ft=Ku("SUBSTRING",!0),ht=Ku("EXTRACT",!0),dt=Ku("TRIM",!0),pt=Ku("POSITION",!0),mt=Ku("TIMESTAMP",!0),wt=Ku("DATE",!0),vt=Ku("TIME",!0),It=Ku("LEADING",!0),Et=Ku("TRAILING",!0),Nt=Ku("BOTH",!0),Tt=Ku("CAST",!0),gt=Ku("AS",!0),xt=Ku("INTEGER",!0),Ot=Ku("INT",!0),Pt=Ku("SMALLINT",!0),At=Ku("FLOAT",!0),St=Ku("REAL",!0),Ft=Ku("VARCHAR",!0),Mt=Ku("TO",!0),Rt=Ku("INTERVAL",!0),bt=Ku("YEAR",!0),$t=Ku("TIMEZONE_HOUR",!0),Ut=Ku("TIMEZONE_MINUTE",!0),Dt=Ku("MONTH",!0),kt=Ku("DAY",!0),Lt=Ku("HOUR",!0),Ct=Ku("MINUTE",!0),_t=Ku("SECOND",!0),Ht=Ku("CASE",!0),Zt=Ku("END",!0),zt=Ku("WHEN",!0),qt=Ku("THEN",!0),Bt=Ku("ELSE",!0),Jt=Ku(",",!1),Vt=Ku("(",!1),Yt=Ku(")",!1),Wt=ju([" ","\t","\n","\r"],!1,!1),Gt=Ku("`",!1),Kt=ju(["`"],!0,!1),jt=function(n){return n},Xt=function(n){return xo(Wu(),...n)},Qt=function(n,t,r){return{op:t,expr:r,location:Wu()}},nr=function(n,t){return Oo(n,t)},tr=function(n,t,r){return{op:t,expr:r,location:Wu()}},rr=function(n,t){return Oo(n,t)},er=function(n){return To("NOT",n,Wu())},ur=function(n,t){if(""==t||null==t||null==t)return n;return"arithmetic"==t.type?Oo(n,t.tail):go(t.op,n,t.right,t.escape,Wu())},ir=function(n,t){return{op:n,expr:t,location:Wu()}},ar=function(n){return{type:"arithmetic",tail:n}},or=function(n,t){return{op:n+"NOT",right:t}},sr=function(n,t){return{op:n,right:t}},cr=function(n,t,r){return xo(Wu(),t,r)},lr=function(n,t){return{op:"NOT"+n,right:t}},fr=function(n,t,r){return xo(Wu(),t,r)},hr=function(n,t){return{op:n,right:t}},dr=function(n){return n[0]+" "+n[2]},pr=function(n){return n[0]+" "+n[2]},mr=function(n,t,r){return{op:n,right:t,escape:r.value}},wr=function(n,t){return{op:n,right:t,escape:""}},vr=function(n,t){return{op:n,right:t}},yr=function(n,t){return{op:n,right:t}},Ir=function(n,t,r){return{op:t,expr:r,location:Wu()}},Er=function(n,t){return Oo(n,t)},Nr=function(n,t,r){return{op:t,expr:r,location:Wu()}},Tr=function(n,t){return Oo(n,t)},gr=function(n){return n.paren=!0,n},xr=function(n){return/^CURRENT_DATE$/i.test(n)?{type:"current-time",location:Wu(),mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(n)?{type:"current-time",location:Wu(),mode:"timestamp"}:/^CURRENT_TIME$/i.test(n)?{type:"current-time",location:Wu(),mode:"time"}:/^CURRENT_USER$/i.test(n)?{type:"current-user",location:Wu()}:{type:"column-reference",location:Wu(),table:"",column:n}},Or=function(n){return{type:"column-reference",location:Wu(),table:"",column:n,delimited:!0}},Pr=function(n){return n},Ar=function(n,t){return n+t.join("")},Sr=function(n,t){return n+t.join("")},Fr=function(n){return n},Mr=function(n){return n.join("")},Rr=function(){return'"'},br=function(n){return{type:"parameter",location:Wu(),value:n[1]}},$r=function(n,t){return xo(Wu(),n,t)},Ur=function(n,t){return xo(Wu(),n,t)},Dr=function(n){return{type:"function",location:Wu(),name:"extract",args:n}},kr=function(n,t,r){return xo(Wu(),n,t,...r?[r]:[])},Lr=function(n,t,r){return xo(Wu(),n,t,r)},Cr=function(n){return{type:"function",location:Wu(),name:"substring",args:n}},_r=function(n,t){return xo(Wu(),n,t)},Hr=function(n,t){return xo(Wu(),n,t)},Zr=function(n){return{type:"function",location:Wu(),name:"cast",args:n}},zr=function(){return{type:"data-type",location:Wu(),value:{type:"integer"}}},qr=function(){return{type:"data-type",location:Wu(),value:{type:"smallint"}}},Br=function(){return{type:"data-type",location:Wu(),value:{type:"float"}}},Jr=function(){return{type:"data-type",location:Wu(),value:{type:"real"}}},Vr=function(){return{type:"data-type",location:Wu(),value:{type:"date"}}},Yr=function(){return{type:"data-type",location:Wu(),value:{type:"timestamp"}}},Wr=function(){return{type:"data-type",location:Wu(),value:{type:"time"}}},Gr=function(n){return{type:"data-type",location:Wu(),value:{type:"varchar",size:parseInt(n)}}},Kr=function(n,t,r){return xo(Wu(),n,t,r)},jr=function(n,t){return xo(Wu(),n,t)},Xr=function(n){return{type:"function",location:Wu(),name:"trim",args:n}},Qr=function(n){return{type:"string",location:Wu(),value:n??"BOTH"}},ne=function(n,t){return xo(Wu(),n,t)},te=function(n,t){return xo(Wu(),n,t)},re=function(n){return{type:"function",location:Wu(),name:"position",args:n}},ee=function(n,t){return{type:"function",location:Wu(),name:n,args:t}},ue=function(n){return{type:"string",location:Wu(),value:n}},ie=function(n){return"string"===n.type&&Po(n.value),{type:"timestamp",location:Wu(),value:n.value}},ae=function(n){return"string"===n.type&&Ao(n.value),{type:"time",location:Wu(),value:n.value}},oe=function(n,t,r){return{type:"interval",location:Wu(),value:t,qualifier:r,op:n}},se=function(n,t){return{type:"interval",location:Wu(),value:n,qualifier:t,op:""}},ce=function(n,t){return{type:"interval-qualifier",location:Wu(),start:n,end:t}},le=function(n,t){return{type:"interval-period",location:Wu(),period:n.value,precision:t,secondary:null}},fe=function(n){return{type:"interval-period",location:Wu(),period:n.value,precision:null,secondary:null}},he=function(n){return{type:"interval-period",location:Wu(),period:n.value,precision:null,secondary:null}},de=function(n,t){return{type:"interval-period",location:Wu(),period:"second",precision:n,secondary:t}},pe=function(n){return{type:"interval-period",location:Wu(),period:"second",precision:n,secondary:null}},me=function(){return{type:"interval-period",location:Wu(),period:"second",precision:null,secondary:null}},we=function(n,t){return{type:"interval-period",location:Wu(),period:n.value,precision:t,secondary:null}},ve=function(n){return{type:"interval-period",location:Wu(),period:n.value,precision:null,secondary:null}},ye=function(n,t){return{type:"interval-period",location:Wu(),period:"second",precision:n,secondary:t}},Ie=function(n){return{type:"interval-period",location:Wu(),period:"second",precision:n,secondary:null}},Ee=function(){return{type:"interval-period",location:Wu(),period:"second",precision:null,secondary:null}},Ne=function(){return{type:"string",location:Wu(),value:"day"}},Te=function(){return{type:"string",location:Wu(),value:"hour"}},ge=function(){return{type:"string",location:Wu(),value:"minute"}},xe=function(){return{type:"string",location:Wu(),value:"month"}},Oe=function(){return{type:"string",location:Wu(),value:"year"}},Pe=function(n){return parseFloat(n)},Ae=function(n){return parseFloat(n)},Se=function(n){return"string"===n.type&&So(n.value),{type:"date",location:Wu(),value:n.value}},Fe=function(){return{type:"null",location:Wu(),value:null}},Me=function(){return{type:"boolean",location:Wu(),value:!0}},Re=function(){return{type:"boolean",location:Wu(),value:!1}},be=function(){return"'"},$e=function(n){return{type:"string",location:Wu(),value:n.join("")}},Ue=function(n,t){return{type:"case-expression",location:Wu(),format:"simple",operand:n,clauses:t,else:null,elseLocation:null}},De=function(n,t,r){return{type:"case-expression",location:Wu(),format:"simple",operand:n,clauses:t,else:r.value,elseLocation:r.location}},ke=function(n){return{type:"case-expression",location:Wu(),format:"searched",clauses:n,else:null,elseLocation:null}},Le=function(n,t){return{type:"case-expression",location:Wu(),format:"searched",clauses:n,else:t.value,elseLocation:t.location}},Ce=function(n,t){return{type:"when-clause",location:Wu(),operand:n,value:t}},_e=function(n,t){return{type:"when-clause",location:Wu(),operand:n,value:t}},He=function(n){return{type:"else-clause",location:Wu(),value:n}},Ze=function(n){return{type:"number",location:Wu(),value:n}},ze=function(n,t,r){return parseFloat(n+t+r)},qe=function(n,t){return parseFloat(n+t)},Be=function(n,t){return parseFloat(n+t)},Je=function(n){return parseFloat(n)},Ve=function(n,t){return n[0]+t},Ye=function(n){return"."+(null!=n?n:"")},We=function(n,t){return n+t},Ge=function(n){return n.join("")},Ke=function(n,t){return"e"+(null===t?"":t)},je=function(){return"IN"},Xe=function(){return"IS"},Qe=function(){return"LIKE"},nu=function(){return"ESCAPE"},tu=function(){return"NOT"},ru=function(){return"AND"},eu=function(){return"OR"},uu=function(){return"BETWEEN"},iu=function(){return"FROM"},au=function(){return"FOR"},ou=function(){return"SUBSTRING"},su=function(){return"EXTRACT"},cu=function(){return"TRIM"},lu=function(){return"POSITION"},fu=function(){return"TIMESTAMP"},hu=function(){return"DATE"},du=function(){return"TIME"},pu=function(){return"LEADING"},mu=function(){return"TRAILING"},wu=function(){return"BOTH"},vu=function(){return"CAST"},yu=function(){return"AS"},Iu=function(){return"INTEGER"},Eu=function(){return"INT"},Nu=function(){return"SMALLINT"},Tu=function(){return"FLOAT"},gu=function(){return"REAL"},xu=function(){return"VARCHAR"},Ou=function(){return"TO"},Pu=function(){return"INTERVAL"},Au=function(){return"YEAR"},Su=function(){return"TIMEZONE_HOUR"},Fu=function(){return"TIMEZONE_MINUTE"},Mu=function(){return"MONTH"},Ru=function(){return"DAY"},bu=function(){return"HOUR"},$u=function(){return"MINUTE"},Uu=function(){return"SECOND"},Du=function(){return"CASE"},ku=function(){return"END"},Lu=function(){return"WHEN"},Cu=function(){return"THEN"},_u=function(){return"ELSE"},Hu=function(n){return n},Zu=function(n){return n.join("")},zu=0|t.peg$currPos,qu=zu,Bu=[{line:1,column:1}],Ju=zu,Vu=t.peg$maxFailExpected||[],Yu=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in i))throw new Error("Can't start parsing from rule \""+t.startRule+'".');a=i[t.startRule]}function Wu(){return ni(qu,zu)}function Gu(n,t){throw ri(n,t=void 0!==t?t:ni(qu,zu))}function Ku(n,t){return{type:"literal",text:n,ignoreCase:t}}function ju(n,t,r){return{type:"class",parts:n,inverted:t,ignoreCase:r}}function Xu(){return{type:"end"}}function Qu(t){var r,e=Bu[t];if(e)return e;if(t>=Bu.length)r=Bu.length-1;else for(r=t;!Bu[--r];);for(e={line:(e=Bu[r]).line,column:e.column};r<t;)10===n.charCodeAt(r)?(e.line++,e.column=1):e.column++,r++;return Bu[t]=e,e}function ni(n,t,r){var e=Qu(n),i=Qu(t);return{source:u,start:{offset:n,line:e.line,column:e.column},end:{offset:t,line:i.line,column:i.column}}}function ti(n){zu<Ju||(zu>Ju&&(Ju=zu,Vu=[]),Vu.push(n))}function ri(n,t){return new yt(n,null,null,t)}function ei(n,t,r){return new yt(yt.buildMessage(n,t),n,t,r)}function ui(){var n,t;return n=zu,Io(),(t=ai())!==e?(Io(),qu=n,n=jt(t)):(zu=n,n=e),n}function ii(){var n,t,r,u,i,a;if(n=zu,vo()!==e){for(Io(),t=[],r=ai();r!==e;)t.push(r),r=zu,u=zu,i=Io(),(a=wo())!==e?u=i=[i,a,Io()]:(zu=u,u=e),u!==e&&(u=ai())===e?(zu=r,r=e):r=u;r=Io(),(u=yo())!==e?(qu=n,n=Xt(t)):(zu=n,n=e)}else zu=n,n=e;return n}function ai(){var n,t,r,u,i,a;if(n=zu,(t=oi())!==e){for(r=[],u=zu,Io(),(i=ba())!==e?(Io(),(a=oi())!==e?(qu=u,u=Qt(t,i,a)):(zu=u,u=e)):(zu=u,u=e);u!==e;)r.push(u),u=zu,Io(),(i=ba())!==e?(Io(),(a=oi())!==e?(qu=u,u=Qt(t,i,a)):(zu=u,u=e)):(zu=u,u=e);qu=n,n=nr(t,r)}else zu=n,n=e;return n}function oi(){var n,t,r,u,i,a;if(n=zu,(t=si())!==e){for(r=[],u=zu,Io(),(i=Ra())!==e?(Io(),(a=si())!==e?(qu=u,u=tr(t,i,a)):(zu=u,u=e)):(zu=u,u=e);u!==e;)r.push(u),u=zu,Io(),(i=Ra())!==e?(Io(),(a=si())!==e?(qu=u,u=tr(t,i,a)):(zu=u,u=e)):(zu=u,u=e);qu=n,n=rr(t,r)}else zu=n,n=e;return n}function si(){var t,r,u,i,a;return t=zu,(r=Ma())===e&&(r=zu,33===n.charCodeAt(zu)?(u=o,zu++):(u=e,0===Yu&&ti(Fn)),u!==e?(i=zu,Yu++,61===n.charCodeAt(zu)?(a=s,zu++):(a=e,0===Yu&&ti(Mn)),Yu--,a===e?i=void 0:(zu=i,i=e),i!==e?r=u=[u,i]:(zu=r,r=e)):(zu=r,r=e)),r!==e?(u=Io(),(i=si())!==e?(qu=t,t=er(i)):(zu=t,t=e)):(zu=t,t=e),t===e&&(t=ci()),t}function ci(){var n,t,r,u;return n=zu,(t=Ii())!==e?(r=zu,Io(),(u=li())!==e?r=u:(zu=r,r=e),r===e&&(r=null),qu=n,n=ur(t,r)):(zu=n,n=e),n}function li(){var n;return(n=fi())===e&&(n=yi())===e&&(n=pi())===e&&(n=di())===e&&(n=vi()),n}function fi(){var n,t,r,u,i;if(n=zu,t=[],r=zu,Io(),(u=hi())!==e?(Io(),(i=Ii())!==e?(qu=r,r=ir(u,i)):(zu=r,r=e)):(zu=r,r=e),r!==e)for(;r!==e;)t.push(r),r=zu,Io(),(u=hi())!==e?(Io(),(i=Ii())!==e?(qu=r,r=ir(u,i)):(zu=r,r=e)):(zu=r,r=e);else t=e;return t!==e&&(qu=n,t=ar(t)),n=t}function hi(){var t;return n.substr(zu,2)===c?(t=c,zu+=2):(t=e,0===Yu&&ti(Rn)),t===e&&(62===n.charCodeAt(zu)?(t=l,zu++):(t=e,0===Yu&&ti(bn)),t===e&&(n.substr(zu,2)===f?(t=f,zu+=2):(t=e,0===Yu&&ti($n)),t===e&&(n.substr(zu,2)===h?(t=h,zu+=2):(t=e,0===Yu&&ti(Un)),t===e&&(t=n.charAt(zu),vn.test(t)?zu++:(t=e,0===Yu&&ti(Dn)),t===e&&(n.substr(zu,2)===d?(t=d,zu+=2):(t=e,0===Yu&&ti(kn))))))),t}function di(){var n,t,r,u;return n=zu,(t=Aa())!==e?(Io(),(r=Ma())!==e?(Io(),(u=Ii())!==e?(qu=n,n=or(t,u)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e),n===e&&(n=zu,(t=Aa())!==e?(Io(),(r=Ii())!==e?(qu=n,n=sr(t,r)):(zu=n,n=e)):(zu=n,n=e)),n}function pi(){var n,t,r,u,i,a,o,s;return n=zu,(t=Ma())!==e?(Io(),(r=$a())!==e?(u=Io(),i=zu,(a=Ii())!==e?(Io(),(o=Ra())!==e?(Io(),(s=Ii())!==e?(qu=i,i=cr(r,a,s)):(zu=i,i=e)):(zu=i,i=e)):(zu=i,i=e),i!==e?(qu=n,n=lr(r,i)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e),n===e&&(n=zu,(t=$a())!==e?(Io(),r=zu,(u=Ii())!==e?(i=Io(),(a=Ra())!==e?(Io(),(o=Ii())!==e?(qu=r,r=fr(t,u,o)):(zu=r,r=e)):(zu=r,r=e)):(zu=r,r=e),r!==e?(qu=n,n=hr(t,r)):(zu=n,n=e)):(zu=n,n=e)),n}function mi(){var n,t,r,u,i;return n=zu,t=zu,(r=Ma())!==e?(u=Io(),(i=Sa())!==e?t=r=[r,u,i]:(zu=t,t=e)):(zu=t,t=e),t!==e&&(qu=n,t=dr(t)),(n=t)===e&&(n=Sa()),n}function wi(){var n,t,r,u,i;return n=zu,t=zu,(r=Ma())!==e?(u=Io(),(i=Pa())!==e?t=r=[r,u,i]:(zu=t,t=e)):(zu=t,t=e),t!==e&&(qu=n,t=pr(t)),(n=t)===e&&(n=Pa()),n}function vi(){var n,t,r,u;return n=zu,(t=mi())!==e?(Io(),(r=oa())!==e?(Io(),Fa()!==e?(Io(),(u=sa())!==e?(qu=n,n=mr(t,r,u)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e),n===e&&(n=zu,(t=mi())!==e?(Io(),(r=oa())!==e?(qu=n,n=wr(t,r)):(zu=n,n=e)):(zu=n,n=e)),n}function yi(){var n,t,r;return n=zu,(t=wi())!==e?(Io(),(r=ii())!==e?(qu=n,n=vr(t,r)):(zu=n,n=e)):(zu=n,n=e),n===e&&(n=zu,(t=wi())!==e?(Io(),(r=Li())!==e?(qu=n,n=yr(t,r)):(zu=n,n=e)):(zu=n,n=e)),n}function Ii(){var n,t,r,u,i,a;if(n=zu,(t=Ni())!==e){for(r=[],u=zu,Io(),(i=Ei())!==e?(Io(),(a=Ni())!==e?(qu=u,u=Ir(t,i,a)):(zu=u,u=e)):(zu=u,u=e);u!==e;)r.push(u),u=zu,Io(),(i=Ei())!==e?(Io(),(a=Ni())!==e?(qu=u,u=Ir(t,i,a)):(zu=u,u=e)):(zu=u,u=e);qu=n,n=Er(t,r)}else zu=n,n=e;return n}function Ei(){var t;return t=n.charAt(zu),yn.test(t)?zu++:(t=e,0===Yu&&ti(Ln)),t===e&&(n.substr(zu,2)===p?(t=p,zu+=2):(t=e,0===Yu&&ti(Cn))),t}function Ni(){var n,t,r,u,i,a;if(n=zu,(t=gi())!==e){for(r=[],u=zu,Io(),(i=Ti())!==e?(Io(),(a=gi())!==e?(qu=u,u=Nr(t,i,a)):(zu=u,u=e)):(zu=u,u=e);u!==e;)r.push(u),u=zu,Io(),(i=Ti())!==e?(Io(),(a=gi())!==e?(qu=u,u=Nr(t,i,a)):(zu=u,u=e)):(zu=u,u=e);qu=n,n=Tr(t,r)}else zu=n,n=e;return n}function Ti(){var t;return t=n.charAt(zu),In.test(t)?zu++:(t=e,0===Yu&&ti(_n)),t}function gi(){var n,t;return(n=Yi())===e&&(n=Ci())===e&&(n=_i())===e&&(n=zi())===e&&(n=Bi())===e&&(n=Hi())===e&&(n=Ji())===e&&(n=ca())===e&&(n=xi())===e&&(n=Li())===e&&(n=zu,vo()!==e?(Io(),(t=ai())!==e?(Io(),yo()!==e?(qu=n,n=gr(t)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e)),n}function xi(){var n,t;return n=zu,(t=Oi())!==e&&(qu=n,t=xr(t)),(n=t)===e&&(n=zu,(t=Ri())!==e&&(qu=n,t=Or(t)),n=t),n}function Oi(){var n,t;return n=zu,(t=Pi())!==e&&(qu=n,t=Pr(t)),n=t}function Pi(){var n,t,r,u;if(n=zu,(t=Si())!==e){for(r=[],u=Mi();u!==e;)r.push(u),u=Mi();qu=n,n=Ar(t,r)}else zu=n,n=e;return n}function Ai(){var n,t,r,u;if(n=zu,(t=Si())!==e){for(r=[],u=Fi();u!==e;)r.push(u),u=Fi();qu=n,n=Sr(t,r)}else zu=n,n=e;return n}function Si(){var t;return t=n.charAt(zu),En.test(t)?zu++:(t=e,0===Yu&&ti(Hn)),t}function Fi(){var t;return t=n.charAt(zu),Nn.test(t)?zu++:(t=e,0===Yu&&ti(Zn)),t}function Mi(){var t;return t=n.charAt(zu),Tn.test(t)?zu++:(t=e,0===Yu&&ti(zn)),t}function Ri(){var n,t;return n=zu,ki()!==e?(t=bi(),ki()!==e?(qu=n,n=Fr(t)):(zu=n,n=e)):(zu=n,n=e),n}function bi(){var n,t,r;for(n=zu,t=[],r=$i();r!==e;)t.push(r),r=$i();return qu=n,n=t=Mr(t)}function $i(){var n;return(n=Di())===e&&(n=Ui()),n}function Ui(){var n;return n=zu,ki()!==e&&ki()!==e?(qu=n,n=Rr()):(zu=n,n=e),n}function Di(){var t;return t=n.charAt(zu),Tn.test(t)?zu++:(t=e,0===Yu&&ti(zn)),t}function ki(){var t;return t=n.charAt(zu),gn.test(t)?zu++:(t=e,0===Yu&&ti(qn)),t}function Li(){var t,r,u,i;return t=zu,r=zu,64===n.charCodeAt(zu)?(u=m,zu++):(u=e,0===Yu&&ti(Bn)),u!==e&&(i=Ai())!==e?r=u=[u,i]:(zu=r,r=e),r!==e&&(qu=t,r=br(r)),t=r}function Ci(){var n,t,r,u;return n=zu,La()!==e?(Io(),t=zu,vo()!==e?(Io(),(r=Vi())!==e?(Io(),Ua()!==e?(Io(),(u=ai())!==e?(Io(),yo()!==e?(qu=t,t=$r(r,u)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e),t===e&&(t=zu,vo()!==e?(Io(),(r=Vi())!==e?(Io(),wo()!==e?(Io(),(u=ai())!==e?(Io(),yo()!==e?(qu=t,t=Ur(r,u)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)),t!==e?(qu=n,n=Dr(t)):(zu=n,n=e)):(zu=n,n=e),n}function _i(){var n,t,r,u,i,a,o;return n=zu,ka()!==e?(Io(),t=zu,vo()!==e?(Io(),(r=ai())!==e?(Io(),Ua()!==e?(Io(),(u=ai())!==e?(Io(),i=zu,Da()!==e?(a=Io(),(o=ai())!==e?(Io(),i=o):(zu=i,i=e)):(zu=i,i=e),i===e&&(i=null),yo()!==e?(qu=t,t=kr(r,u,i)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e),t===e&&(t=zu,vo()!==e?(Io(),(r=ai())!==e?(Io(),wo()!==e?(Io(),(u=ai())!==e?(Io(),(i=wo())!==e?(Io(),(a=ai())!==e&&(o=yo())!==e?(qu=t,t=Lr(r,u,a)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)),t!==e?(qu=n,n=Cr(t)):(zu=n,n=e)):(zu=n,n=e),n}function Hi(){var n,t,r,u;return n=zu,Va()!==e?(Io(),t=zu,vo()!==e?(Io(),(r=ai())!==e?(Io(),Ya()!==e?(Io(),(u=Zi())!==e?(Io(),yo()!==e?(qu=t,t=_r(r,u)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e),t===e&&(t=zu,vo()!==e?(Io(),(r=ai())!==e?(Io(),wo()!==e?(Io(),(u=Zi())!==e?(Io(),yo()!==e?(qu=t,t=Hr(r,u)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)),t!==e?(qu=n,n=Zr(t)):(zu=n,n=e)):(zu=n,n=e),n}function Zi(){var n,t,r;return n=zu,(t=Wa())===e&&(t=Ga()),t!==e&&(qu=n,t=zr()),(n=t)===e&&(n=zu,(t=Ka())!==e&&(qu=n,t=qr()),(n=t)===e&&(n=zu,(t=ja())!==e&&(qu=n,t=Br()),(n=t)===e&&(n=zu,(t=Xa())!==e&&(qu=n,t=Jr()),(n=t)===e&&(n=zu,(t=Za())!==e&&(qu=n,t=Vr()),(n=t)===e&&(n=zu,(t=Ha())!==e&&(qu=n,t=Yr()),(n=t)===e&&(n=zu,(t=za())!==e&&(qu=n,t=Wr()),(n=t)===e&&(n=zu,(t=Qa())!==e?(Io(),vo()!==e?(Io(),(r=Ea())!==e?(Io(),yo()!==e?(qu=n,n=Gr(r)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e)))))))),n}function zi(){var n,t,r,u,i;return n=zu,Ca()!==e?(Io(),t=zu,vo()!==e?(Io(),r=qi(),Io(),(u=ai())!==e?(Io(),Ua()!==e?(Io(),(i=ai())!==e?(Io(),yo()!==e?(qu=t,t=Kr(r,u,i)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e),t===e&&(t=zu,vo()!==e?(Io(),r=qi(),Io(),(u=ai())!==e?(Io(),yo()!==e?(qu=t,t=jr(r,u)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)),t!==e?(qu=n,n=Xr(t)):(zu=n,n=e)):(zu=n,n=e),n}function qi(){var n,t;return n=zu,(t=qa())===e&&(t=Ba())===e&&(t=Ja()),t===e&&(t=null),qu=n,n=t=Qr(t)}function Bi(){var n,t,r,u;return n=zu,_a()!==e?(Io(),t=zu,vo()!==e?(Io(),(r=ai())!==e?(Io(),Pa()!==e?(Io(),(u=ai())!==e?(Io(),yo()!==e?(qu=t,t=ne(r,u)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e),t===e&&(t=zu,vo()!==e?(Io(),(r=ai())!==e?(Io(),wo()!==e?(Io(),(u=ai())!==e?(Io(),yo()!==e?(qu=t,t=te(r,u)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)),t!==e?(qu=n,n=re(t)):(zu=n,n=e)):(zu=n,n=e),n}function Ji(){var n,t,r,u;return n=zu,t=zu,Yu++,r=La(),Yu--,r===e?t=void 0:(zu=t,t=e),t!==e&&(r=No())!==e?(Io(),(u=ii())!==e?(qu=n,n=ee(r,u)):(zu=n,n=e)):(zu=n,n=e),n}function Vi(){var n,t;return n=zu,(t=ro())===e&&(t=io())===e&&(t=ao())===e&&(t=oo())===e&&(t=so())===e&&(t=co())===e&&(t=eo())===e&&(t=uo()),t!==e&&(qu=n,t=ue(t)),n=t}function Yi(){var n;return(n=sa())===e&&(n=ma())===e&&(n=aa())===e&&(n=ia())===e&&(n=ua())===e&&(n=Wi())===e&&(n=Ki())===e&&(n=Gi()),n}function Wi(){var n,t;return n=zu,Ha()!==e?(Io(),(t=oa())!==e?(qu=n,n=ie(t)):(zu=n,n=e)):(zu=n,n=e),n}function Gi(){var n,t;return n=zu,za()!==e?(Io(),(t=oa())!==e?(qu=n,n=ae(t)):(zu=n,n=e)):(zu=n,n=e),n}function Ki(){var t,r,u,i;return t=zu,to()!==e?(Io(),r=n.charAt(zu),yn.test(r)?zu++:(r=e,0===Yu&&ti(Ln)),r!==e?(Io(),(u=oa())!==e?(Io(),(i=ji())!==e?(qu=t,t=oe(r,u,i)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e),t===e&&(t=zu,to()!==e?(Io(),(r=oa())!==e?(Io(),(u=ji())!==e?(qu=t,t=se(r,u)):(zu=t,t=e)):(zu=t,t=e)):(zu=t,t=e)),t}function ji(){var n,t,r;return n=zu,(t=Xi())!==e?(Io(),no()!==e?(Io(),(r=Qi())!==e?(qu=n,n=ce(t,r)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e),n===e&&(n=na()),n}function Xi(){var n,t,r;return n=zu,(t=ta())!==e?(Io(),vo()!==e?(Io(),(r=ea())!==e?(Io(),yo()!==e?(qu=n,n=le(t,r)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e),n===e&&(n=zu,(t=ta())!==e&&(qu=n,t=fe(t)),n=t),n}function Qi(){var n,t,r,u;return n=zu,(t=ta())!==e&&(qu=n,t=he(t)),(n=t)===e&&(n=zu,(t=co())!==e?(Io(),vo()!==e?(Io(),(r=ea())!==e?(Io(),wo()!==e?(Io(),(u=ra())!==e?(Io(),yo()!==e?(qu=n,n=de(r,u)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e),n===e&&(n=zu,(t=co())!==e?(Io(),vo()!==e?(Io(),(r=ea())!==e?(Io(),yo()!==e?(qu=n,n=pe(r)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e),n===e&&(n=zu,(t=co())!==e&&(qu=n,t=me()),n=t))),n}function na(){var n,t,r,u;return n=zu,(t=ta())!==e?(Io(),vo()!==e?(Io(),(r=ra())!==e?(Io(),yo()!==e?(qu=n,n=we(t,r)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e),n===e&&(n=zu,(t=ta())!==e&&(qu=n,t=ve(t)),(n=t)===e&&(n=zu,(t=co())!==e?(Io(),vo()!==e?(Io(),(r=ea())!==e?(Io(),wo()!==e?(Io(),(u=ra())!==e?(Io(),yo()!==e?(qu=n,n=ye(r,u)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e),n===e&&(n=zu,(t=co())!==e?(Io(),vo()!==e?(Io(),(r=ra())!==e?(Io(),yo()!==e?(qu=n,n=Ie(r)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e),n===e&&(n=zu,(t=co())!==e&&(qu=n,t=Ee()),n=t)))),n}function ta(){var n,t;return n=zu,(t=ao())!==e&&(qu=n,t=Ne()),(n=t)===e&&(n=zu,(t=oo())!==e&&(qu=n,t=Te()),(n=t)===e&&(n=zu,(t=so())!==e&&(qu=n,t=ge()),(n=t)===e&&(n=zu,(t=io())!==e&&(qu=n,t=xe()),(n=t)===e&&(n=zu,(t=ro())!==e&&(qu=n,t=Oe()),n=t)))),n}function ra(){var n,t;return n=zu,(t=Ea())!==e&&(qu=n,t=Pe(t)),n=t}function ea(){var n,t;return n=zu,(t=Ea())!==e&&(qu=n,t=Ae(t)),n=t}function ua(){var n,t;return n=zu,Za()!==e?(Io(),(t=oa())!==e?(qu=n,n=Se(t)):(zu=n,n=e)):(zu=n,n=e),n}function ia(){var n,t;return n=zu,(t=ga())!==e&&(qu=n,t=Fe()),n=t}function aa(){var n,t;return n=zu,(t=xa())!==e&&(qu=n,t=Me()),(n=t)===e&&(n=zu,(t=Oa())!==e&&(qu=n,t=Re()),n=t),n}function oa(){var n;return(n=sa())===e&&(n=Li()),n}function sa(){var t,r,u,i,a;if(t=zu,39===n.charCodeAt(zu)?(r=w,zu++):(r=e,0===Yu&&ti(Jn)),r===e&&(n.substr(zu,2)===v?(r=v,zu+=2):(r=e,0===Yu&&ti(Vn))),r!==e){for(u=[],i=zu,n.substr(zu,2)===y?(a=y,zu+=2):(a=e,0===Yu&&ti(Yn)),a!==e&&(qu=i,a=be()),(i=a)===e&&(i=n.charAt(zu),xn.test(i)?zu++:(i=e,0===Yu&&ti(Wn)));i!==e;)u.push(i),i=zu,n.substr(zu,2)===y?(a=y,zu+=2):(a=e,0===Yu&&ti(Yn)),a!==e&&(qu=i,a=be()),(i=a)===e&&(i=n.charAt(zu),xn.test(i)?zu++:(i=e,0===Yu&&ti(Wn)));39===n.charCodeAt(zu)?(i=w,zu++):(i=e,0===Yu&&ti(Jn)),i!==e?(qu=t,t=$e(u)):(zu=t,t=e)}else zu=t,t=e;return t}function ca(){var n;return(n=la())===e&&(n=fa()),n}function la(){var n,t,r,u,i;if(n=zu,lo()!==e)if(Io(),(t=ai())!==e){for(Io(),r=[],u=zu,(i=da())!==e?(Io(),u=i):(zu=u,u=e);u!==e;)r.push(u),u=zu,(i=da())!==e?(Io(),u=i):(zu=u,u=e);(u=fo())!==e?(qu=n,n=Ue(t,r)):(zu=n,n=e)}else zu=n,n=e;else zu=n,n=e;if(n===e)if(n=zu,lo()!==e)if(Io(),(t=ai())!==e){for(Io(),r=[],u=zu,(i=da())!==e?(Io(),u=i):(zu=u,u=e);u!==e;)r.push(u),u=zu,(i=da())!==e?(Io(),u=i):(zu=u,u=e);(u=pa())!==e?(i=Io(),fo()!==e?(qu=n,n=De(t,r,u)):(zu=n,n=e)):(zu=n,n=e)}else zu=n,n=e;else zu=n,n=e;return n}function fa(){var n,t,r,u;if(n=zu,lo()!==e){for(Io(),t=[],r=zu,(u=ha())!==e?(Io(),r=u):(zu=r,r=e);r!==e;)t.push(r),r=zu,(u=ha())!==e?(Io(),r=u):(zu=r,r=e);(r=fo())!==e?(qu=n,n=ke(t)):(zu=n,n=e)}else zu=n,n=e;if(n===e)if(n=zu,lo()!==e){for(Io(),t=[],r=zu,(u=ha())!==e?(Io(),r=u):(zu=r,r=e);r!==e;)t.push(r),r=zu,(u=ha())!==e?(Io(),r=u):(zu=r,r=e);(r=pa())!==e?(u=Io(),fo()!==e?(qu=n,n=Le(t,r)):(zu=n,n=e)):(zu=n,n=e)}else zu=n,n=e;return n}function ha(){var n,t,r;return n=zu,ho()!==e?(Io(),(t=ai())!==e?(Io(),po()!==e?(Io(),(r=ai())!==e?(qu=n,n=Ce(t,r)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e),n}function da(){var n,t,r;return n=zu,ho()!==e?(Io(),(t=ai())!==e?(Io(),po()!==e?(Io(),(r=ai())!==e?(qu=n,n=_e(t,r)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e)):(zu=n,n=e),n}function pa(){var n,t;return n=zu,mo()!==e?(Io(),(t=ai())!==e?(qu=n,n=He(t)):(zu=n,n=e)):(zu=n,n=e),n}function ma(){var n,t,r,u;return n=zu,(t=wa())!==e?(r=zu,Yu++,u=Si(),Yu--,u===e?r=void 0:(zu=r,r=e),r!==e?(qu=n,n=Ze(t)):(zu=n,n=e)):(zu=n,n=e),n}function wa(){var n,t,r,u;return n=zu,(t=va())!==e&&(r=ya())!==e&&(u=Ia())!==e?(qu=n,n=ze(t,r,u)):(zu=n,n=e),n===e&&(n=zu,(t=va())!==e&&(r=ya())!==e?(qu=n,n=qe(t,r)):(zu=n,n=e),n===e&&(n=zu,(t=va())!==e&&(r=Ia())!==e?(qu=n,n=Be(t,r)):(zu=n,n=e),n===e&&(n=zu,(t=va())!==e&&(qu=n,t=Je(t)),n=t))),n}function va(){var t,r,u;return(t=Ea())===e&&(t=zu,r=n.charAt(zu),yn.test(r)?zu++:(r=e,0===Yu&&ti(Ln)),r!==e&&(u=Ea())!==e?(qu=t,t=Ve(r,u)):(zu=t,t=e)),t}function ya(){var t,r,u;return t=zu,46===n.charCodeAt(zu)?(r=I,zu++):(r=e,0===Yu&&ti(Gn)),r!==e?((u=Ea())===e&&(u=null),qu=t,t=Ye(u)):(zu=t,t=e),t}function Ia(){var n,t,r;return n=zu,(t=Ta())!==e&&(r=Ea())!==e?(qu=n,n=We(t,r)):(zu=n,n=e),n}function Ea(){var n,t,r;if(n=zu,t=[],(r=Na())!==e)for(;r!==e;)t.push(r),r=Na();else t=e;return t!==e&&(qu=n,t=Ge(t)),n=t}function Na(){var t;return t=n.charAt(zu),On.test(t)?zu++:(t=e,0===Yu&&ti(Kn)),t}function Ta(){var t,r,u;return t=zu,r=n.charAt(zu),Pn.test(r)?zu++:(r=e,0===Yu&&ti(jn)),r!==e?(u=n.charAt(zu),yn.test(u)?zu++:(u=e,0===Yu&&ti(Ln)),u===e&&(u=null),qu=t,t=Ke(r,u)):(zu=t,t=e),t}function ga(){var t,r,u,i;return t=zu,(r=n.substr(zu,4)).toLowerCase()===E?zu+=4:(r=e,0===Yu&&ti(Xn)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?t=r=[r,u]:(zu=t,t=e)):(zu=t,t=e),t}function xa(){var t,r,u,i;return t=zu,(r=n.substr(zu,4)).toLowerCase()===N?zu+=4:(r=e,0===Yu&&ti(Qn)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?t=r=[r,u]:(zu=t,t=e)):(zu=t,t=e),t}function Oa(){var t,r,u,i;return t=zu,(r=n.substr(zu,5)).toLowerCase()===T?zu+=5:(r=e,0===Yu&&ti(nt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?t=r=[r,u]:(zu=t,t=e)):(zu=t,t=e),t}function Pa(){var t,r,u,i;return t=zu,(r=n.substr(zu,2)).toLowerCase()===g?zu+=2:(r=e,0===Yu&&ti(tt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=je()):(zu=t,t=e)):(zu=t,t=e),t}function Aa(){var t,r,u,i;return t=zu,(r=n.substr(zu,2)).toLowerCase()===x?zu+=2:(r=e,0===Yu&&ti(rt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=Xe()):(zu=t,t=e)):(zu=t,t=e),t}function Sa(){var t,r,u,i;return t=zu,(r=n.substr(zu,4)).toLowerCase()===O?zu+=4:(r=e,0===Yu&&ti(et)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=Qe()):(zu=t,t=e)):(zu=t,t=e),t}function Fa(){var t,r,u,i;return t=zu,(r=n.substr(zu,6)).toLowerCase()===P?zu+=6:(r=e,0===Yu&&ti(ut)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=nu()):(zu=t,t=e)):(zu=t,t=e),t}function Ma(){var t,r,u,i;return t=zu,(r=n.substr(zu,3)).toLowerCase()===A?zu+=3:(r=e,0===Yu&&ti(it)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=tu()):(zu=t,t=e)):(zu=t,t=e),t}function Ra(){var t,r,u,i;return t=zu,(r=n.substr(zu,3)).toLowerCase()===S?zu+=3:(r=e,0===Yu&&ti(at)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=ru()):(zu=t,t=e)):(zu=t,t=e),t}function ba(){var t,r,u,i;return t=zu,(r=n.substr(zu,2)).toLowerCase()===F?zu+=2:(r=e,0===Yu&&ti(ot)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=eu()):(zu=t,t=e)):(zu=t,t=e),t}function $a(){var t,r,u,i;return t=zu,(r=n.substr(zu,7)).toLowerCase()===M?zu+=7:(r=e,0===Yu&&ti(st)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=uu()):(zu=t,t=e)):(zu=t,t=e),t}function Ua(){var t,r,u,i;return t=zu,(r=n.substr(zu,4)).toLowerCase()===R?zu+=4:(r=e,0===Yu&&ti(ct)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=iu()):(zu=t,t=e)):(zu=t,t=e),t}function Da(){var t,r,u,i;return t=zu,(r=n.substr(zu,3)).toLowerCase()===b?zu+=3:(r=e,0===Yu&&ti(lt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=au()):(zu=t,t=e)):(zu=t,t=e),t}function ka(){var t,r,u,i;return t=zu,(r=n.substr(zu,9)).toLowerCase()===$?zu+=9:(r=e,0===Yu&&ti(ft)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=ou()):(zu=t,t=e)):(zu=t,t=e),t}function La(){var t,r,u,i;return t=zu,(r=n.substr(zu,7)).toLowerCase()===U?zu+=7:(r=e,0===Yu&&ti(ht)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=su()):(zu=t,t=e)):(zu=t,t=e),t}function Ca(){var t,r,u,i;return t=zu,(r=n.substr(zu,4)).toLowerCase()===D?zu+=4:(r=e,0===Yu&&ti(dt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=cu()):(zu=t,t=e)):(zu=t,t=e),t}function _a(){var t,r,u,i;return t=zu,(r=n.substr(zu,8)).toLowerCase()===k?zu+=8:(r=e,0===Yu&&ti(pt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=lu()):(zu=t,t=e)):(zu=t,t=e),t}function Ha(){var t,r,u,i;return t=zu,(r=n.substr(zu,9)).toLowerCase()===L?zu+=9:(r=e,0===Yu&&ti(mt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=fu()):(zu=t,t=e)):(zu=t,t=e),t}function Za(){var t,r,u,i;return t=zu,(r=n.substr(zu,4)).toLowerCase()===C?zu+=4:(r=e,0===Yu&&ti(wt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=hu()):(zu=t,t=e)):(zu=t,t=e),t}function za(){var t,r,u,i;return t=zu,(r=n.substr(zu,4)).toLowerCase()===_?zu+=4:(r=e,0===Yu&&ti(vt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=du()):(zu=t,t=e)):(zu=t,t=e),t}function qa(){var t,r,u,i;return t=zu,(r=n.substr(zu,7)).toLowerCase()===H?zu+=7:(r=e,0===Yu&&ti(It)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=pu()):(zu=t,t=e)):(zu=t,t=e),t}function Ba(){var t,r,u,i;return t=zu,(r=n.substr(zu,8)).toLowerCase()===Z?zu+=8:(r=e,0===Yu&&ti(Et)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=mu()):(zu=t,t=e)):(zu=t,t=e),t}function Ja(){var t,r,u,i;return t=zu,(r=n.substr(zu,4)).toLowerCase()===z?zu+=4:(r=e,0===Yu&&ti(Nt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=wu()):(zu=t,t=e)):(zu=t,t=e),t}function Va(){var t,r,u,i;return t=zu,(r=n.substr(zu,4)).toLowerCase()===q?zu+=4:(r=e,0===Yu&&ti(Tt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=vu()):(zu=t,t=e)):(zu=t,t=e),t}function Ya(){var t,r,u,i;return t=zu,(r=n.substr(zu,2)).toLowerCase()===B?zu+=2:(r=e,0===Yu&&ti(gt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=yu()):(zu=t,t=e)):(zu=t,t=e),t}function Wa(){var t,r,u,i;return t=zu,(r=n.substr(zu,7)).toLowerCase()===J?zu+=7:(r=e,0===Yu&&ti(xt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=Iu()):(zu=t,t=e)):(zu=t,t=e),t}function Ga(){var t,r,u,i;return t=zu,(r=n.substr(zu,3)).toLowerCase()===V?zu+=3:(r=e,0===Yu&&ti(Ot)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=Eu()):(zu=t,t=e)):(zu=t,t=e),t}function Ka(){var t,r,u,i;return t=zu,(r=n.substr(zu,8)).toLowerCase()===Y?zu+=8:(r=e,0===Yu&&ti(Pt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=Nu()):(zu=t,t=e)):(zu=t,t=e),t}function ja(){var t,r,u,i;return t=zu,(r=n.substr(zu,5)).toLowerCase()===W?zu+=5:(r=e,0===Yu&&ti(At)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=Tu()):(zu=t,t=e)):(zu=t,t=e),t}function Xa(){var t,r,u,i;return t=zu,(r=n.substr(zu,4)).toLowerCase()===G?zu+=4:(r=e,0===Yu&&ti(St)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=gu()):(zu=t,t=e)):(zu=t,t=e),t}function Qa(){var t,r,u,i;return t=zu,(r=n.substr(zu,7)).toLowerCase()===K?zu+=7:(r=e,0===Yu&&ti(Ft)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=xu()):(zu=t,t=e)):(zu=t,t=e),t}function no(){var t,r,u,i;return t=zu,(r=n.substr(zu,2)).toLowerCase()===j?zu+=2:(r=e,0===Yu&&ti(Mt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=Ou()):(zu=t,t=e)):(zu=t,t=e),t}function to(){var t,r,u,i;return t=zu,(r=n.substr(zu,8)).toLowerCase()===X?zu+=8:(r=e,0===Yu&&ti(Rt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=Pu()):(zu=t,t=e)):(zu=t,t=e),t}function ro(){var t,r,u,i;return t=zu,(r=n.substr(zu,4)).toLowerCase()===Q?zu+=4:(r=e,0===Yu&&ti(bt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=Au()):(zu=t,t=e)):(zu=t,t=e),t}function eo(){var t,r,u,i;return t=zu,(r=n.substr(zu,13)).toLowerCase()===nn?zu+=13:(r=e,0===Yu&&ti($t)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=Su()):(zu=t,t=e)):(zu=t,t=e),t}function uo(){var t,r,u,i;return t=zu,(r=n.substr(zu,15)).toLowerCase()===tn?zu+=15:(r=e,0===Yu&&ti(Ut)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=Fu()):(zu=t,t=e)):(zu=t,t=e),t}function io(){var t,r,u,i;return t=zu,(r=n.substr(zu,5)).toLowerCase()===rn?zu+=5:(r=e,0===Yu&&ti(Dt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=Mu()):(zu=t,t=e)):(zu=t,t=e),t}function ao(){var t,r,u,i;return t=zu,(r=n.substr(zu,3)).toLowerCase()===en?zu+=3:(r=e,0===Yu&&ti(kt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=Ru()):(zu=t,t=e)):(zu=t,t=e),t}function oo(){var t,r,u,i;return t=zu,(r=n.substr(zu,4)).toLowerCase()===un?zu+=4:(r=e,0===Yu&&ti(Lt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=bu()):(zu=t,t=e)):(zu=t,t=e),t}function so(){var t,r,u,i;return t=zu,(r=n.substr(zu,6)).toLowerCase()===an?zu+=6:(r=e,0===Yu&&ti(Ct)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=$u()):(zu=t,t=e)):(zu=t,t=e),t}function co(){var t,r,u,i;return t=zu,(r=n.substr(zu,6)).toLowerCase()===on?zu+=6:(r=e,0===Yu&&ti(_t)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=Uu()):(zu=t,t=e)):(zu=t,t=e),t}function lo(){var t,r,u,i;return t=zu,(r=n.substr(zu,4)).toLowerCase()===sn?zu+=4:(r=e,0===Yu&&ti(Ht)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=Du()):(zu=t,t=e)):(zu=t,t=e),t}function fo(){var t,r,u,i;return t=zu,(r=n.substr(zu,3)).toLowerCase()===cn?zu+=3:(r=e,0===Yu&&ti(Zt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=ku()):(zu=t,t=e)):(zu=t,t=e),t}function ho(){var t,r,u,i;return t=zu,(r=n.substr(zu,4)).toLowerCase()===ln?zu+=4:(r=e,0===Yu&&ti(zt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=Lu()):(zu=t,t=e)):(zu=t,t=e),t}function po(){var t,r,u,i;return t=zu,(r=n.substr(zu,4)).toLowerCase()===fn?zu+=4:(r=e,0===Yu&&ti(qt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=Cu()):(zu=t,t=e)):(zu=t,t=e),t}function mo(){var t,r,u,i;return t=zu,(r=n.substr(zu,4)).toLowerCase()===hn?zu+=4:(r=e,0===Yu&&ti(Bt)),r!==e?(u=zu,Yu++,i=Fi(),Yu--,i===e?u=void 0:(zu=u,u=e),u!==e?(qu=t,t=_u()):(zu=t,t=e)):(zu=t,t=e),t}function wo(){var t;return 44===n.charCodeAt(zu)?(t=dn,zu++):(t=e,0===Yu&&ti(Jt)),t}function vo(){var t;return 40===n.charCodeAt(zu)?(t=pn,zu++):(t=e,0===Yu&&ti(Vt)),t}function yo(){var t;return 41===n.charCodeAt(zu)?(t=mn,zu++):(t=e,0===Yu&&ti(Yt)),t}function Io(){var n,t;for(n=[],t=Eo();t!==e;)n.push(t),t=Eo();return n}function Eo(){var t;return t=n.charAt(zu),An.test(t)?zu++:(t=e,0===Yu&&ti(Wt)),t}function No(){var t,r,u,i;if(t=zu,(r=Ai())!==e&&(qu=t,r=Hu(r)),(t=r)===e)if(t=zu,96===n.charCodeAt(zu)?(r=wn,zu++):(r=e,0===Yu&&ti(Gt)),r!==e){if(u=[],i=n.charAt(zu),Sn.test(i)?zu++:(i=e,0===Yu&&ti(Kt)),i!==e)for(;i!==e;)u.push(i),i=n.charAt(zu),Sn.test(i)?zu++:(i=e,0===Yu&&ti(Kt));else u=e;u!==e?(96===n.charCodeAt(zu)?(i=wn,zu++):(i=e,0===Yu&&ti(Gt)),i!==e?(qu=t,t=Zu(u)):(zu=t,t=e)):(zu=t,t=e)}else zu=t,t=e;return t}function To(n,t,r){return{type:"unary-expression",location:r,operator:n,expr:t}}function go(n,t,r,e,u){const i={type:"binary-expression",location:u,operator:n,left:t,right:r};return void 0!==e&&(i.escape=e),i}function xo(n,...t){return{type:"expression-list",location:n,value:t}}function Oo(n,t){let r=n;for(const{op:n,expr:e,location:{end:u}}of t)r=go(n,r,e,void 0,{...r.location,end:u});return r}function Po(n){!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(n)&&Gu("Timestamp literal is invalid")}function Ao(n){!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(n)&&Gu("Time literal is invalid")}function So(n){!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(n)&&Gu("Date literal is invalid")}if(r=a(),t.peg$library)return{peg$result:r,peg$currPos:zu,peg$FAILED:e,peg$maxFailExpected:Vu,peg$maxFailPos:Ju};if(r!==e&&zu===n.length)return r;throw r!==e&&zu<n.length&&ti(Xu()),ei(Vu,Ju<n.length?n.charAt(Ju):null,Ju<n.length?ni(Ju,Ju+1):ni(Ju,Ju))}vt(yt,Error),yt.prototype.format=function(n){var t="Error: "+this.message;if(this.location){var r,e=null;for(r=0;r<n.length;r++)if(n[r].source===this.location.source){e=n[r].text.split(/\r\n|\n|\r/g);break}var u=this.location.start,i=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(u):u,a=this.location.source+":"+i.line+":"+i.column;if(e){var o=this.location.end,s=It("",i.line.toString().length," "),c=e[u.line-1],l=(u.line===o.line?o.column:c.length+1)-u.column||1;t+="\n --\x3e "+a+"\n"+s+" |\n"+i.line+" | "+c+"\n"+s+" | "+It("",u.column-1," ")+It("",l,"^")}else t+="\n at "+a}return t},yt.buildMessage=function(n,t){var r={literal:function(n){return'"'+u(n.text)+'"'},class:function(n){var t=n.parts.map((function(n){return Array.isArray(n)?i(n[0])+"-"+i(n[1]):i(n)}));return"["+(n.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(n){return n.description}};function e(n){return n.charCodeAt(0).toString(16).toUpperCase()}function u(n){return n.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(n){return"\\x0"+e(n)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(n){return"\\x"+e(n)}))}function i(n){return n.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(n){return"\\x0"+e(n)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(n){return"\\x"+e(n)}))}function a(n){return r[n.type](n)}function o(n){var t,r,e=n.map(a);if(e.sort(),e.length>0){for(t=1,r=1;t<e.length;t++)e[t-1]!==e[t]&&(e[r]=e[t],r++);e.length=r}switch(e.length){case 1:return e[0];case 2:return e[0]+" or "+e[1];default:return e.slice(0,-1).join(", ")+", or "+e[e.length-1]}}function s(n){return n?'"'+u(n)+'"':"end of input"}return"Expected "+o(n)+" but "+s(t)+" found."};class Nt{static parse(n){return Et(n)}}function Tt(n,t){if(null!=n)switch(t(n),n.type){case"when-clause":Tt(n.operand,t),Tt(n.value,t);break;case"case-expression":for(const r of n.clauses)Tt(r,t);"simple"===n.format&&Tt(n.operand,t),null!==n.else&&Tt(n.else,t);break;case"expression-list":for(const r of n.value)Tt(r,t);break;case"unary-expression":Tt(n.expr,t);break;case"binary-expression":Tt(n.left,t),Tt(n.right,t);break;case"function":Tt(n.args,t);break;case"interval":Tt(n.value,t),Tt(n.qualifier,t);break;case"interval-qualifier":Tt(n.start,t),Tt(n.end,t)}}const gt=new Set(["current_timestamp","current_date","current_time"]);class xt{static makeBool(n){return Pt(n)}static featureValue(n,t,r,e){return Lt(n,t,r,e)}static equalsNull(n){return null===n}static applyLike(n,t,r){return Dt(n,t,r)}static ensureArray(n){return At(n)}static applyIn(n,t,r){return Rt(n,t)}static currentTimestamp(n){return U(new Date,n)}static currentDate(t){return n.fromNow(t)}static currentTime(n){const r=U(new Date,n);return t.fromDateTime(r)}static makeSqlInterval(n,t,r){return O.createFromValueAndQualifier(n,t,r)}static convertInterval(n){return n instanceof O?n.valueInMilliseconds():n}static compare(n,t,r,e){return nn(t,r,n)}static calculate(n,t,r,e){return Nn(n,t,r,e)}static evaluateTime(n){return q(n)}static evaluateTimestamp(n,t,r){return B(n,t,r)}static evaluateDate(n,t){return J(n,t)}static evaluateFunction(n,t,r){return hn(n,t,r)}static lookup(n,t){const r=t[n];return void 0===r?null:r}static between(n,t,r){return null==n||null==t[0]||null==t[1]?null:nn(n,t[0],">=")&&nn(n,t[1],"<=")}static notbetween(n,t,r){return null==n||null==t[0]||null==t[1]?null:nn(n,t[0],"<")||nn(n,t[1],">")}static ternaryNot(n){return St(n)}static ternaryAnd(n,t){return Ft(n,t)}static ternaryOr(n,t){return Mt(n,t)}}class Ot{constructor(n,t,r="UTC",e=null){this.fieldsIndex=t,this.timeZone=r,this.currentUser=e,this.parameters={},this._hasDateFunctions=void 0,this.parseTree=Nt.parse(n);const{isStandardized:u,isAggregate:i,currentUserRequired:a,referencedFieldNames:o}=this._extractExpressionInfo(t);this._referencedFieldNames=o,this.isStandardized=u,this.isAggregate=i,this.currentUserRequired=a}static convertValueToStorageFormat(r,e=null){if(null===e)return C(r)?r.getTime():_(r)?r.toMillis():z(r)?r.toStorageFormat():Z(r)?r.toStorageString():H(r)?r.toStorageFormat():r;switch(e){case"date":return C(r)?r.getTime():_(r)?r.toMillis():z(r)?r.toMilliseconds():H(r)?r.toNumber():r;case"date-only":return C(r)?n.fromDateJS(r).toString():z(r)?n.fromSqlTimeStampOffset(r).toString():_(r)?n.fromDateTime(r).toString():r;case"time-only":return C(r)?t.fromDateJS(r).toStorageString():_(r)?t.fromDateTime(r).toStorageString():z(r)?t.fromSqlTimeStampOffset(r).toStorageString():Z(r)?r.toStorageString():r;case"timestamp-offset":if(C(r))return m.fromJSDate(r).toStorageFormat();if(_(r))return m.fromDateTime(r).toStorageFormat();if(z(r))return r.toStorageFormat()}return r}static create(n,t={}){return new Ot(n,t.fieldsIndex,t.timeZone??void 0,t.currentUser)}get fieldNames(){return this._referencedFieldNames}testSet(n,t=Ct,r=this.currentUser){return!!this._evaluateNode(this.parseTree,null,t,n,r)}calculateValue(n,t=Ct,r=this.currentUser){const e=this._evaluateNode(this.parseTree,n,t,null,r);return e instanceof O?e.valueInMilliseconds()/864e5:e}calculateValueCompiled(n,t=Ct,r=this.currentUser){return null!=this.parseTree._compiledVersion?this.parseTree._compiledVersion(n,this.parameters,t,this.fieldsIndex,this.timeZone,r??null):l("esri-csp-restrictions")?this.calculateValue(n,t):(this._compileMe(),this.parseTree._compiledVersion(n,this.parameters,t,this.fieldsIndex,this.timeZone,r??null))}testFeature(n,t=Ct,r=this.currentUser){return!!this._evaluateNode(this.parseTree,n,t,null,r)}testFeatureCompiled(n,t=Ct,r=this.currentUser){return null!=this.parseTree._compiledVersion?!!this.parseTree._compiledVersion(n,this.parameters,t,this.fieldsIndex,this.timeZone,r??null):l("esri-csp-restrictions")?this.testFeature(n,t):(this._compileMe(),!!this.parseTree._compiledVersion(n,this.parameters,t,this.fieldsIndex,this.timeZone,r??null))}get hasDateFunctions(){return null!=this._hasDateFunctions||(this._hasDateFunctions=!1,Tt(this.parseTree,(n=>{"current-time"===n.type?this._hasDateFunctions=!0:"function"===n.type&&(this._hasDateFunctions=this._hasDateFunctions||gt.has(n.name.toLowerCase()))}))),this._hasDateFunctions}getFunctions(){const n=new Set;return Tt(this.parseTree,(t=>{"function"===t.type&&n.add(t.name.toLowerCase())})),Array.from(n)}getExpressions(){const n=new Map;return Tt(this.parseTree,(t=>{if("function"===t.type){const r=t.name.toLowerCase(),e=t.args.value[0];if("column-reference"===e.type){const t=e.column,u=`${r}-${t}`;n.has(u)||n.set(u,{aggregateType:r,field:t})}}})),[...n.values()]}getVariables(){const n=new Set;return Tt(this.parseTree,(t=>{"parameter"===t.type&&n.add(t.value.toLowerCase())})),Array.from(n)}_compileMe(){const n="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","fieldsIndex","timeZone","currentUser",n).bind(xt)}_extractExpressionInfo(n){const t=[],r=new Set;let e=!0,u=!1,i=!1;return Tt(this.parseTree,(a=>{switch(a.type){case"column-reference":{const e=n?.get(a.column);let u,i;e?u=i=e.name??"":(i=a.column,u=i.toLowerCase()),r.has(u)||(r.add(u),t.push(i)),a.column=i;break}case"current-user":i=!0;break;case"function":{const{name:n,args:t}=a,r=t.value.length;e&&(e=dn(n,r)),!1===u&&(u=v(n,r));break}}})),{referencedFieldNames:Array.from(t),isStandardized:e,isAggregate:u,currentUserRequired:i}}evaluateNodeToJavaScript(n){switch(n.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(n.value)+", "+JSON.stringify(n.qualifier)+","+JSON.stringify(n.op)+")";case"case-expression":{let t="";if("simple"===n.format){const r=this.evaluateNodeToJavaScript(n.operand);t="( ";for(let e=0;e<n.clauses.length;e++)t+=" (this.compare('=',"+r+","+this.evaluateNodeToJavaScript(n.clauses[e].operand)+") ? ("+this.evaluateNodeToJavaScript(n.clauses[e].value)+") : ";null!==n.else?t+=this.evaluateNodeToJavaScript(n.else):t+="null",t+=" )"}else{t="( ";for(let r=0;r<n.clauses.length;r++)t+=" this.makeBool("+this.evaluateNodeToJavaScript(n.clauses[r].operand)+")===true ? ("+this.evaluateNodeToJavaScript(n.clauses[r].value)+") : ";null!==n.else?t+=this.evaluateNodeToJavaScript(n.else):t+="null",t+=" )"}return t}case"parameter":return"this.lookup("+JSON.stringify(n.value.toLowerCase())+",lookups)";case"expression-list":{let t="[";for(const r of n.value)"["!==t&&(t+=","),t+=this.evaluateNodeToJavaScript(r);return t+="]",t}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(n.expr)+")";case"binary-expression":switch(n.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+" )";case"IS":if("null"!==n.right.type)throw new d(f.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(n.left)+")";case"ISNOT":if("null"!==n.right.type)throw new d(f.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(n.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(n.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(n.right)+"), timeZone)";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(n.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(n.right)+"), timeZone))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+", timeZone)";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+", timeZone)";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+","+JSON.stringify(n.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+","+JSON.stringify(n.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(n.operator)+","+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+", timeZone)";case"*":case"-":case"+":case"/":case"||":return"this.calculate("+JSON.stringify(n.operator)+","+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+", timeZone)";default:throw new d(f.UnsupportedOperator,{operator:n.operator})}case"null":case"boolean":case"string":case"number":return JSON.stringify(n.value);case"time":return"this.evaluateTime("+JSON.stringify(n.value)+")";case"date":return"this.evaluateDate("+JSON.stringify(n.value)+", 'unknown')";case"timestamp":return"this.evaluateTimestamp("+JSON.stringify(n.value)+", 'unknown')";case"current-time":return"date"===n.mode?"this.currentDate(timeZone)":"time"===n.mode?"this.currentTime(timeZone)":"this.currentTimestamp(timeZone)";case"current-user":return"currentUser";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(n.column)+",fieldsIndex,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(n.name)+","+this.evaluateNodeToJavaScript(n.args)+", timeZone)"}throw new d(f.UnsupportedSyntax,{node:n.type})}_evaluateNode(n,t,e,i,a){let o;switch(n.type){case"interval":{const r=this._evaluateNode(n.value,t,e,i,a);return O.createFromValueAndQualifier(r,n.qualifier,n.op)}case"case-expression":if("simple"===n.format){const r=this._evaluateNode(n.operand,t,e,i,a);for(let u=0;u<n.clauses.length;u++)if(nn(r,this._evaluateNode(n.clauses[u].operand,t,e,i,a),"="))return this._evaluateNode(n.clauses[u].value,t,e,i,a);if(null!==n.else)return this._evaluateNode(n.else,t,e,i,a)}else{for(let r=0;r<n.clauses.length;r++)if(Pt(this._evaluateNode(n.clauses[r].operand,t,e,i,a)))return this._evaluateNode(n.clauses[r].value,t,e,i,a);if(null!==n.else)return this._evaluateNode(n.else,t,e,i,a)}return null;case"parameter":return o=this.parameters[n.value.toLowerCase()],C(o)?u.DateTime.fromJSDate(o):o instanceof r?o.toDateTime():o;case"expression-list":{const r=[];for(const u of n.value)r.push(this._evaluateNode(u,t,e,i,a));return r}case"unary-expression":return St(this._evaluateNode(n.expr,t,e,i,a));case"binary-expression":switch(n.operator){case"AND":return Ft(this._evaluateNode(n.left,t,e,i,a),this._evaluateNode(n.right,t,e,i,a));case"OR":return Mt(this._evaluateNode(n.left,t,e,i,a),this._evaluateNode(n.right,t,e,i,a));case"IS":if("null"!==n.right.type)throw new d(f.UnsupportedIsRhs);return null===this._evaluateNode(n.left,t,e,i,a);case"ISNOT":if("null"!==n.right.type)throw new d(f.UnsupportedIsRhs);return null!==this._evaluateNode(n.left,t,e,i,a);case"IN":{const r=At(this._evaluateNode(n.right,t,e,i,a));return Rt(this._evaluateNode(n.left,t,e,i,a),r)}case"NOT IN":{const r=At(this._evaluateNode(n.right,t,e,i,a));return St(Rt(this._evaluateNode(n.left,t,e,i,a),r))}case"BETWEEN":{const r=this._evaluateNode(n.left,t,e,i,a),u=this._evaluateNode(n.right,t,e,i,a);return null==r||null==u[0]||null==u[1]?null:nn(r,u[0],">=")&&nn(r,u[1],"<=")}case"NOTBETWEEN":{const r=this._evaluateNode(n.left,t,e,i,a),u=this._evaluateNode(n.right,t,e,i,a);return null==r||null==u[0]||null==u[1]?null:nn(r,u[0],"<")||nn(r,u[1],">")}case"LIKE":return Dt(this._evaluateNode(n.left,t,e,i,a),this._evaluateNode(n.right,t,e,i,a),n.escape);case"NOT LIKE":return St(Dt(this._evaluateNode(n.left,t,e,i,a),this._evaluateNode(n.right,t,e,i,a),n.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return nn(this._evaluateNode(n.left,t,e,i,a),this._evaluateNode(n.right,t,e,i,a),n.operator);case"-":case"+":case"*":case"/":case"||":return Nn(n.operator,this._evaluateNode(n.left,t,e,i,a),this._evaluateNode(n.right,t,e,i,a),this.timeZone)}case"null":case"boolean":case"string":case"number":return n.value;case"date":return n.parsedValue??=J(n.value,"unknown"),n.parsedValue;case"timestamp":return n.parsedValue??=B(n.value,"unknown"),n.parsedValue;case"time":return q(n.value);case"current-time":return"date"===n.mode?xt.currentDate(this.timeZone):"time"===n.mode?xt.currentTime(this.timeZone):xt.currentTimestamp(this.timeZone);case"current-user":return a??null;case"column-reference":return Lt(t,n.column,this.fieldsIndex,e);case"data-type":return n.value;case"function":{if(this.isAggregate&&v(n.name,n.args.value.length)){const t=[];for(const r of n.args?.value||[]){const n=[];for(const t of i||[])n.push(this._evaluateNode(r,t,e,null,a));t.push(n)}return w(n.name,t)}const r=this._evaluateNode(n.args,t,e,i,a);return hn(n.name,r,this.timeZone)}}throw new d(f.UnsupportedSyntax,{node:n.type})}}function Pt(n){return!0===n}function At(n){return Array.isArray(n)?n:[n]}function St(n){return null!==n?!0!==n:null}function Ft(n,t){return null!=n&&null!=t?!0===n&&!0===t:!1!==n&&!1!==t&&null}function Mt(n,t){return null!=n&&null!=t?!0===n||!0===t:!0===n||!0===t||null}function Rt(n,t,r){if(null==n)return null;let e=!1;for(const r of t)if(null==r)e=null;else{if(n===r){e=!0;break}if(X(n)&&X(r)&&(e=nn(n,r,"="),e))break}return e}const bt="-[]/{}()*+?.\\^$|";var $t;function Ut(n,t){const r=t;let e="",u=$t.Normal;for(let t=0;t<n.length;t++){const i=n.charAt(t);switch(u){case $t.Normal:i===r?u=$t.Escaped:bt.includes(i)?e+="\\"+i:e+="%"===i?".*":"_"===i?".":i;break;case $t.Escaped:bt.includes(i)?e+="\\"+i:e+=i,u=$t.Normal}}return new RegExp("^"+e+"$","m")}function Dt(n,t,r){if(null==n)return null;return Ut(t,r).test(n)}function kt(n){return n&&"object"==typeof n.attributes}function Lt(r,e,i,a){const o=a.getAttribute(r,e),s=i?.get(e);return null==o||"esriFieldTypeDate"!==s?.type&&"date"!==s?.type?null==o||"esriFieldTypeDateOnly"!==s?.type&&"date-only"!==s?.type?null==o||"esriFieldTypeTimeOnly"!==s?.type&&"time-only"!==s?.type?null==o||"esriFieldTypeTimestampOffset"!==s?.type&&"timestamp-offset"!==s?.type?o:new m(o):t.fromReader(o):n.fromReader(o):U(new Date(o),i?.getLuxonTimeZone(s.name)??u.FixedOffsetZone.utcInstance)}!function(n){n[n.Normal=0]="Normal",n[n.Escaped=1]="Escaped"}($t||($t={}));const Ct={getAttribute:(n,t)=>(kt(n)?n.attributes:n)[t]};const _t=Object.freeze({__proto__:null,WhereClause:Ot,defaultAttributeAdapter:Ct});export{_t as W,Ot as Z,f as a,d as n,m as r,w as u};
//# sourceMappingURL=p-cea3971b.js.map