import{dK as t,di as i,aw as s,ah as e,s as a,ft as r,an as h,ap as o}from"./p-3013819f.js";import{m as p,u as n}from"./p-4e55d8f0.js";import"./p-3b51db5e.js";import"./p-0d83e514.js";import"./p-7b13247d.js";import"./p-b362a32c.js";import"./p-8567e6fe.js";import"./p-c268fbe3.js";const d=Symbol();let c=class extends(p(n)){constructor(){super(...arguments),this.layerViews=new t,this._debouncedUpdate=i((async()=>{const{layer:t,parent:{footprintLayerView:i}}=this;let s=[];if(i){const e=this._createQuery(),{features:a}=await i.queryFeatures(e);this.suspended||(s=a.map((i=>t.acquireLayer(i))))}this.removeHandles(d),this.addHandles(s,d)}))}attach(){this.addAttachHandles([this._updatingHandles.addOnCollectionChange((()=>this.layerViews),(()=>this._updateStageChildren()),{initial:!0}),s((()=>!1===this.parent.footprintLayerView?.dataUpdating),(()=>this._updateLayers())),e((()=>[this.layer.maximumVisibleSublayers,this.suspended,this.parent.footprintLayerView?.filter]),(()=>this._updateLayers()))])}detach(){this.container.removeAllChildren(),this.removeHandles(d)}update(t){}moveStart(){}viewChange(){}moveEnd(){}isUpdating(){return this.layerViews.some((t=>t.updating))}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach(((t,i)=>this.container.addChildAt(t.container,i)))}_updateLayers(){this.suspended?this.removeHandles(d):this._updatingHandles.addPromise(this._debouncedUpdate().catch((t=>{a.getLogger(this).error(t)})))}_createQuery(){const{parent:{footprintLayerView:t},layer:{maximumVisibleSublayers:i,parent:{itemTypeField:s,itemSourceField:e,objectIdField:a,orderBy:h}}}=this,o=`${s} <> 'Scene Service'`,p=t.createQuery();p.returnGeometry=!1,p.num=i,p.outFields=[a,e],p.where=r(p.where,o);const n=h?.find((t=>t.field&&!t.valueExpression));return n?.field&&(p.orderByFields=[`${n.field} ${"descending"===n.order?"DESC":"ASC"}`]),p}};c=h([o("esri.views.2d.layers.CatalogDynamicGroupLayerView2D")],c);const m=c;export default m;
//# sourceMappingURL=p-fb4ca533.js.map