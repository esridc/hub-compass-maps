import{lO as t}from"./p-aad64c9f.js";import{i as r,t as n}from"./p-5b459e36.js";function e(e,u,a){const c=Array.isArray(e),s=c?e.length/u:e.byteLength/(4*u),y=c?e:new Uint32Array(e,0,s*u),A=a?.minReduction??0,w=a?.originalIndices||null,p=w?w.length:0,U=a?.componentOffsets||null;let m=0;if(U)for(let t=0;t<U.length-1;t++){const r=U[t+1]-U[t];r>m&&(m=r)}else m=s;const b=Math.floor(1.1*m)+1;(null==i||i.length<2*b)&&(i=new Uint32Array(t(2*b)));for(let t=0;t<2*b;t++)i[t]=0;let h=0;const M=!!U&&!!w,d=M?p:s;let j=r(s);const k=new Uint32Array(p),q=1.96;let x=0!==A?Math.ceil(4*q*q/(A*A)*A*(1-A)):d,C=1,O=U?U[1]:d;for(let t=0;t<d;t++){if(t===x){const r=1-h/t;if(r+q*Math.sqrt(r*(1-r)/t)<A)return null;x*=2}if(t===O){for(let t=0;t<2*b;t++)i[t]=0;if(w)for(let t=U[C-1];t<U[C];t++)k[t]=j[w[t]];O=U[++C]}const r=M?w[t]:t,n=r*u,e=o(y,n,u);let l=e%b,a=h;for(;0!==i[2*l+1];){if(i[2*l]===e){const t=i[2*l+1]-1;if(f(y,n,t*u,u)){a=j[t];break}}l++,l>=b&&(l-=b)}a===h&&(i[2*l]=e,i[2*l+1]=r+1,h++),j[r]=a}if(0!==A&&1-h/s<A)return null;if(M){for(let t=U[C-1];t<k.length;t++)k[t]=j[w[t]];j=n(k)}const g=c?new Array(h):new Uint32Array(h*u);h=0;for(let t=0;t<d;t++)if(j[t]===h){l(y,(M?w[t]:t)*u,g,h*u,u),h++}if(w&&!M){const t=new Uint32Array(p);for(let r=0;r<t.length;r++)t[r]=j[w[r]];j=n(t)}return{buffer:Array.isArray(g)?g:g.buffer,indices:j,uniqueCount:h}}function f(t,r,n,e){for(let f=0;f<e;f++)if(t[r+f]!==t[n+f])return!1;return!0}function l(t,r,n,e,f){for(let l=0;l<f;l++)n[e+l]=t[r+l]}function o(t,r,n){let e=0;for(let f=0;f<n;f++)e=t[r+f]+e|0,e=e+(e<<11)+(e>>>2)|0;return e>>>0}let i=null;export{e};
//# sourceMappingURL=p-f9e31f43.js.map