import{t}from"./p-1cc0bf3b.js";async function n(n,e){const{loadContext:a,...i}=e||{},o=a?await a.fetchServiceMetadata(n,i):await t(n,i);c(o),r(o);const u={serviceJSON:o};if((o.currentVersion??0)<10.5)return u;const f=`${n}/layers`,s=a?await a.fetchServiceMetadata(f,i):await t(f,i);return c(s),r(s),u.layersJSON={layers:s.layers,tables:s.tables},u}function e(t){return"Feature Layer"===t.type||"Oriented Imagery Layer"===t.type}function a(t){return"Table"===t.type}function r(t){t.layers=t.layers?.filter(e),t.tables=t.tables?.filter(a)}function i(t){t.type||="Feature Layer"}function o(t){t.type||="Table"}function c(t){t.layers?.forEach(i),t.tables?.forEach(o)}export{n as t};
//# sourceMappingURL=p-6e6347a2.js.map