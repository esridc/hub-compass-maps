import{an as e,ao as s,ap as r,am as a}from"./p-028496e2.js";const t={visible:"visibleSublayers"};let l=class extends a{constructor(e){super(e),this.scale=0}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.sublayers.on("change",(()=>this.notifyChange("visibleSublayers"))),e.on("wms-sublayer-update",(e=>this.notifyChange(t[e.propertyName])))],"layer"))}get layers(){return this.visibleSublayers.filter((({name:e})=>e)).map((({name:e})=>e)).join()}get version(){this.commitProperty("layers");const e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:e,scale:s}=this,r=e?.sublayers,a=[],t=e=>{const{minScale:r,maxScale:l,sublayers:i,visible:n}=e;n&&(0===s||(0===r||s<=r)&&(0===l||s>=l))&&(i?i.forEach(t):a.push(e))};return r?.forEach(t),a}toJSON(){const{layer:e,layers:s}=this,{imageFormat:r,imageTransparency:a,version:t}=e;return{format:r,request:"GetMap",service:"WMS",styles:"",transparent:a?"TRUE":"FALSE",version:t,layers:s}}};e([s()],l.prototype,"layer",null),e([s({readOnly:!0})],l.prototype,"layers",null),e([s({type:Number})],l.prototype,"scale",void 0),e([s({readOnly:!0})],l.prototype,"version",null),e([s({readOnly:!0})],l.prototype,"visibleSublayers",null),l=e([r("esri.layers.support.ExportWMSImageParameters")],l);export{l as a};
//# sourceMappingURL=p-c7128372.js.map