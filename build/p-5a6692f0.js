import{oo as n,e3 as e,mi as t}from"./p-aad64c9f.js";function o(n){return n?I:x}function u(n,e){return e?.mode?e.mode:o(n).mode}function r(n,e){return null!=e?e:o(n)}function s(n,e){return u(null==n||(n.hasZ??!1),e)}function c(n){const e=i(n);return s(n.geometry,e)}function l(n){const e=i(n),t=s(n.geometry,e),o=null!=e&&"on-the-ground"!==t?w(e):0,u=e?.featureExpressionInfo;return{mode:t,offset:o,featureExpressionInfo:u}}function i(n){return n.layer&&"elevationInfo"in n.layer?n.layer.elevationInfo:null}function a(t,o){if(!t?.offset)return 0;const{offset:u,unit:r}=t;if("decimal-degrees"===r)return 0;const s="unknown"!==r&&r?r:"meters",c=n(o);return c?e(u,s,c):0}function f(n,e,t){if(!t?.mode)return;const o=n.hasZ?n.z:0,u=a(t,n.spatialReference);switch(t.mode){case"absolute-height":return o-u;case"on-the-ground":return 0;case"relative-to-ground":return o-((e.elevationProvider.getElevation(n.x,n.y,o,n.spatialReference,"ground")??0)+u);case"relative-to-scene":return o-((e.elevationProvider.getElevation(n.x,n.y,o,n.spatialReference,"scene")??0)+u)}}function d(n,e,t,o=null){return h(n,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,t,o)}function g(n,e,t,o,u=null){return h(n,e[0],e[1],e.length>2?e[2]:0,t,o,u)}function h(n,e,t,o,u,r,s=null){if(null==r)return;const c=null!=s?s.mode:"absolute-height";if("on-the-ground"===c)return 0;const{absoluteZ:l}=v(e,t,o,u,n,r);return p(l,e,t,o,u,n,s,c)}function v(n,e,t,o,u,r){const s=a(r,o);switch(r.mode){case"absolute-height":return{absoluteZ:t+s,elevation:0};case"on-the-ground":{const t=u.elevationProvider.getElevation(n,e,0,o,"ground")??0;return{absoluteZ:t,elevation:t}}case"relative-to-ground":{const r=u.elevationProvider.getElevation(n,e,t,o,"ground")??0;return{absoluteZ:t+r+s,elevation:r}}case"relative-to-scene":{const r=u.elevationProvider.getElevation(n,e,t,o,"scene")??0;return{absoluteZ:t+r+s,elevation:r}}}}function p(n,e,t,o,u,r,s,c){const l=a(s,u);switch(c){case"absolute-height":return n-l;case"relative-to-ground":return n-((r.elevationProvider.getElevation(e,t,o,u,"ground")??0)+l);case"relative-to-scene":return n-((r.elevationProvider.getElevation(e,t,o,u,"scene")??0)+l)}}function b(n,e,t){return t&&t.mode!==e?`${n} only support ${e} elevation mode`:null}function m(n,e,t){return t?.mode===e?`${n} do not support ${e} elevation mode`:null}function Z(n,e){return null!=e?.featureExpressionInfo&&"0"!==e.featureExpressionInfo.expression?`${n} do not support featureExpressionInfo`:null}function $(n,e){e&&n.warn(".elevationInfo=",e)}function w(n){return(n?.offset??0)*t(n?.unit)}const I={mode:"absolute-height",offset:0},x={mode:"on-the-ground",offset:null};export{$,h as E,m as P,b as Z,l as a,v as b,s as i,I as j,c as l,d as m,f as p,r as u,Z as w,g as x};
//# sourceMappingURL=p-5a6692f0.js.map