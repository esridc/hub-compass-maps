import{af as t,dc as s,dK as i,aY as p,cH as r,an as e,ao as a,ap as o}from"./p-028496e2.js";import{t as h}from"./p-95e79972.js";import{m,u as j}from"./p-a29a1b7a.js";import{t as c}from"./p-b3bc59ae.js";import{$ as d}from"./p-eccdd480.js";import{t as f}from"./p-5e7063f6.js";import"./p-3b51db5e.js";import"./p-d1d0c06b.js";import"./p-b362a32c.js";import"./p-8567e6fe.js";import"./p-711ed159.js";import"./p-262e0e67.js";import"./p-44dc1c97.js";import"./p-eaa7279e.js";import"./p-91f3f02f.js";import"./p-30a1f911.js";import"./p-6f5e77a7.js";import"./p-7b65c278.js";import"./p-94b15954.js";import"./p-6b5df147.js";import"./p-3811f238.js";import"./p-8e631d44.js";import"./p-a925664a.js";import"./p-851e644d.js";import"./p-5c282fdd.js";import"./p-5a65512b.js";import"./p-89242a33.js";import"./p-7580bdba.js";import"./p-a62b18ce.js";import"./p-af8cc455.js";import"./p-b0afd947.js";import"./p-0b0f20ea.js";import"./p-10e5b6ea.js";import"./p-3b8b0ae8.js";import"./p-854d8fad.js";import"./p-1f0b604e.js";import"./p-347800d3.js";import"./p-6339641f.js";import"./p-325c6878.js";import"./p-18b49978.js";import"./p-ecde740d.js";import"./p-3a28ec18.js";import"./p-4f73c6ea.js";import"./p-f87a9f21.js";let n=class extends(m(j)){constructor(){super(...arguments),this._highlightCounter=new f}attach(){this.graphicsView=new d({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:this.layer.graphics,container:new c(this.view.featuresTilingScheme),layerId:this.layer.id}),this.container.addChild(this.graphicsView.container),this.addAttachHandles(this.layer.on("graphic-update",this.graphicsView.graphicUpdateHandler)),this._updateHighlight()}detach(){this.container.removeAllChildren(),this.graphicsView=t(this.graphicsView)}async hitTest(t){return this.graphicsView?this.graphicsView.hitTest(t).map((s=>({type:"graphic",graphic:s,mapPoint:t,layer:this.layer}))):null}queryGraphics(){return Promise.resolve(this.graphicsView.graphics)}update(t){this.graphicsView.processUpdate(t)}moveStart(){}viewChange(){this.graphicsView.viewChange()}moveEnd(){}isUpdating(){return!this.graphicsView||this.graphicsView.updating}highlight(t,e="highlight"){let a;"number"==typeof t?a=[t]:t instanceof s?a=[t.uid]:Array.isArray(t)&&t.length>0?a="number"==typeof t[0]?t:t.map((t=>t&&t.uid)):i.isCollection(t)&&t.length>0&&(a=t.map((t=>t&&t.uid)).toArray());const o=a?.filter(p);return o?.length?(this._addHighlight(o,e),r((()=>this._removeHighlight(o,e)))):r()}_addHighlight(t,s){this._highlightCounter.addReason(t,s),this._updateHighlight()}_removeHighlight(t,s){this._highlightCounter.deleteReason(t,s),this._updateHighlight()}_updateHighlight(){const t=[];for(const s of this._highlightCounter.ids()){const i=this._highlightCounter.getHighestReason(s),p=h(i);t.push({objectId:s,highlightFlags:p})}this.graphicsView?.setHighlight(t)}};e([a()],n.prototype,"graphicsView",void 0),n=e([o("esri.views.2d.layers.GraphicsLayerView2D")],n);const b=n;export default b;
//# sourceMappingURL=p-b6af8b0f.js.map